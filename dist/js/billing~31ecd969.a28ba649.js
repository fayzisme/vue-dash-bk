(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["billing~31ecd969"],{"28a5":function(t,e,a){"use strict";var r=a("aae3e"),l=a("cb7c"),i=a("ebd6"),o=a("0390"),n=a("9def"),s=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,m=[].push,p="split",g="length",h="lastIndex",f=4294967295,v=!u((function(){RegExp(f,"y")}));a("214f")("split",2,(function(t,e,a,u){var x;return x="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[g]||2!="ab"[p](/(?:ab)*/)[g]||4!="."[p](/(.?)(.?)/)[g]||"."[p](/()()/)[g]>1||""[p](/.?/)[g]?function(t,e){var l=String(this);if(void 0===t&&0===e)return[];if(!r(t))return a.call(l,t,e);var i,o,n,s=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?f:e>>>0,v=new RegExp(t.source,u+"g");while(i=c.call(v,l)){if(o=v[h],o>d&&(s.push(l.slice(d,i.index)),i[g]>1&&i.index<l[g]&&m.apply(s,i.slice(1)),n=i[0][g],d=o,s[g]>=p))break;v[h]===i.index&&v[h]++}return d===l[g]?!n&&v.test("")||s.push(""):s.push(l.slice(d)),s[g]>p?s.slice(0,p):s}:"0"[p](void 0,0)[g]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,r){var l=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,l,r):x.call(String(l),a,r)},function(t,e){var r=u(x,t,this,e,x!==a);if(r.done)return r.value;var c=l(t),m=String(this),p=i(c,RegExp),g=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),b=new p(v?c:"^(?:"+c.source+")",h),_=void 0===e?f:e>>>0;if(0===_)return[];if(0===m.length)return null===s(b,m)?[m]:[];var w=0,y=0,M=[];while(y<m.length){b.lastIndex=v?y:0;var S,Y=s(b,v?m:m.slice(y));if(null===Y||(S=d(n(b.lastIndex+(v?0:y)),m.length))===w)y=o(m,y,g);else{if(M.push(m.slice(w,y)),M.length===_)return M;for(var C=1;C<=Y.length-1;C++)if(M.push(Y[C]),M.length===_)return M;y=w=S}}return M.push(m.slice(w)),M}]}))},"44e6":function(t,e,a){t.exports=a.p+"img/logo-cropped.4ec4ea44.png"},"4d83":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-invoice scrollable"},[t._m(0),t.showAlertError?r("el-card",{staticStyle:{"margin-bottom":"1em"}},[r("error-gope-siji")],1):t._e(),t.showFormMessage?t._e():r("el-card",{attrs:{align:"center"}},[r("p",{staticStyle:{color:"#909399"},attrs:{align:"center"}},[r("img",{attrs:{src:a("c08f"),width:"100"}}),r("br"),t._v(" Sorry, you do not have billing yet. ")])]),t.showFormMessage&&!t.showAlertError?r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("el-select",{attrs:{placeholder:"Select Month"},on:{change:t.changeFilter},model:{value:t.monthValue,callback:function(e){t.monthValue=e},expression:"monthValue"}},t._l(t.optionsMonths,(function(t){return r("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),r("el-form-item",[r("el-button",{staticClass:"animated fadeInRight",attrs:{type:"primary",loading:t.loadingTable},on:{click:function(e){return t.wa_billing("download")}}},[r("i",{staticClass:"mdi mdi-download"}),t._v(" Download")])],1)],1):t._e(),t.showFormMessage&&!t.showAlertError?r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticClass:"invoice bg-white black-text"},[r("div",{staticClass:"invoice-top"},[t._m(1),r("div",{staticClass:"info",attrs:{md:12,xs:24}},[r("h2",[t._v("DAM Corp.")]),t._m(2)]),r("div",{staticClass:"title",attrs:{md:12,xs:24}},[r("h1",[t._v("Invoice")]),r("p",[t._v("Issued: "+t._s(t.today))])])]),r("hr"),r("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingTable,expression:"loadingTable"}],staticClass:"invoice-bottom"},[r("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:0}},[r("el-col",{attrs:{xs:11,sm:11,md:11,lg:11,xl:11}},[r("span",{staticClass:"header-text"},[t._v("Service Description")])]),r("el-col",{attrs:{xs:5,sm:5,md:5,lg:5,xl:5}},[r("span",{staticClass:"header-text"},[t._v("Type")])]),r("el-col",{attrs:{xs:4,sm:12,md:4,lg:4,xl:4}},[r("span",{staticClass:"header-text"},[t._v("Total Message")])]),r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("span",{staticClass:"header-text"},[t._v("Sub total")])])],1),r("hr"),t._l(t.whatsappBilling,(function(e,a){return r("el-row",{key:a,attrs:{gutter:0}},[r("el-col",{staticStyle:{"margin-bottom":"20px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("span",[r("b",[t._v("Whatsapp Business ("+t._s(t.whatsappNumber[a])+")")])])]),r("hr"),t._l(t.whatsappBilling[a],(function(e,a){return r("el-row",{key:a,staticStyle:{"margin-bottom":"0px"},attrs:{gutter:0}},[r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:2,sm:2,md:2,lg:2,xl:2}},[t._v("   ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:9,sm:9,md:9,lg:9,xl:9}},[t._v(" "+t._s(e.product.productName)+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:5,sm:5,md:5,lg:5,xl:5}},[t._v(" "+t._s(t.capitalizeFirstLetter(e.product.type)||" ")+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[t._v(" "+t._s(-1!=e.product.type.toLowerCase().indexOf("notification")&&e.detail.length>0?" ":e.delivered.toLocaleString("id"))+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[t._v(" "+t._s(-1!=e.product.type.toLowerCase().indexOf("notification")&&e.detail.length>0?" ":"Rp "+e.total.toLocaleString("id",{minimumFractionDigits:0==Number.isInteger(e.total)?4:void 0}))+" ")]),r("hr"),t._l(e.detail,(function(a,l){return-1!=e.product.type.toLowerCase().indexOf("notification")&&e.detail.length>0?r("el-row",{key:l,attrs:{gutter:0}},[r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:3,sm:3,md:3,lg:3,xl:3}},[t._v("   ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:9,sm:9,md:9,lg:9,xl:9}},[t._v(" "+t._s(a.countryCode)+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[t._v(" "+t._s(a.name)+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[t._v(" "+t._s(a.count.toLocaleString("id")||"0")+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[t._v(" Rp "+t._s(a.total.toLocaleString("id",{minimumFractionDigits:0==Number.isInteger(a.total)?4:void 0}))+" ")]),r("hr")],1):t._e()}))],2)}))],2)})),t.billing_product_log.length>0?r("el-row",{attrs:{gutter:0}},[r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("span",[r("b",[t._v("Note")])])]),r("hr"),t._l(t.billing_product_log,(function(e,a){return r("el-row",{key:a,staticStyle:{"margin-bottom":"0px"},attrs:{gutter:0}},[r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:2,sm:2,md:2,lg:2,xl:2}},[t._v("   ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:9,sm:9,md:9,lg:9,xl:9}},[t._v(" "+t._s(t.formatDate(e.createdAt,"DD MMM YYYY, HH:mm"))+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:9,sm:9,md:9,lg:9,xl:9}},[t._v(" "+t._s(e.reff_note)+" ")]),r("el-col",{staticStyle:{"margin-bottom":"10px"},attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[t._v("   ")]),r("hr")],1)}))],2):t._e(),r("el-row",{attrs:{gutter:0}},[r("el-col",{attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[r("h2",{staticStyle:{"font-size":"24px"}},[t._v("Total")])]),r("el-col",{attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[r("h2",{staticStyle:{"font-size":"24px"}},[t._v("Rp "+t._s(t.totalBill.toLocaleString("id",{minimumFractionDigits:0==Number.isInteger(t.totalBill)?4:void 0})))])])],1)],2)]):t._e()],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"page-header"},[a("h1",[t._v("Billing")])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"logo"},[r("img",{attrs:{src:a("44e6"),alt:"logo"}})])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("daisy@damcorp.id"),a("br"),t._v("(021) 30487010")])}],i=(a("7f7f"),a("ac6a"),a("96cf"),a("1da1")),o=(a("28a5"),a("271f")),n=a("db49"),s=a("c1df"),c=a.n(s),u=a("2ef0"),d=a.n(u),m={name:"Invoice",data:function(){return{clientName:"",companyName:"",companyPhone:"",totalWA:0,monthValue:c()().format("YYYY-MM"),optionsMonths:[],today:c()().format("DD MMM YYYY"),getMonth:c()().month()+1,getYear:c()().year(),billWhatsapp:{},waServAlias:{text:"Whatsapp Regular Text",hsm:"Whatsapp Template Text",image:"Whatsapp Image",document:"Whatsapp Document",audio:"Whatsapp Audio"},whatsappNumber:[],whatsappBilling:[],totalBill:0,loadingTable:!0,showFormMessage:!0,currentMonth:c()().format("YYYY-MM"),showAlertError:!1,loadingExport:!1,billing_product_log:[]}},methods:{capitalizeFirstLetter:function(t){if(t.split("_").length>0){var e=[];return d.a.map(t.split("_"),(function(t){e.push(t.charAt(0).toUpperCase()+t.slice(1))})),e.join(" ")}return t.charAt(0).toUpperCase()+t.slice(1)},print:function(){window.print()},changeFilter:function(){this.currentMonth=this.monthValue,this.loadingTable=!0,this.wa_billing()},formatDate:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD";return c()(t).format(e)},wa_billing:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,r=this,l=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:"",this.loadingTable=!0,this.loadingExport=!1,a={url:n["a"].baseApi+"/user/billing",method:"post",data:{months:this.currentMonth,with_date:!0},timeout:9e4},"download"==e?(a.url+="?download",a.responseType="blob"):this.totalBill=0,t.next=7,Object(o["a"])(a).then((function(t){var a=new Array,l=new Array,i=0,o="";if(200==t.data.ec||"download"==e)if(-1==t.headers["content-type"].indexOf("application/json"))try{o=c()(r.currentMonth).format("M")==r.getMonth?r.today:c()(r.currentMonth).endOf("month").format("DD MMM YYYY");var n=window.URL.createObjectURL(new Blob([t.data],{type:t.headers["content-type"]})),s=document.createElement("a");s.href=n,s.setAttribute("download","Report Billing (Platform by DAMCorp)("+o+").xls"),s.click()}catch(p){}else{var u=t.data.data.billing,m=t.data.data.update_log;r.billing_product_log=m,d.a.forEach(u,(function(t){a.push(t.phone_number),l[i]=new Array;var e=new Array,o=0;d.a.forEach(t.billing,(function(a){var n={product:a.product,delivered:a.delivered,total:a.billing,detail:a.detail};if(a.serviceFee)r.totalBill+=parseFloat(a.serviceFee),e.push({product:{productName:"Service Fee",type:""},delivered:"",total:parseFloat(a.serviceFee)});else{var s=0;a.detail&&(a.detail.forEach((function(t){s+=parseFloat(t.serviceFee)})),r.totalBill+=parseFloat(s),e.push({product:{productName:"Service Fee",type:""},delivered:"",total:parseFloat(s)}))}a.billingTax&&(r.totalBill+=parseFloat(a.billingTax),e.push({product:{productName:a.product.productName+" Tax",type:""},delivered:"",total:parseFloat(a.billingTax)})),l[i].push(n),o+1==t.billing.length&&d.a.forEach(e,(function(t){l[i].push(t)})),Array.isArray(a.detail)?a.detail.forEach((function(t){r.totalBill+=t.total})):r.totalBill+=a.billing,o++})),i++})),r.whatsappNumber=a,r.whatsappBilling=l}else r.showFormMessage=!1})).catch((function(t){r.tokenLoader=!1,r.showAlertError=!0}));case 7:this.loadingTable=!1;case 8:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),wa_detail:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(o["a"])({method:"post",url:"user/detail"}).then((function(t){e.clientName=t.data.data.user.pic,e.companyName=t.data.data.user.name,e.companyPhone=t.data.data.user.phone,e.totalWA=t.data.data.sendCount})).catch((function(t){e.showAlertError=!0}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},beforeMount:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=6;e>=0;e--)this.optionsMonths.push({value:c()().subtract(e,"month").format("YYYY-MM"),label:c()().subtract(e,"month").format("MMM YYYY")});return t.next=3,this.wa_billing();case 3:this.loadingTable=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()},p=m,g=(a("5f62"),a("2877")),h=Object(g["a"])(p,r,l,!1,null,null,null);e["default"]=h.exports},"5f62":function(t,e,a){"use strict";a("bf2d")},aae3e:function(t,e,a){var r=a("d3f4"),l=a("2d95"),i=a("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==l(t))}},bf2d:function(t,e,a){},c08f:function(t,e,a){t.exports=a.p+"img/no_billing@3x.d9ca18a2.png"}}]);