(window.webpackJsonp=window.webpackJsonp||[]).push([["contacts"],{3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");function o(t){a("2aba")(RegExp.prototype,i,t,!0)}var n=a("cb7c"),r=a("0bfb"),c=a("9e1e"),i="toString",l=/./[i];a("79e5")(function(){return"/a/b"!=l.call({source:"a",flags:"b"})})?o(function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!c&&t instanceof RegExp?r.call(t):void 0)}):l.name!=i&&o(function(){return l.call(this)})},"7ac0":function(t,e,a){},"935a":function(t,e,a){"use strict";a("c52f")},"9bdf":function(t,e,n){"use strict";n.r(e);var a,o,r,c,i,l,s,u,d=(n("6b54"),n("ac6a"),n("7f7f"),n("96cf"),n("3b8d")),p=n("bce9"),g=n("271f"),h=(n("db49"),n("c0d6")),m=n("2ef0"),f=n.n(m),m={data:function(){function t(t,e,a){if("single"==o.addType){if(!e)return a(new Error(o.$t("contact.warning."+t.field)));a()}}var o=this;return{selectedGroupId:[],checked:{},groupName:this.$t("contact.all"),groupId:0,list:[],groups:[{group_id:0,group_name:this.$t("contact.all")}],menu:[],contactLoader:!0,currentPage:1,currentPageContact:1,currentPageGroupContact:1,contactsTotal:0,searchContact:"",buttonContactDialogLoader:!1,contactDialog:{visible:!1,data:{title:"",name:"",phone_number:""},type:"detail"},rulesForm:{name:[{validator:t,trigger:"blur"}],phone_number:[{validator:t,trigger:"blur"}]},groupLoader:!0,searchGroup:"",buttonGroupDialogLoader:!1,groupDialog:{visible:!1,data:{group_name:""},type:"detail"},buttonAddToGroupDialogLoader:!1,addToGroupDialog:{visible:!1,data:{},type:"detail"},formLabelWidth:"120px",logData:"",addType:"single",csvData:[],btnAddtogroup:!1,timeout:null}},methods:{removeContactBulk:function(){var o=this;this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return Object(g.a)({method:"delete",url:"phonebook/bulk",data:o.checkedContact}).then((e=Object(d.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}));var e}}).then(function(t){var e;200==t.data.ec?(o.loadGroup(),o.$swal({type:"success",title:o.$t("success"),text:""}).then((e=Object(d.a)(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a in o.checked)o.checked.hasOwnProperty(a)&&(o.checked[a]=!1);o.list=[],o.contactLoader=!0,o.loadContact();case 4:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}))):400==t.data.ec?o.errorMessage=t.data.message:o.$swal(o.$t("error"),o.$t("error_text"),"error")})},resetContactForm:function(){this.contactDialog.data.title="",this.contactDialog.data.name="",this.contactDialog.data.phone_number="",this.contactDialog.data.param_1="",this.contactDialog.data.param_2="","add"==this.contactDialog.type&&(document.getElementById("inputCsvFile").value=""),this.csvData=[]},onUploadCsv:function(t){var e,a,o=this,n=t.target;n.files&&n.files[0]?(e=n.files[0],a=function(t){-1==n.files[0].name.indexOf(".csv")?(o.contactDialog.visible=!1,o.resetContactForm(),o.$swal(o.$t("error"),"File type not allowed","error")):o.csvData=o.csvJSON(t)},o.$papa.parse(e,{download:!0,dynamicTyping:!0,complete:function(t){a(t.data)}})):this.resetContactForm()},csvJSON:function(t){var t=t,e=[];return t[0],t.shift(),t.forEach(function(t){t[1]&&t[2]&&e.push({title:t[0],name:t[1],phoneNumber:t[2],param_1:t[3]||"",param_2:t[4]||"",customerId:h.a.getters.customerID})}),e},cancelAddContact:function(){this.contactDialog.visible=!1,this.resetContactForm()},handleTab:function(t,e){this.addType=t.name,this.resetContactForm()},numberOnly:function(t){window.event?t.keyCode:t.which,-1!==f.a.indexOf([8,9,27,13,190,43],t.keyCode)||86===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||82===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||42<t.keyCode&&t.keyCode<=49&&-1==f.a.indexOf([44,45,46,47],t.keyCode)||(t.shiftKey||t.keyCode<48||57<t.keyCode)&&(96<t.keyCode||t.keyCode<200)&&t.preventDefault()},paste:function(t){t.preventDefault();for(var e,a=window.event.clipboardData.getData("Text"),o="",n=0;n<a.length;n++)e=a.charAt(n),-1!="+0123456789".indexOf(e)&&(o+=e);this.contactDialog.data.phone_number=o},openDialog:function(t,e){this.contactDialog.data.phonebook_id=t.phonebook_id,this.contactDialog.data.name=t.name,this.contactDialog.data.title=t.title,this.contactDialog.data.param_1=t.param_1,this.contactDialog.data.param_2=t.param_2,this.contactDialog.data.phone_number=t.phone_number,"remove"==e?this.doRemoveContact():"removeFromGroup"==e?this.doRemoveContactFromGroup():(this.contactDialog.visible=!0,this.contactDialog.type=e)},doSubmitContact:function(t){this.buttonContactDialogLoader=!0,"edit"==t?this.doEditContact():"add"==t&&this.doAddContact()},doAddContact:function(){var t,e,a=this;"single"==this.addType?this.$refs.contactDialog.validate((e=Object(d.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:0!=a.groupId&&(a.contactDialog.data.groupId=a.groupId),e?(a.contactDialog.data.customer_id=h.a.getters.customerID,Object(g.a)({method:"post",url:"phonebook",data:a.contactDialog.data}).then(function(t){a.buttonContactDialogLoader=!1,a.contactDialog.visible=!1,200==t.data.ec?a.$swal({title:a.$t("success"),text:"",type:"success"}).then(function(t){a.list=[],a.contactLoader=!0,a.loadContact(),0!=a.groupId&&a.loadGroup(),a.resetContactForm()}):400==t.data.ec?a.$swal({title:a.$t("error"),text:t.data.message,type:"error"}):a.$swal(a.$t("error"),a.$t("error_text"),"error")}).catch(function(t){a.buttonContactDialogLoader=!1,a.contactDialog.visible=!1,a.$swal(a.$t("error"),a.$t("error_text"),"error")})):a.buttonContactDialogLoader=!1;case 2:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)})):"csv"==this.addType&&(this.$refs.contactDialog.resetFields(function(t){}),t={phonebook:this.csvData},0!=this.groupId&&(t.groupId=this.groupId),Object(g.a)({method:"post",url:"phonebook/bulk",timeout:3e5,data:t}).then(function(t){a.buttonContactDialogLoader=!1,a.contactDialog.visible=!1,200==t.data.ec?a.$swal({title:a.$t("success"),text:"Please wait while we save your contact.",type:"success"}).then(function(t){a.list=[],a.contactLoader=!0,a.loadContact(),a.resetContactForm(),0!=a.groupId&&a.loadGroup()}):400==t.data.ec?a.$swal({title:a.$t("error"),text:t.data.message,type:"error"}):a.$swal(a.$t("error"),a.$t("error_text"),"error")}).catch(function(t){a.buttonContactDialogLoader=!1,a.contactDialog.visible=!1,a.$swal(a.$t("error"),a.$t("error_text"),"error")}))},doEditContact:function(){var a=this;Object(g.a)({method:"patch",url:"phonebook/"+this.contactDialog.data.phonebook_id,data:this.contactDialog.data}).then(function(t){var e;a.buttonContactDialogLoader=!1,200==t.data.ec?(a.contactDialog.visible=!1,a.$swal({title:a.$t("success"),text:"",type:"success"}).then(function(t){a.list=[],a.contactLoader=!0,a.loadContact()})):400==t.data.ec?(e=a.$t("contact.".concat(t.data.message)),"duplicate_number"==t.data.message&&(e+="(Duplicated with: ".concat(t.data.data.name,")")),a.$message.error({showClose:!1,timeout:5e3,message:e})):a.$message.error({showClose:!1,message:t.data.message})}).catch(function(t){a.buttonContactDialogLoader=!1,a.contactDialog.visible=!1,a.$message.error({showClose:!1,message:a.$t("login.invalid_parameter")})})},doRemoveContact:function(){var a=this;this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return Object(g.a)({method:"delete",url:"phonebook/"+a.contactDialog.data.phonebook_id}).then((e=Object(d.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}));var e}}).then(function(t){var e;200==t.data.ec?(a.loadGroup(),a.$swal({type:"success",title:a.$t("success"),text:""}).then((e=Object(d.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a.list=[],a.contactLoader=!0,a.loadContact();case 3:case"end":return t.stop()}},t)})),function(t){return e.apply(this,arguments)}))):400==t.data.ec?a.errorMessage=t.data.message:a.$swal(a.$t("error"),a.$t("error_text"),"error")})},openAddToGroup:function(){this.selectedGroupId=[],this.addToGroupDialog.visible=!0},doAddContactToGroup:(u=Object(d.a)(regeneratorRuntime.mark(function t(){var e,a,o,n,r,c=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.buttonAddToGroupDialogLoader=!0,e=h.a.getters.customerID,a=1,o="",n=[],t.t0=regeneratorRuntime.keys(this.selectedGroupId);case 6:if((t.t1=t.t0()).done){t.next=14;break}return r=t.t1.value,r=this.selectedGroupId[r],r={customer_id:e,phonebook_id:this.checkedContact,group_id:r},t.next=12,Object(g.a)({method:"post",url:"group/add_to",data:r}).then(function(t){200!=t.data.ec&&(a=0,o=400==t.data.ec?c.$t("contact."+t.data.message):c.$t("error_text"),n.push(c.checkedContact))});case 12:t.next=6;break;case 14:this.addToGroupDialog.visible=!1,1==a?this.$swal({type:"success",title:this.$t("success"),text:""}).then(function(){var e=Object(d.a)(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(a in c.checked)c.checked.hasOwnProperty(a)&&(c.checked[a]=!1);return c.selectedGroupId=[],c.contactLoader=!0,t.next=5,c.loadContact();case 5:return t.next=7,c.loadGroup();case 7:case"end":return t.stop()}},t)}));return function(t){return e.apply(this,arguments)}}()).catch(function(t){c.buttonAddToGroupDialogLoader=!0}):this.$swal(this.$t("error"),o,"error"),this.buttonAddToGroupDialogLoader=!1;case 17:case"end":return t.stop()}},t,this)})),function(){return u.apply(this,arguments)}),doRemoveContactFromGroup:function(){var e=this,t={customer_id:h.a.getters.customerID,phonebook_id:this.contactDialog.data.phonebook_id,group_id:this.groupId};this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return Object(g.a)({method:"post",url:"group/delete_from",data:t}).then(function(t){return t})}}).then(function(t){200==t.data.ec?e.$swal({type:"success",title:e.$t("success"),text:""}).then(function(t){e.list=[],e.checked=[],e.contactLoader=!0,e.loadContact(),0!=e.groupId&&e.loadGroup()}):400==t.data.ec?e.errorMessage=t.data.message:e.$swal(e.$t("error"),e.$t("error_text"),"error")})},openGroupDialog:function(t,e){this.groupDialog.data.group_id=t.group_id,this.groupDialog.data.group_name=t.group_name,"remove"==e?this.doRemoveGroup():(this.groupDialog.visible=!0,this.groupDialog.type=e)},doSubmitGroup:function(t){this.buttonGroupDialogLoader=!0,"edit"==t?this.doEditGroup():"add"==t&&this.doAddGroup()},doAddGroup:function(){var e=this;this.groupDialog.data.customer_id=h.a.getters.customerID,Object(g.a)({method:"post",url:"group",data:this.groupDialog.data}).then(function(t){e.buttonGroupDialogLoader=!1,e.groupDialog.visible=!1,200==t.data.ec?e.$swal({title:e.$t("success"),text:"",type:"success"}).then(function(t){setTimeout(function(){e.groupLoader=!0,e.loadGroup()},500)}):400==t.data.ec?e.$swal({title:e.$t("error"),text:t.data.message,type:"error"}):e.$swal(e.$t("error"),e.$t("error_text"),"error")}).catch(function(t){e.buttonGroupDialogLoader=!1,e.groupDialog.visible=!1,e.$swal(e.$t("error"),e.$t("error_text"),"error")})},doEditGroup:function(){var e=this;Object(g.a)({method:"patch",url:"group/"+this.groupDialog.data.group_id,data:this.groupDialog.data}).then(function(t){e.buttonGroupDialogLoader=!1,e.groupDialog.visible=!1,200==t.data.ec?e.$swal({title:e.$t("success"),text:"",type:"success"}).then(function(t){setTimeout(function(){e.groupLoader=!0,e.loadGroup()},500)}):400==t.data.ec?e.$swal({title:e.$t("error"),text:t.data.message,type:"error"}):e.$swal(e.$t("error"),e.$t("error_text"),"error")}).catch(function(t){e.buttonGroupDialogLoader=!1,e.groupDialog.visible=!1,e.$swal(e.$t("error"),e.$t("error_text"),"error")})},doRemoveGroup:function(){var e=this;this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button")}).then(function(t){Object(g.a)({method:"delete",url:"group/"+e.groupDialog.data.group_id}).then(function(t){200==t.data.ec?e.$swal({type:"success",title:e.$t("success"),text:""}).then(function(t){setTimeout(function(){e.groupLoader=!0,e.loadGroup()},500)}):400==t.data.ec?e.errorMessage=t.data.message:e.$swal(e.$t("error"),e.$t("error_text"),"error")}).catch(function(t){e.buttonGroupDialogLoader=!1,e.$swal(e.$t("error"),e.$t("error_text"),"error")})})},openGroup:function(t){this.groupName=t.group_name,this.groupId=t.group_id,this.list=[],this.contactLoader=!0,this.loadContact()},loadContact:(s=Object(d.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!=this.groupId)return t.next=3,this.loadContactByGroup();t.next=5;break;case 3:t.next=7;break;case 5:return t.next=7,this.loadContactAll();case 7:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),loadContactByGroup:(l=Object(d.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.contactLoader=!0,this.currentPage=this.currentPageGroupContact,this.currentPageContact=1,t.next=6,Object(g.a)({method:"get",url:"group/"+this.groupId,params:{page:this.currentPage}}).then(function(t){e.list=t.data.data.contact,e.contactLoader=!1,e.contactsTotal=t.data.data.group.total}).catch(function(t){e.contactLoader=!1});case 6:case"end":return t.stop()}},t,this)})),function(){return l.apply(this,arguments)}),nextContact:(i=Object(d.a)(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:""!=this.searchContact?(this.currentPageContact=e,this.currentPage=this.currentPageContact,this.doGetSearchContact(this.searchContact)):0!=this.groupId?(this.currentPageGroupContact=e,this.currentPage=this.currentPageGroupContact,this.loadContactByGroup(e)):(this.currentPageContact=e,this.currentPage=this.currentPageContact,this.loadContactAll(e));case 1:case"end":return t.stop()}},t,this)})),function(t){return i.apply(this,arguments)}),doSearchContact:function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout(function(){3<=e.searchContact.length?(e.currentPageContact=e.currentPageGroupContact=e.currentPage=1,e.doGetSearchContact(e.searchContact)):e.loadContactAll()},1e3)},doGetSearchContact:(c=Object(d.a)(regeneratorRuntime.mark(function t(){var e,a=this,o=arguments;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=0<o.length&&void 0!==o[0]?o[0]:"",this.contactLoader=!0,t.next=5,Object(g.a)({method:"get",url:"phonebook/search",params:{page:this.currentPage,query:e,group_id:0!=this.groupId?this.groupId:""}}).then(function(t){a.list=t.data.data.contact,a.contactsTotal=t.data.data.rows,a.contactLoader=!1}).catch(function(t){a.contactLoader=!1});case 5:case"end":return t.stop()}},t,this)})),function(){return c.apply(this,arguments)}),loadContactAll:(r=Object(d.a)(regeneratorRuntime.mark(function t(e){var a=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.contactLoader=!0,this.currentPage=this.currentPageContact,this.currentPageGroupContact=1,t.next=5,Object(g.a)({method:"get",url:"phonebook",params:{page:this.currentPage}}).then(function(t){a.list=t.data.data.contact,a.contactsTotal=t.data.data.rows,a.contactLoader=!1}).catch(function(t){a.contactLoader=!1});case 5:case"end":return t.stop()}},t,this)})),function(t){return r.apply(this,arguments)}),loadGroup:(o=Object(d.a)(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(g.a)({method:"get",url:"group/all"}).then(function(t){e.groups=[],e.groups=[{group_id:0,group_name:e.$t("contact.all")}],t.data.data.forEach(function(t){e.groups.push(t)}),e.groupLoader=!1}).catch(function(t){e.groupLoader=!1});case 2:case"end":return t.stop()}},t)})),function(){return o.apply(this,arguments)})},computed:{formRequiredIsFilled:function(){if("csv"==this.addType){if(this.csvData.length)return!0}else if("single"==this.addType)return!0;return!1},groupFiltered:function(){var e=this;return this.groups.filter(function(t){return-1!==t.group_name.toString().toLowerCase().indexOf(e.searchGroup.toString().toLowerCase())})},contactDialogReadonly:function(){return"detail"==this.contactDialog.type},contactDialogTitle:function(){return this.$t("contact."+this.contactDialog.type)},groupDialogReadonly:function(){return"detail"==this.groupDialog.type},groupDialogTitle:function(){return this.$t("group."+this.groupDialog.type)},checkedContact:function(){var t,e=[];for(t in this.checked)this.checked.hasOwnProperty(t)&&this.checked[t]&&e.push(t);return e}},mounted:(a=Object(d.a)(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loadContact(),this.loadGroup();case 2:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),components:{ContactDialog:p.a}},p=(n("e5dc"),n("2877")),m=Object(p.a)(m,function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"page-contacts scrollable only-y",attrs:{id:"page-contacts"}},[o("div",{staticClass:"page-header"},[o("h1",[a._v(a._s(a.$t("contact.contact")))])]),o("el-row",{attrs:{gutter:10}},[o("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:8,xl:6}},[o("el-card",[o("h2",{staticClass:"mt-0"},[a._v(a._s(a.$t("group.group")))]),o("el-button",{staticClass:"add-group ml-10",on:{click:function(t){return a.openGroupDialog({},"add")}}},[o("span",{staticClass:"mdi mdi-plus"}),a._v(" "+a._s(a.$t("group.add"))+" ")]),o("el-input",{staticClass:"search-group",attrs:{"prefix-icon":"el-icon-search",placeholder:a.$t("group.search"),clearable:""},model:{value:a.searchGroup,callback:function(t){a.searchGroup=t},expression:"searchGroup"}}),o("div",{directives:[{name:"loading",rawName:"v-loading",value:a.groupLoader,expression:"groupLoader"}],staticClass:"group-list scrollable only-y"},a._l(a.groupFiltered,function(e){return o("div",{key:e.group_id,staticClass:"group-item flex contact",class:{active:e.group_id==a.groupId}},[o("div",{staticClass:"info box grow flex"},[o("div",{staticClass:"name box grow flex column p-10",on:{click:function(t){return a.openGroup(e)}}},[o("div",{staticClass:"fullname fs-18"},[o("span",{staticClass:"mdi mdi-folder-outline"}),a._v(" "+a._s(e.group_name)+" "),0!=e.group_id?[a._v("("+a._s(e.member)+")")]:a._e()],2)]),0!=e.group_id?o("div",{staticClass:"menu align-vertical p-10"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.$t("group.edit"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.openGroupDialog(e,"edit")}}},[o("span",{staticClass:"mdi mdi-pencil align-vertical-middle"})])]),a._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.$t("group.delete"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.openGroupDialog(e,"remove")}}},[o("span",{staticClass:"mdi mdi-delete align-vertical-middle"})])])],1):a._e()])])}),0)],1)],1),o("el-col",{staticClass:"mt-10 pl-0",attrs:{xs:24,sm:24,md:24,lg:16,xl:18}},[o("el-card",[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[o("h2",{staticClass:"mt-0"},[a._v(a._s(a.groupName))])]),o("el-col",{attrs:{xs:24,sm:24,md:16,lg:16,xl:16}},[o("el-input",{staticClass:"search-contact",attrs:{"prefix-icon":"el-icon-search",placeholder:a.$t("contact.search"),clearable:""},on:{clear:a.loadContact},nativeOn:{keypress:function(t){return a.doSearchContact.apply(null,arguments)},keyup:function(t){return!t.type.indexOf("key")&&a._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:a.doSearchContact.apply(null,arguments)}},model:{value:a.searchContact,callback:function(t){a.searchContact=t},expression:"searchContact"}})],1)],1)],1),o("el-row",{staticStyle:{float:"right"}},[o("el-col",{attrs:{xs:24,sm:24,md:0<a.checkedContact.length?8:24,lg:0<a.checkedContact.length?8:24,xl:0<a.checkedContact.length?8:24}},[o("el-button",{staticClass:"add-contact mr-10 mb-10",on:{click:function(t){return a.openDialog({},"add")}}},[o("span",{staticClass:"mdi mdi-plus"}),a._v(" "+a._s(a.$t("contact.add"))+" ")])],1),o("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[0<a.checkedContact.length?o("el-button",{staticClass:"add-contact mb-10",on:{click:function(t){return a.removeContactBulk()}}},[o("span",{staticClass:"mdi mdi-delete"}),a._v(" "+a._s(a.$t("contact.delete"))+" ")]):a._e()],1),o("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[0<a.checkedContact.length?o("el-button",{staticClass:"add-contact mb-10",on:{click:function(t){return a.openAddToGroup()}}},[o("span",{staticClass:"mdi mdi-folder-outline"}),a._v(" "+a._s(a.$t("contact.add_to_group"))+" ")]):a._e()],1)],1),o("div",{directives:[{name:"loading",rawName:"v-loading",value:a.contactLoader,expression:"contactLoader"}],staticClass:"contact-list scrollable only-y"},[o("div",{staticClass:"clearfix"},[o("el-pagination",{attrs:{"page-size":10,"current-page":a.currentPage,background:"",layout:"prev, pager, next",total:a.contactsTotal},on:{"current-change":a.nextContact}})],1),o("br"),a._l(a.list,function(e){return o("div",{key:e.phonebook_id,staticClass:"contact-item flex contact"},[o("el-checkbox",{key:!0,staticClass:"mt-23 ml-10",model:{value:a.checked[e.phonebook_id],callback:function(t){a.$set(a.checked,e.phonebook_id,t)},expression:"checked[c.phonebook_id]"}}),o("div",{staticClass:"avatar align-vertical ml-20"},[o("span",{staticClass:"align-vertical-middle card-shadow--small",style:"background-color:hsl("+360*Math.random()+","+(25+70*Math.random())+"%,"+(85+10*Math.random())+"%)"},[a._v(a._s((e.name||"").split(" ").map(function(t){return t[0]}).join("").slice(0,2)))])]),o("div",{staticClass:"info box grow flex"},[o("div",{staticClass:"name box grow flex column p-10"},[o("div",{staticClass:"fullname fs-18"},[a._v(a._s(e.title)+" "+a._s(e.name))]),o("div",{staticClass:"address fs-14 secondary-text"},[a._v(a._s(e.phone_number))])]),o("div",{staticClass:"menu align-vertical p-10 flex"},[0!=a.groupId?o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.$t("contact.remove_from_group"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.openDialog(e,"removeFromGroup")}}},[o("span",{staticClass:"mdi mdi-logout align-vertical-middle"})])]):a._e(),a._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.$t("contact.detail"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.openDialog(e,"detail")}}},[o("span",{staticClass:"mdi mdi-eye align-vertical-middle"})])]),a._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.$t("contact.edit"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.openDialog(e,"edit")}}},[o("span",{staticClass:"mdi mdi-pencil align-vertical-middle"})])]),a._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:a.$t("contact.delete"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(t){return t.preventDefault(),a.openDialog(e,"remove")}}},[o("span",{staticClass:"mdi mdi-delete align-vertical-middle"})])])],1)])],1)}),0==a.list.length?[a.contactLoader?a._e():o("p",{staticStyle:{color:"#909399"},attrs:{align:"center"}},[o("img",{attrs:{src:n("e0aa"),width:"100"}}),o("br"),a._v("Contact not found ")])]:a._e(),o("br"),o("div",{staticClass:"clearfix"},[o("el-pagination",{attrs:{"page-size":10,"current-page":a.currentPage,background:"",layout:"prev, pager, next",total:a.contactsTotal},on:{"current-change":a.nextContact}})],1)],2)],1)],1)],1),o("el-form",{ref:"contactDialog",attrs:{model:a.contactDialog.data,"status-icon":"",rules:a.rulesForm},nativeOn:{submit:function(t){return t.preventDefault(),a.doSubmitContact(a.contactDialog.type)}}},[o("el-dialog",{attrs:{title:a.contactDialogTitle,visible:a.contactDialog.visible},on:{"update:visible":function(t){return a.$set(a.contactDialog,"visible",t)}}},["add"!=a.contactDialog.type?[o("el-form-item",{attrs:{label:a.$t("contact.field.title"),"label-width":a.formLabelWidth}},[o("el-input",{attrs:{placeholder:a.$t("contact.field.title"),readonly:a.contactDialogReadonly},model:{value:a.contactDialog.data.title,callback:function(t){a.$set(a.contactDialog.data,"title",t)},expression:"contactDialog.data.title"}})],1),o("el-form-item",{attrs:{label:a.$t("contact.field.fullname"),"label-width":a.formLabelWidth}},[o("el-input",{attrs:{placeholder:a.$t("contact.field.fullname"),readonly:a.contactDialogReadonly,required:""},model:{value:a.contactDialog.data.name,callback:function(t){a.$set(a.contactDialog.data,"name",t)},expression:"contactDialog.data.name"}})],1),o("el-form-item",{attrs:{label:a.$t("contact.field.phone"),"label-width":a.formLabelWidth}},[o("el-input",{attrs:{placeholder:a.$t("contact.field.phone"),readonly:a.contactDialogReadonly,required:""},nativeOn:{keypress:function(t){return a.numberOnly.apply(null,arguments)},paste:function(t){return a.paste.apply(null,arguments)}},model:{value:a.contactDialog.data.phone_number,callback:function(t){a.$set(a.contactDialog.data,"phone_number",t)},expression:"contactDialog.data.phone_number"}})],1)]:a._e(),"add"==a.contactDialog.type?o("el-tabs",{attrs:{value:"single"},on:{"tab-click":a.handleTab}},[o("el-tab-pane",{attrs:{label:a.$t("contact.single"),name:"single"}},[o("el-form-item",{attrs:{label:a.$t("contact.field.title"),"label-width":a.formLabelWidth}},[o("el-input",{attrs:{placeholder:a.$t("contact.field.title"),readonly:a.contactDialogReadonly},model:{value:a.contactDialog.data.title,callback:function(t){a.$set(a.contactDialog.data,"title",t)},expression:"contactDialog.data.title"}})],1),o("el-form-item",{attrs:{label:a.$t("contact.field.fullname"),"label-width":a.formLabelWidth,prop:"name"}},[o("el-input",{attrs:{placeholder:a.$t("contact.field.fullname"),readonly:a.contactDialogReadonly},model:{value:a.contactDialog.data.name,callback:function(t){a.$set(a.contactDialog.data,"name",t)},expression:"contactDialog.data.name"}})],1),o("el-form-item",{attrs:{label:a.$t("contact.field.phone"),"label-width":a.formLabelWidth,prop:"phone_number"}},[o("el-input",{attrs:{placeholder:a.$t("contact.field.phone"),readonly:a.contactDialogReadonly},nativeOn:{keypress:function(t){return a.numberOnly.apply(null,arguments)},paste:function(t){return a.paste.apply(null,arguments)}},model:{value:a.contactDialog.data.phone_number,callback:function(t){a.$set(a.contactDialog.data,"phone_number",t)},expression:"contactDialog.data.phone_number"}})],1)],1),o("el-tab-pane",{attrs:{label:a.$t("contact.from_csv"),name:"csv"}},[o("p",[a._v(a._s(a.$t("contact.csv_template_description"))+":")]),o("ol",[o("li",[a._v(a._s(a.$t("contact.field.title")))]),o("li",[a._v(a._s(a.$t("contact.field.fullname")))]),o("li",[a._v(a._s(a.$t("contact.field.phone")))])]),o("p",[a._v(a._s(a.$t("contact.csv_has_header")))]),o("el-form-item",{staticClass:"mb-0",attrs:{label:a.$t("contact.file")}},[o("div",{staticClass:"el-input"},[o("input",{staticClass:"uploader el-input__inner",attrs:{type:"file",accept:".csv",id:"inputCsvFile"},on:{change:a.onUploadCsv}})])]),a.csvData.length?o("p",[a._v(a._s(a.$t("contact.sample_data"))+":")]):a._e(),a.csvData.length?o("el-table",{staticStyle:{width:"100%"},attrs:{data:a.csvData.slice(0,5)}},[o("el-table-column",{attrs:{prop:"title",label:a.$t("contact.field.title"),width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:a.$t("contact.field.fullname"),width:"180"}}),o("el-table-column",{attrs:{prop:"phoneNumber",label:a.$t("contact.field.phone")}})],1):a._e()],1)],1):a._e(),a.contactDialogReadonly?a._e():o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:a.cancelAddContact}},[a._v(a._s(a.$t("cancel")))]),o("el-button",{attrs:{type:"primary","native-type":"submit",loading:a.buttonContactDialogLoader,disabled:a.buttonContactDialogLoader||!a.formRequiredIsFilled&&"add"==a.contactDialog.type}},[a._v(a._s(a.$t("submit")))])],1)],2)],1),o("el-form",{attrs:{model:a.groupDialog.data},nativeOn:{submit:function(t){return t.preventDefault(),a.doSubmitGroup(a.groupDialog.type)}}},[o("el-dialog",{attrs:{title:a.groupDialogTitle,visible:a.groupDialog.visible},on:{"update:visible":function(t){return a.$set(a.groupDialog,"visible",t)}}},[o("el-form-item",{attrs:{label:a.$t("group.field.name"),"label-width":a.formLabelWidth}},[o("el-input",{attrs:{placeholder:a.$t("group.field.name"),readonly:a.groupDialogReadonly,required:""},model:{value:a.groupDialog.data.group_name,callback:function(t){a.$set(a.groupDialog.data,"group_name",t)},expression:"groupDialog.data.group_name"}})],1),a.groupDialogReadonly?a._e():o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){a.groupDialog.visible=!1}}},[a._v(a._s(a.$t("cancel")))]),o("el-button",{attrs:{type:"primary","native-type":"submit",loading:a.buttonGroupDialogLoader,disabled:a.buttonGroupDialogLoader}},[a._v(a._s(a.$t("submit")))])],1)],1)],1),o("el-form",{attrs:{model:a.addToGroupDialog.data},nativeOn:{submit:function(t){return t.preventDefault(),a.doAddContactToGroup()}}},[o("el-dialog",{attrs:{title:a.$t("contact.add_to_group"),visible:a.addToGroupDialog.visible},on:{"update:visible":function(t){return a.$set(a.addToGroupDialog,"visible",t)}}},[o("el-form-item",{attrs:{label:a.$t("group.field.name"),"label-width":a.formLabelWidth}},[o("el-select",{ref:"selectGroup",staticStyle:{width:"100%",cursor:"pointer"},attrs:{multiple:"","default-first-option":"",placeholder:a.$t("group.choose")},on:{change:function(t){return a.$refs.selectGroup.blur()}},model:{value:a.selectedGroupId,callback:function(t){a.selectedGroupId=t},expression:"selectedGroupId"}},a._l(a.groups,function(t){return 0!=t.group_id?o("el-option",{key:t.group_id,attrs:{label:t.group_name,value:t.group_id}}):a._e()}),1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){a.addToGroupDialog.visible=!1}}},[a._v(a._s(a.$t("cancel")))]),o("el-button",{attrs:{type:"primary","native-type":"submit",loading:a.buttonAddToGroupDialogLoader,disabled:a.buttonAddToGroupDialogLoader}},[a._v(a._s(a.$t("submit")))])],1)],1)],1)],1)},[],!1,null,"6b63c5ea",null);e.default=m.exports},bce9:function(t,e,a){"use strict";var o={name:"ContactDialog",props:["userdata","dialogvisible","type","color"],computed:{readonly:function(){return"detail"==this.type}}},a=(a("935a"),a("2877")),o=Object(a.a)(o,function(){var e=this,t=e.$createElement,t=e._self._c||t;return t("el-dialog",{attrs:{"show-close":!0,"custom-class":"user-dialog",visible:e.dialogvisible},on:{close:function(t){return e.$emit("update:dialogvisible",!1)}}},[t("div",{staticClass:"avatar-box"},[t("span",{staticClass:"align-vertical-middle card-shadow--small",style:"background-color:hsl("+360*Math.random()+","+(25+70*Math.random())+"%,"+(85+10*Math.random())+"%)"},[e._v(" "+e._s((e.userdata.name||"").split(" ").map(function(t){return t[0]}).join("").slice(0,2))+" ")])]),t("div",{staticClass:"form-box"},[t("el-input",{attrs:{placeholder:"Title",readonly:e.readonly},model:{value:e.userdata.title,callback:function(t){e.$set(e.userdata,"title",t)},expression:"userdata.title"}}),t("el-input",{attrs:{placeholder:"Fullname",readonly:e.readonly},model:{value:e.userdata.name,callback:function(t){e.$set(e.userdata,"name",t)},expression:"userdata.name"}}),t("el-input",{attrs:{placeholder:"Phone",readonly:e.readonly},model:{value:e.userdata.phone_number,callback:function(t){e.$set(e.userdata,"phone_number",t)},expression:"userdata.phone_number"}}),t("el-input",{attrs:{placeholder:"Address",readonly:e.readonly},model:{value:e.userdata.address,callback:function(t){e.$set(e.userdata,"address",t)},expression:"userdata.address"}})],1)])},[],!1,null,null,null);e.a=o.exports},c52f:function(t,e,a){},e0aa:function(t,e,a){t.exports=a.p+"img/no_contact@3x.59b4a7db.png"},e5dc:function(t,e,a){"use strict";a("7ac0")}}]);