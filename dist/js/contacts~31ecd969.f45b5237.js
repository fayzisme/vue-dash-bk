(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["contacts~31ecd969"],{3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var o=a("cb7c"),n=a("0bfb"),r=a("9e1e"),i="toString",c=/./[i],l=function(t){a("2aba")(RegExp.prototype,i,t,!0)};a("79e5")((function(){return"/a/b"!=c.call({source:"a",flags:"b"})}))?l((function(){var t=o(this);return"/".concat(t.source,"/","flags"in t?t.flags:!r&&t instanceof RegExp?n.call(t):void 0)})):c.name!=i&&l((function(){return c.call(this)}))},"935a":function(t,e,a){"use strict";a("c52f")},"9bdf":function(t,e,a){"use strict";a.r(e);var o=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"page-contacts scrollable only-y",attrs:{id:"page-contacts"}},[o("div",{staticClass:"page-header"},[o("h1",[t._v(t._s(t.$t("contact.contact")))])]),o("el-row",{attrs:{gutter:10}},[o("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:8,xl:6}},[o("el-card",[o("h2",{staticClass:"mt-0"},[t._v(t._s(t.$t("group.group")))]),o("el-button",{staticClass:"add-group ml-10",on:{click:function(e){return t.openGroupDialog({},"add")}}},[o("span",{staticClass:"mdi mdi-plus"}),t._v(" "+t._s(t.$t("group.add"))+" ")]),o("el-input",{staticClass:"search-group",attrs:{"prefix-icon":"el-icon-search",placeholder:t.$t("group.search"),clearable:""},model:{value:t.searchGroup,callback:function(e){t.searchGroup=e},expression:"searchGroup"}}),o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.groupLoader,expression:"groupLoader"}],staticClass:"group-list scrollable only-y"},t._l(t.groupFiltered,(function(e){return o("div",{key:e.group_id,staticClass:"group-item flex contact",class:{active:e.group_id==t.groupId}},[o("div",{staticClass:"info box grow flex"},[o("div",{staticClass:"name box grow flex column p-10",on:{click:function(a){return t.openGroup(e)}}},[o("div",{staticClass:"fullname fs-18"},[o("span",{staticClass:"mdi mdi-folder-outline"}),t._v(" "+t._s(e.group_name)+" "),0!=e.group_id?[t._v("("+t._s(e.member)+")")]:t._e()],2)]),0!=e.group_id?o("div",{staticClass:"menu align-vertical p-10"},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("group.edit"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openGroupDialog(e,"edit")}}},[o("span",{staticClass:"mdi mdi-pencil align-vertical-middle"})])]),t._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("group.delete"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openGroupDialog(e,"remove")}}},[o("span",{staticClass:"mdi mdi-delete align-vertical-middle"})])])],1):t._e()])])})),0)],1)],1),o("el-col",{staticClass:"mt-10 pl-0",attrs:{xs:24,sm:24,md:24,lg:16,xl:18}},[o("el-card",[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[o("h2",{staticClass:"mt-0"},[t._v(t._s(t.groupName))])]),o("el-col",{attrs:{xs:24,sm:24,md:16,lg:16,xl:16}},[o("el-input",{staticClass:"search-contact",attrs:{"prefix-icon":"el-icon-search",placeholder:t.$t("contact.search"),clearable:""},on:{clear:t.loadContact},nativeOn:{keypress:function(e){return t.doSearchContact.apply(null,arguments)},keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?null:t.doSearchContact.apply(null,arguments)}},model:{value:t.searchContact,callback:function(e){t.searchContact=e},expression:"searchContact"}})],1)],1)],1),o("el-row",{staticStyle:{float:"right"}},[o("el-col",{attrs:{xs:24,sm:24,md:t.checkedContact.length>0?8:24,lg:t.checkedContact.length>0?8:24,xl:t.checkedContact.length>0?8:24}},[o("el-button",{staticClass:"add-contact mr-10 mb-10",on:{click:function(e){return t.openDialog({},"add")}}},[o("span",{staticClass:"mdi mdi-plus"}),t._v(" "+t._s(t.$t("contact.add"))+" ")])],1),o("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[t.checkedContact.length>0?o("el-button",{staticClass:"add-contact mb-10",on:{click:function(e){return t.removeContactBulk()}}},[o("span",{staticClass:"mdi mdi-delete"}),t._v(" "+t._s(t.$t("contact.delete"))+" ")]):t._e()],1),o("el-col",{attrs:{xs:24,sm:24,md:8,lg:8,xl:8}},[t.checkedContact.length>0?o("el-button",{staticClass:"add-contact mb-10",on:{click:function(e){return t.openAddToGroup()}}},[o("span",{staticClass:"mdi mdi-folder-outline"}),t._v(" "+t._s(t.$t("contact.add_to_group"))+" ")]):t._e()],1)],1),o("div",{directives:[{name:"loading",rawName:"v-loading",value:t.contactLoader,expression:"contactLoader"}],staticClass:"contact-list scrollable only-y"},[o("div",{staticClass:"clearfix"},[o("el-pagination",{attrs:{"page-size":10,"current-page":t.currentPage,background:"",layout:"prev, pager, next",total:t.contactsTotal},on:{"current-change":t.nextContact}})],1),o("br"),t._l(t.list,(function(e){return o("div",{key:e.phonebook_id,staticClass:"contact-item flex contact"},[o("el-checkbox",{key:!0,staticClass:"mt-23 ml-10",model:{value:t.checked[e.phonebook_id],callback:function(a){t.$set(t.checked,e.phonebook_id,a)},expression:"checked[c.phonebook_id]"}}),o("div",{staticClass:"avatar align-vertical ml-20"},[o("span",{staticClass:"align-vertical-middle card-shadow--small",style:"background-color:hsl("+360*Math.random()+","+(25+70*Math.random())+"%,"+(85+10*Math.random())+"%)"},[t._v(t._s((e.name||"").split(" ").map((function(t){return t[0]})).join("").slice(0,2)))])]),o("div",{staticClass:"info box grow flex"},[o("div",{staticClass:"name box grow flex column p-10"},[o("div",{staticClass:"fullname fs-18"},[t._v(t._s(e.title)+" "+t._s(e.name))]),o("div",{staticClass:"address fs-14 secondary-text"},[t._v(t._s(e.phone_number))])]),o("div",{staticClass:"menu align-vertical p-10 flex"},[0!=t.groupId?o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("contact.remove_from_group"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openDialog(e,"removeFromGroup")}}},[o("span",{staticClass:"mdi mdi-logout align-vertical-middle"})])]):t._e(),t._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("contact.detail"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openDialog(e,"detail")}}},[o("span",{staticClass:"mdi mdi-eye align-vertical-middle"})])]),t._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("contact.edit"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openDialog(e,"edit")}}},[o("span",{staticClass:"mdi mdi-pencil align-vertical-middle"})])]),t._v("  "),o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:t.$t("contact.delete"),placement:"top"}},[o("a",{attrs:{href:""},on:{click:function(a){return a.preventDefault(),t.openDialog(e,"remove")}}},[o("span",{staticClass:"mdi mdi-delete align-vertical-middle"})])])],1)])],1)})),0==t.list.length?[t.contactLoader?t._e():o("p",{staticStyle:{color:"#909399"},attrs:{align:"center"}},[o("img",{attrs:{src:a("e0aa"),width:"100"}}),o("br"),t._v("Contact not found ")])]:t._e(),o("br"),o("div",{staticClass:"clearfix"},[o("el-pagination",{attrs:{"page-size":10,"current-page":t.currentPage,background:"",layout:"prev, pager, next",total:t.contactsTotal},on:{"current-change":t.nextContact}})],1)],2)],1)],1)],1),o("el-form",{ref:"contactDialog",attrs:{model:t.contactDialog.data,"status-icon":"",rules:t.rulesForm},nativeOn:{submit:function(e){return e.preventDefault(),t.doSubmitContact(t.contactDialog.type)}}},[o("el-dialog",{attrs:{title:t.contactDialogTitle,visible:t.contactDialog.visible},on:{"update:visible":function(e){return t.$set(t.contactDialog,"visible",e)}}},["add"!=t.contactDialog.type?[o("el-form-item",{attrs:{label:t.$t("contact.field.title"),"label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:t.$t("contact.field.title"),readonly:t.contactDialogReadonly},model:{value:t.contactDialog.data.title,callback:function(e){t.$set(t.contactDialog.data,"title",e)},expression:"contactDialog.data.title"}})],1),o("el-form-item",{attrs:{label:t.$t("contact.field.fullname"),"label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:t.$t("contact.field.fullname"),readonly:t.contactDialogReadonly,required:""},model:{value:t.contactDialog.data.name,callback:function(e){t.$set(t.contactDialog.data,"name",e)},expression:"contactDialog.data.name"}})],1),o("el-form-item",{attrs:{label:t.$t("contact.field.phone"),"label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:t.$t("contact.field.phone"),readonly:t.contactDialogReadonly,required:""},nativeOn:{keypress:function(e){return t.numberOnly.apply(null,arguments)},paste:function(e){return t.paste.apply(null,arguments)}},model:{value:t.contactDialog.data.phone_number,callback:function(e){t.$set(t.contactDialog.data,"phone_number",e)},expression:"contactDialog.data.phone_number"}})],1)]:t._e(),"add"==t.contactDialog.type?o("el-tabs",{attrs:{value:"single"},on:{"tab-click":t.handleTab}},[o("el-tab-pane",{attrs:{label:t.$t("contact.single"),name:"single"}},[o("el-form-item",{attrs:{label:t.$t("contact.field.title"),"label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:t.$t("contact.field.title"),readonly:t.contactDialogReadonly},model:{value:t.contactDialog.data.title,callback:function(e){t.$set(t.contactDialog.data,"title",e)},expression:"contactDialog.data.title"}})],1),o("el-form-item",{attrs:{label:t.$t("contact.field.fullname"),"label-width":t.formLabelWidth,prop:"name"}},[o("el-input",{attrs:{placeholder:t.$t("contact.field.fullname"),readonly:t.contactDialogReadonly},model:{value:t.contactDialog.data.name,callback:function(e){t.$set(t.contactDialog.data,"name",e)},expression:"contactDialog.data.name"}})],1),o("el-form-item",{attrs:{label:t.$t("contact.field.phone"),"label-width":t.formLabelWidth,prop:"phone_number"}},[o("el-input",{attrs:{placeholder:t.$t("contact.field.phone"),readonly:t.contactDialogReadonly},nativeOn:{keypress:function(e){return t.numberOnly.apply(null,arguments)},paste:function(e){return t.paste.apply(null,arguments)}},model:{value:t.contactDialog.data.phone_number,callback:function(e){t.$set(t.contactDialog.data,"phone_number",e)},expression:"contactDialog.data.phone_number"}})],1)],1),o("el-tab-pane",{attrs:{label:t.$t("contact.from_csv"),name:"csv"}},[o("p",[t._v(t._s(t.$t("contact.csv_template_description"))+":")]),o("ol",[o("li",[t._v(t._s(t.$t("contact.field.title")))]),o("li",[t._v(t._s(t.$t("contact.field.fullname")))]),o("li",[t._v(t._s(t.$t("contact.field.phone")))])]),o("p",[t._v(t._s(t.$t("contact.csv_has_header")))]),o("el-form-item",{staticClass:"mb-0",attrs:{label:t.$t("contact.file")}},[o("div",{staticClass:"el-input"},[o("input",{staticClass:"uploader el-input__inner",attrs:{type:"file",accept:".csv",id:"inputCsvFile"},on:{change:t.onUploadCsv}})])]),t.csvData.length?o("p",[t._v(t._s(t.$t("contact.sample_data"))+":")]):t._e(),t.csvData.length?o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.csvData.slice(0,5)}},[o("el-table-column",{attrs:{prop:"title",label:t.$t("contact.field.title"),width:"180"}}),o("el-table-column",{attrs:{prop:"name",label:t.$t("contact.field.fullname"),width:"180"}}),o("el-table-column",{attrs:{prop:"phoneNumber",label:t.$t("contact.field.phone")}})],1):t._e()],1)],1):t._e(),t.contactDialogReadonly?t._e():o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:t.cancelAddContact}},[t._v(t._s(t.$t("cancel")))]),o("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.buttonContactDialogLoader,disabled:t.buttonContactDialogLoader||!t.formRequiredIsFilled&&"add"==t.contactDialog.type}},[t._v(t._s(t.$t("submit")))])],1)],2)],1),o("el-form",{attrs:{model:t.groupDialog.data},nativeOn:{submit:function(e){return e.preventDefault(),t.doSubmitGroup(t.groupDialog.type)}}},[o("el-dialog",{attrs:{title:t.groupDialogTitle,visible:t.groupDialog.visible},on:{"update:visible":function(e){return t.$set(t.groupDialog,"visible",e)}}},[o("el-form-item",{attrs:{label:t.$t("group.field.name"),"label-width":t.formLabelWidth}},[o("el-input",{attrs:{placeholder:t.$t("group.field.name"),readonly:t.groupDialogReadonly,required:""},model:{value:t.groupDialog.data.group_name,callback:function(e){t.$set(t.groupDialog.data,"group_name",e)},expression:"groupDialog.data.group_name"}})],1),t.groupDialogReadonly?t._e():o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.groupDialog.visible=!1}}},[t._v(t._s(t.$t("cancel")))]),o("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.buttonGroupDialogLoader,disabled:t.buttonGroupDialogLoader}},[t._v(t._s(t.$t("submit")))])],1)],1)],1),o("el-form",{attrs:{model:t.addToGroupDialog.data},nativeOn:{submit:function(e){return e.preventDefault(),t.doAddContactToGroup()}}},[o("el-dialog",{attrs:{title:t.$t("contact.add_to_group"),visible:t.addToGroupDialog.visible},on:{"update:visible":function(e){return t.$set(t.addToGroupDialog,"visible",e)}}},[o("el-form-item",{attrs:{label:t.$t("group.field.name"),"label-width":t.formLabelWidth}},[o("el-select",{ref:"selectGroup",staticStyle:{width:"100%",cursor:"pointer"},attrs:{multiple:"","default-first-option":"",placeholder:t.$t("group.choose")},on:{change:function(e){return t.$refs.selectGroup.blur()}},model:{value:t.selectedGroupId,callback:function(e){t.selectedGroupId=e},expression:"selectedGroupId"}},t._l(t.groups,(function(e){return 0!=e.group_id?o("el-option",{key:e.group_id,attrs:{label:e.group_name,value:e.group_id}}):t._e()})),1)],1),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.addToGroupDialog.visible=!1}}},[t._v(t._s(t.$t("cancel")))]),o("el-button",{attrs:{type:"primary","native-type":"submit",loading:t.buttonAddToGroupDialogLoader,disabled:t.buttonAddToGroupDialogLoader}},[t._v(t._s(t.$t("submit")))])],1)],1)],1)],1)},n=[],r=(a("6b54"),a("ac6a"),a("7f7f"),a("96cf"),a("1da1")),i=a("bce9"),c=a("271f"),l=(a("db49"),a("c0d6")),s=a("2ef0"),u=a.n(s),d={data:function(){var t=this,e=function(e,a,o){if("single"==t.addType){if(!a)return o(new Error(t.$t("contact.warning."+e.field)));o()}};return{selectedGroupId:[],checked:{},groupName:this.$t("contact.all"),groupId:0,list:[],groups:[{group_id:0,group_name:this.$t("contact.all")}],menu:[],contactLoader:!0,currentPage:1,currentPageContact:1,currentPageGroupContact:1,contactsTotal:0,searchContact:"",buttonContactDialogLoader:!1,contactDialog:{visible:!1,data:{title:"",name:"",phone_number:""},type:"detail"},rulesForm:{name:[{validator:e,trigger:"blur"}],phone_number:[{validator:e,trigger:"blur"}]},groupLoader:!0,searchGroup:"",buttonGroupDialogLoader:!1,groupDialog:{visible:!1,data:{group_name:""},type:"detail"},buttonAddToGroupDialogLoader:!1,addToGroupDialog:{visible:!1,data:{},type:"detail"},formLabelWidth:"120px",logData:"",addType:"single",csvData:[],btnAddtogroup:!1,timeout:null}},methods:{removeContactBulk:function(){var t=this;this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return Object(c["a"])({method:"delete",url:"phonebook/bulk",data:t.checkedContact}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}).then((function(e){200==e.data.ec?(t.loadGroup(),t.$swal({type:"success",title:t.$t("success"),text:""}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(o in t.checked)t.checked.hasOwnProperty(o)&&(t.checked[o]=!1);t.list=[],t.contactLoader=!0,t.loadContact();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):400==e.data.ec?t.errorMessage=e.data.message:t.$swal(t.$t("error"),t.$t("error_text"),"error")}))},resetContactForm:function(){this.contactDialog.data.title="",this.contactDialog.data.name="",this.contactDialog.data.phone_number="",this.contactDialog.data.param_1="",this.contactDialog.data.param_2="","add"==this.contactDialog.type&&(document.getElementById("inputCsvFile").value=""),this.csvData=[]},onUploadCsv:function(t){var e=this,a=t.target;if(a.files&&a.files[0]){var o=function(t){-1==a.files[0].name.indexOf(".csv")?(e.contactDialog.visible=!1,e.resetContactForm(),e.$swal(e.$t("error"),"File type not allowed","error")):e.csvData=e.csvJSON(t)},n=function(t,a){e.$papa.parse(t,{download:!0,dynamicTyping:!0,complete:function(t){a(t.data)}})};n(a.files[0],o)}else this.resetContactForm()},csvJSON:function(t){var e=t,a=[];e[0];return e.shift(),e.forEach((function(t){var e=t;e[1]&&e[2]&&a.push({title:e[0],name:e[1],phoneNumber:e[2],param_1:e[3]||"",param_2:e[4]||"",customerId:l["a"].getters.customerID})})),a},cancelAddContact:function(){this.contactDialog.visible=!1,this.resetContactForm()},handleTab:function(t,e){this.addType=t.name,this.resetContactForm()},numberOnly:function(t){window.event?t.keyCode:t.which;var e=u.a.indexOf([8,9,27,13,190,43],t.keyCode);-1!==e||86===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||65===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||82===t.keyCode&&(!0===t.ctrlKey||!0===t.metaKey)||t.keyCode>42&&t.keyCode<=49&&-1==u.a.indexOf([44,45,46,47],t.keyCode)||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode>96||t.keyCode<200)&&t.preventDefault()},paste:function(t){t.preventDefault();for(var e,a=window.event.clipboardData.getData("Text"),o="+0123456789",n="",r=0;r<a.length;r++)e=a.charAt(r),-1!=o.indexOf(e)&&(n+=e);this.contactDialog.data.phone_number=n},openDialog:function(t,e){this.contactDialog.data.phonebook_id=t.phonebook_id,this.contactDialog.data.name=t.name,this.contactDialog.data.title=t.title,this.contactDialog.data.param_1=t.param_1,this.contactDialog.data.param_2=t.param_2,this.contactDialog.data.phone_number=t.phone_number,"remove"==e?this.doRemoveContact():"removeFromGroup"==e?this.doRemoveContactFromGroup():(this.contactDialog.visible=!0,this.contactDialog.type=e)},doSubmitContact:function(t){this.buttonContactDialogLoader=!0,"edit"==t?this.doEditContact():"add"==t&&this.doAddContact()},doAddContact:function(){var t=this;if("single"==this.addType)this.$refs["contactDialog"].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:0!=t.groupId&&(t.contactDialog.data.groupId=t.groupId),a?(t.contactDialog.data.customer_id=l["a"].getters.customerID,Object(c["a"])({method:"post",url:"phonebook",data:t.contactDialog.data}).then((function(e){t.buttonContactDialogLoader=!1,t.contactDialog.visible=!1,200==e.data.ec?t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){t.list=[],t.contactLoader=!0,t.loadContact(),0!=t.groupId&&t.loadGroup(),t.resetContactForm()})):400==e.data.ec?t.$swal({title:t.$t("error"),text:e.data.message,type:"error"}):t.$swal(t.$t("error"),t.$t("error_text"),"error")})).catch((function(e){t.buttonContactDialogLoader=!1,t.contactDialog.visible=!1,t.$swal(t.$t("error"),t.$t("error_text"),"error")}))):t.buttonContactDialogLoader=!1;case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());else if("csv"==this.addType){this.$refs["contactDialog"].resetFields((function(t){}));var e={phonebook:this.csvData};0!=this.groupId&&(e.groupId=this.groupId),Object(c["a"])({method:"post",url:"phonebook/bulk",timeout:3e5,data:e}).then((function(e){t.buttonContactDialogLoader=!1,t.contactDialog.visible=!1,200==e.data.ec?t.$swal({title:t.$t("success"),text:"Please wait while we save your contact.",type:"success"}).then((function(e){t.list=[],t.contactLoader=!0,t.loadContact(),t.resetContactForm(),0!=t.groupId&&t.loadGroup()})):400==e.data.ec?t.$swal({title:t.$t("error"),text:e.data.message,type:"error"}):t.$swal(t.$t("error"),t.$t("error_text"),"error")})).catch((function(e){t.buttonContactDialogLoader=!1,t.contactDialog.visible=!1,t.$swal(t.$t("error"),t.$t("error_text"),"error")}))}},doEditContact:function(){var t=this;Object(c["a"])({method:"patch",url:"phonebook/"+this.contactDialog.data.phonebook_id,data:this.contactDialog.data}).then((function(e){if(t.buttonContactDialogLoader=!1,200==e.data.ec)t.contactDialog.visible=!1,t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){t.list=[],t.contactLoader=!0,t.loadContact()}));else if(400==e.data.ec){var a=t.$t("contact.".concat(e.data.message));"duplicate_number"==e.data.message&&(a+="(Duplicated with: ".concat(e.data.data.name,")")),t.$message.error({showClose:!1,timeout:5e3,message:a})}else t.$message.error({showClose:!1,message:e.data.message})})).catch((function(e){t.buttonContactDialogLoader=!1,t.contactDialog.visible=!1,t.$message.error({showClose:!1,message:t.$t("login.invalid_parameter")})}))},doRemoveContact:function(){var t=this;this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return Object(c["a"])({method:"delete",url:"phonebook/"+t.contactDialog.data.phonebook_id}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.abrupt("return",e);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}}).then((function(e){200==e.data.ec?(t.loadGroup(),t.$swal({type:"success",title:t.$t("success"),text:""}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.list=[],t.contactLoader=!0,t.loadContact();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):400==e.data.ec?t.errorMessage=e.data.message:t.$swal(t.$t("error"),t.$t("error_text"),"error")}))},openAddToGroup:function(){this.selectedGroupId=[],this.addToGroupDialog.visible=!0},doAddContactToGroup:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a,o,n,i,s,u,d=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.buttonAddToGroupDialogLoader=!0,e=l["a"].getters.customerID,a=1,o="",n=[],t.t0=regeneratorRuntime.keys(this.selectedGroupId);case 6:if((t.t1=t.t0()).done){t.next=14;break}return i=t.t1.value,s=this.selectedGroupId[i],u={customer_id:e,phonebook_id:this.checkedContact,group_id:s},t.next=12,Object(c["a"])({method:"post",url:"group/add_to",data:u}).then((function(t){200!=t.data.ec&&(a=0,o=400==t.data.ec?d.$t("contact."+t.data.message):d.$t("error_text"),n.push(d.checkedContact))}));case 12:t.next=6;break;case 14:this.addToGroupDialog.visible=!1,1==a?this.$swal({type:"success",title:this.$t("success"),text:""}).then(function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(a in d.checked)d.checked.hasOwnProperty(a)&&(d.checked[a]=!1);return d.selectedGroupId=[],d.contactLoader=!0,t.next=5,d.loadContact();case 5:return t.next=7,d.loadGroup();case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){d.buttonAddToGroupDialogLoader=!0})):this.$swal(this.$t("error"),o,"error"),this.buttonAddToGroupDialogLoader=!1;case 17:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),doRemoveContactFromGroup:function(){var t=this,e=l["a"].getters.customerID,a={customer_id:e,phonebook_id:this.contactDialog.data.phonebook_id,group_id:this.groupId};this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return Object(c["a"])({method:"post",url:"group/delete_from",data:a}).then((function(t){return t}))}}).then((function(e){200==e.data.ec?t.$swal({type:"success",title:t.$t("success"),text:""}).then((function(e){t.list=[],t.checked=[],t.contactLoader=!0,t.loadContact(),0!=t.groupId&&t.loadGroup()})):400==e.data.ec?t.errorMessage=e.data.message:t.$swal(t.$t("error"),t.$t("error_text"),"error")}))},openGroupDialog:function(t,e){this.groupDialog.data.group_id=t.group_id,this.groupDialog.data.group_name=t.group_name,"remove"==e?this.doRemoveGroup():(this.groupDialog.visible=!0,this.groupDialog.type=e)},doSubmitGroup:function(t){this.buttonGroupDialogLoader=!0,"edit"==t?this.doEditGroup():"add"==t&&this.doAddGroup()},doAddGroup:function(){var t=this;this.groupDialog.data.customer_id=l["a"].getters.customerID,Object(c["a"])({method:"post",url:"group",data:this.groupDialog.data}).then((function(e){t.buttonGroupDialogLoader=!1,t.groupDialog.visible=!1,200==e.data.ec?t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){setTimeout((function(){t.groupLoader=!0,t.loadGroup()}),500)})):400==e.data.ec?t.$swal({title:t.$t("error"),text:e.data.message,type:"error"}):t.$swal(t.$t("error"),t.$t("error_text"),"error")})).catch((function(e){t.buttonGroupDialogLoader=!1,t.groupDialog.visible=!1,t.$swal(t.$t("error"),t.$t("error_text"),"error")}))},doEditGroup:function(){var t=this;Object(c["a"])({method:"patch",url:"group/"+this.groupDialog.data.group_id,data:this.groupDialog.data}).then((function(e){t.buttonGroupDialogLoader=!1,t.groupDialog.visible=!1,200==e.data.ec?t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){setTimeout((function(){t.groupLoader=!0,t.loadGroup()}),500)})):400==e.data.ec?t.$swal({title:t.$t("error"),text:e.data.message,type:"error"}):t.$swal(t.$t("error"),t.$t("error_text"),"error")})).catch((function(e){t.buttonGroupDialogLoader=!1,t.groupDialog.visible=!1,t.$swal(t.$t("error"),t.$t("error_text"),"error")}))},doRemoveGroup:function(){var t=this;this.$swal({title:this.$t("delete_confirmation"),text:this.$t("delete_confirmation_text"),type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button")}).then((function(e){Object(c["a"])({method:"delete",url:"group/"+t.groupDialog.data.group_id}).then((function(e){200==e.data.ec?t.$swal({type:"success",title:t.$t("success"),text:""}).then((function(e){setTimeout((function(){t.groupLoader=!0,t.loadGroup()}),500)})):400==e.data.ec?t.errorMessage=e.data.message:t.$swal(t.$t("error"),t.$t("error_text"),"error")})).catch((function(e){t.buttonGroupDialogLoader=!1,t.$swal(t.$t("error"),t.$t("error_text"),"error")}))}))},openGroup:function(t){this.groupName=t.group_name,this.groupId=t.group_id,this.list=[],this.contactLoader=!0,this.loadContact()},loadContact:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0==this.groupId){t.next=5;break}return t.next=3,this.loadContactByGroup();case 3:t.next=7;break;case 5:return t.next=7,this.loadContactAll(this.currentPage,e);case 7:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),loadContactByGroup:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this,a=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a.length>0&&void 0!==a[0]?a[0]:1,this.contactLoader=!0,this.currentPage=this.currentPageGroupContact,this.currentPageContact=1,t.next=6,Object(c["a"])({method:"get",url:"group/"+this.groupId,params:{page:this.currentPage}}).then((function(t){e.list=t.data.data.contact,e.contactLoader=!1,e.contactsTotal=t.data.data.group.total})).catch((function(t){console.error("Failed : "+t),e.contactLoader=!1}));case 6:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),nextContact:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:""!=this.searchContact?(this.currentPageContact=e,this.currentPage=this.currentPageContact,this.doGetSearchContact(this.searchContact)):0!=this.groupId?(this.currentPageGroupContact=e,this.currentPage=this.currentPageGroupContact,this.loadContactByGroup(e)):(this.currentPageContact=e,this.currentPage=this.currentPageContact,this.loadContactAll(e));case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),doSearchContact:function(t){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchContact.length>=3?(e.currentPageContact=e.currentPageGroupContact=e.currentPage=1,e.doGetSearchContact(e.searchContact)):e.loadContactAll()}),1e3)},doGetSearchContact:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a=this,o=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",o.length>1&&void 0!==o[1]?o[1]:1,this.contactLoader=!0,t.next=5,Object(c["a"])({method:"get",url:"phonebook/search",params:{page:this.currentPage,query:e,group_id:0!=this.groupId?this.groupId:""}}).then((function(t){a.list=t.data.data.contact,a.contactsTotal=t.data.data.rows,a.contactLoader=!1})).catch((function(t){console.error("Failed : "+t),a.contactLoader=!1}));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),loadContactAll:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e,a){var o=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.contactLoader=!0,this.currentPage=this.currentPageContact,this.currentPageGroupContact=1,t.next=5,Object(c["a"])({method:"get",url:"phonebook",params:{page:this.currentPage,view:1==a||null}}).then((function(t){o.list=t.data.data.contact,o.contactsTotal=t.data.data.rows,o.contactLoader=!1})).catch((function(t){console.error("Failed : "+t),o.contactLoader=!1}));case 5:case"end":return t.stop()}}),t,this)})));function e(e,a){return t.apply(this,arguments)}return e}(),loadGroup:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])({method:"get",url:"group/all"}).then((function(t){e.groups=[],e.groups=[{group_id:0,group_name:e.$t("contact.all")}],t.data.data.forEach((function(t){e.groups.push(t)})),e.groupLoader=!1})).catch((function(t){console.error("Failed : "+t),e.groupLoader=!1}));case 2:case"end":return t.stop()}}),t)})));function e(){return t.apply(this,arguments)}return e}()},computed:{formRequiredIsFilled:function(){if("csv"==this.addType){if(this.csvData.length)return!0}else if("single"==this.addType)return!0;return!1},groupFiltered:function(){var t=this;return this.groups.filter((function(e){var a=e.group_name;return-1!==a.toString().toLowerCase().indexOf(t.searchGroup.toString().toLowerCase())}))},contactDialogReadonly:function(){return"detail"==this.contactDialog.type},contactDialogTitle:function(){return this.$t("contact."+this.contactDialog.type)},groupDialogReadonly:function(){return"detail"==this.groupDialog.type},groupDialogTitle:function(){return this.$t("group."+this.groupDialog.type)},checkedContact:function(){var t=[];for(var e in this.checked)if(this.checked.hasOwnProperty(e)){var a=this.checked[e];a&&t.push(e)}return t}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.loadContact(!0),this.loadGroup();case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),components:{ContactDialog:i["a"]}},p=d,g=(a("c073"),a("2877")),h=Object(g["a"])(p,o,n,!1,null,"aff11ad8",null);e["default"]=h.exports},"9c61":function(t,e,a){},bce9:function(t,e,a){"use strict";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{"show-close":!0,"custom-class":"user-dialog",visible:t.dialogvisible},on:{close:function(e){return t.$emit("update:dialogvisible",!1)}}},[a("div",{staticClass:"avatar-box"},[a("span",{staticClass:"align-vertical-middle card-shadow--small",style:"background-color:hsl("+360*Math.random()+","+(25+70*Math.random())+"%,"+(85+10*Math.random())+"%)"},[t._v(" "+t._s((t.userdata.name||"").split(" ").map((function(t){return t[0]})).join("").slice(0,2))+" ")])]),a("div",{staticClass:"form-box"},[a("el-input",{attrs:{placeholder:"Title",readonly:t.readonly},model:{value:t.userdata.title,callback:function(e){t.$set(t.userdata,"title",e)},expression:"userdata.title"}}),a("el-input",{attrs:{placeholder:"Fullname",readonly:t.readonly},model:{value:t.userdata.name,callback:function(e){t.$set(t.userdata,"name",e)},expression:"userdata.name"}}),a("el-input",{attrs:{placeholder:"Phone",readonly:t.readonly},model:{value:t.userdata.phone_number,callback:function(e){t.$set(t.userdata,"phone_number",e)},expression:"userdata.phone_number"}}),a("el-input",{attrs:{placeholder:"Address",readonly:t.readonly},model:{value:t.userdata.address,callback:function(e){t.$set(t.userdata,"address",e)},expression:"userdata.address"}})],1)])},n=[],r={name:"ContactDialog",props:["userdata","dialogvisible","type","color"],computed:{readonly:function(){return"detail"==this.type}}},i=r,c=(a("935a"),a("2877")),l=Object(c["a"])(i,o,n,!1,null,null,null);e["a"]=l.exports},c073:function(t,e,a){"use strict";a("9c61")},c52f:function(t,e,a){},e0aa:function(t,e,a){t.exports=a.p+"img/no_contact@3x.59b4a7db.png"}}]);