(window.webpackJsonp=window.webpackJsonp||[]).push([["helpdesk-report"],{"105e":function(e,t,a){"use strict";a.r(t);var r,n,i,o,s=(a("96cf"),a("3b8d")),l=a("bd86"),c=(a("bce9"),a("271f")),u=(a("8055"),a("db49")),m=(a("c0d6"),a("7f45")),d=a.n(m),m=(a("b730"),a("bc3a"),{data:function(){var e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,loadingDetail:!1,ruleForm:{phone_number:"",greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:""},max_load:5,masking_phone:!0,only_show_group_ticket:!1,ticket_rating_enabled:!1},rules:{"greeting.askName":[{required:!0,message:"Please input Bot Asking Name",trigger:"blur"}],"greeting.askQuestion":[{required:!0,message:"Please input Bot Asking Question",trigger:"blur"}],"greeting.ticketAssign":[{required:!0,message:"Please input Bot Info Ticket",trigger:"blur"}],"greeting.ticketClose":[{required:!0,message:"Please input Bot Close Ticket",trigger:"blur"}],max_load:[{required:!0,message:"Please input Max Ticket Operator",trigger:"blur"}]},note:{askQuestion:"Note: Use {{name}} for specifying name.",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number.",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number. Use {{ticketRating}} for generated link for user give rating to his/her ticket, make sure you have enabled option Rate Ticket on the below"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1};return Object(l.a)(e,"showAlertError",!1),Object(l.a)(e,"alwaysOnline",!0),Object(l.a)(e,"onlineAt",[[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()],[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()],[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()],[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()],[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()],[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()],[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()]]),Object(l.a)(e,"onlineTime",[d()().set({hour:8,minute:0}).toLocaleString(),d()().set({hour:17,minute:0}).toLocaleString()]),Object(l.a)(e,"selectedDay",[]),e},methods:{changeFilter:function(){this.loadPreferences()},copyToClipboard:function(){document.querySelector("#api_key").select();try{document.execCommand("copy"),this.$message.success({showClose:!0,duration:3e3,message:"Copied to clipboard"})}catch(e){}window.getSelection().removeAllRanges()},generateKey:(o=Object(s.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingBtnGenerate=!0,e.next=3,Object(c.a)({method:"get",url:u.a.chatApi+"auth/preferences/generate-key/"+this.ruleForm.phone_number}).then(function(e){200==e.data.ec?t.api_key=e.data.data.key:t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})}).catch(function(e){t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})});case 3:this.loadingBtnGenerate=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),loadWA:(i=Object(s.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(c.a)({method:"post",url:u.a.baseApi+"user/detail/number"}).then(function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.ruleForm.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0}).catch(function(e){t.showAlertError=!0});case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),loadPreferences:(n=Object(s.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(c.a)({method:"get",url:u.a.chatApi+"auth/preferences/"+this.ruleForm.phone_number}).then(function(e){200==e.data.ec?(t.ruleForm.greeting=e.data.data.greeting,t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline=e.data.data.alwaysOnline,t.isSubscribe=!0,t.ruleForm.max_load=e.data.data.max_load,t.ruleForm.masking_phone=null==e.data.data.masking_phone||e.data.data.masking_phone,t.ruleForm.only_show_group_ticket=null!=e.data.data.only_show_group_ticket&&e.data.data.only_show_group_ticket,t.ruleForm.ticket_rating_enabled=null!=e.data.data.ticket_rating_enabled&&e.data.data.ticket_rating_enabled):"not_subscribe"==e.data.message&&(t.isSubscribe=!1)}).catch(function(e){});case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),updatePreferences:function(e){var t,r=this;this.$refs[e].validate((t=Object(s.a)(regeneratorRuntime.mark(function e(t){var a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t)return r.loadingBtn=!0,a={greeting:r.ruleForm.greeting,autoClose:r.autoClose,max_load:r.ruleForm.max_load,masking_phone:r.ruleForm.masking_phone,only_show_group_ticket:r.ruleForm.only_show_group_ticket,ticket_rating_enabled:r.ruleForm.ticket_rating_enabled},e.next=5,Object(c.a)({method:"patch",url:u.a.chatApi+"auth/preferences/"+r.ruleForm.phone_number,data:a}).then(function(e){200==e.data.ec?r.$swal(r.$t("success"),r.$t("success"),"success").then(function(e){r.loadPreferences()}):r.$swal(r.$t("error"),r.$t("error_text"),"warning")}).catch(function(e){r.$swal(r.$t("error"),r.$t("error_text"),"error")});e.next=8;break;case 5:r.loadingBtn=!1,e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e)})),function(e){return t.apply(this,arguments)}))}},mounted:(r=Object(s.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}),a=a("2877"),m=Object(a.a)(m,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[t._v(t._s(t.$t("helpdesk.preferences")))])]),t.showAlertError?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[a("error-gope-siji")],1):t._e(),t.showAlert?a("el-card",{attrs:{align:"center"}},[a("h2",{attrs:{align:"center"}},[t._v("Start messaging your customers today")]),a("p",{domProps:{innerHTML:t._s(t.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(e){return t.mailto()}}},[t._v("Send us e-mail")])],1)]):t._e(),!t.showCard||t.showAlert||t.showAlertError?t._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[t.showCard?a("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[t.showCard?a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-select",{attrs:{"default-first-option":!0},on:{change:t.changeFilter},model:{value:t.ruleForm.phone_number,callback:function(e){t.$set(t.ruleForm,"phone_number",e)},expression:"ruleForm.phone_number"}},t._l(t.phoneNumberList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),a("el-form",{ref:"ruleForm",attrs:{model:t.ruleForm,rules:t.rules}},[t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Bot Asking Question")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"greeting.askQuestion"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea"},model:{value:t.ruleForm.greeting.askQuestion,callback:function(e){t.$set(t.ruleForm.greeting,"askQuestion",e)},expression:"ruleForm.greeting.askQuestion"}})],1),a("small",{staticStyle:{"font-size":"12px"},domProps:{innerHTML:t._s(t.note.askQuestion)}})],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Bot Info Ticket")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"greeting.ticketAssign"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea"},model:{value:t.ruleForm.greeting.ticketAssign,callback:function(e){t.$set(t.ruleForm.greeting,"ticketAssign",e)},expression:"ruleForm.greeting.ticketAssign"}})],1),a("small",{staticStyle:{"font-size":"12px"},domProps:{innerHTML:t._s(t.note.ticketAssign)}})],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Bot Close Ticket")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"greeting.ticketClose"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea"},model:{value:t.ruleForm.greeting.ticketClose,callback:function(e){t.$set(t.ruleForm.greeting,"ticketClose",e)},expression:"ruleForm.greeting.ticketClose"}})],1),a("small",{staticStyle:{"font-size":"12px"},domProps:{innerHTML:t._s(t.note.ticketClose)}})],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Max Ticket Operator")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"max_load"}},[a("el-input",{attrs:{type:"number",id:"max_load",placeholder:"Maximal ticket handled by operator"},model:{value:t.ruleForm.max_load,callback:function(e){t.$set(t.ruleForm,"max_load",e)},expression:"ruleForm.max_load"}})],1),a("small",{staticStyle:{"font-size":"12px"}},[t._v("Info: Maximal count of ticket allowed to handle per Customer Service")])],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Masking Customer Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"masking_phone"}},[a("el-switch",{attrs:{"active-text":"On","inactive-text":"Off"},model:{value:t.ruleForm.masking_phone,callback:function(e){t.$set(t.ruleForm,"masking_phone",e)},expression:"ruleForm.masking_phone"}})],1),a("small",{staticStyle:{"font-size":"12px"}},[t._v("Info: Customer phone number will be masking like ********5155")])],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Show Ticket per CS Group")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"only_show_group_ticket"}},[a("el-switch",{attrs:{"active-text":"On","inactive-text":"Off"},model:{value:t.ruleForm.only_show_group_ticket,callback:function(e){t.$set(t.ruleForm,"only_show_group_ticket",e)},expression:"ruleForm.only_show_group_ticket"}})],1)],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Generate Rating Ticket URL")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"ticket_rating_enabled"}},[a("el-switch",{attrs:{"active-text":"On","inactive-text":"Off"},model:{value:t.ruleForm.ticket_rating_enabled,callback:function(e){t.$set(t.ruleForm,"ticket_rating_enabled",e)},expression:"ruleForm.ticket_rating_enabled"}})],1)],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:function(e){return t.updatePreferences("ruleForm")}}},[a("i",{staticClass:"mdi mdi-content-save"}),t._v(" "+t._s(t.$t("generic.update")))])],1)],1):t._e()],1),t.isSubscribe?t._e():a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):t._e()],1):t._e()],1)],1)},[],!1,null,null,null);t.default=m.exports},1637:function(e,t,n){"use strict";n.r(t);var a,r,i,o,s,l,c=(n("20d6"),n("7514"),n("96cf"),n("3b8d")),u=n("bd86"),m=(n("bce9"),n("271f")),d=(n("8055"),n("db49")),p=(n("c0d6"),n("7f45")),h=n.n(p),p=(n("b730"),n("bc3a"),{data:function(){var e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,loadingDetail:!1,form:{phone_number:""},greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:""},note:{askQuestion:"Note: Use {{name}} for specifying name",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1};return Object(u.a)(e,"showAlertError",!1),Object(u.a)(e,"alwaysOnline",!0),Object(u.a)(e,"onlineAt",[[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()],[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()],[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()],[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()],[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()],[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()],[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()]]),Object(u.a)(e,"onlineTime",[h()().set({hour:8,minute:0}).toLocaleString(),h()().set({hour:17,minute:0}).toLocaleString()]),Object(u.a)(e,"selectedDay",[]),Object(u.a)(e,"quickReply",[]),Object(u.a)(e,"newForm",{title:"",quickReply:""}),Object(u.a)(e,"dialogNew",!1),Object(u.a)(e,"editForm",{title:"",quickReply:""}),Object(u.a)(e,"dialogEdit",!1),e},methods:{concatText:function(e){return 50<e.length?e.substring(0,50)+"...":e},newQuickClicked:function(){this.dialogNew=!0},quickReplyAdd:(l=Object(c.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!_.find(this.quickReply,function(e){return e.title==a.newForm.title})){e.next=5;break}this.$message.warning({showClose:!0,duration:5e3,message:this.$t("helpdesk.quickReply.exist")}),e.next=11;break;case 5:return t=Object.assign({},this.newForm),this.quickReply.push(t),this.newForm={title:"",quickReply:""},e.next=10,this.updatePreferences();case 10:this.dialogNew=!1;case 11:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),quickReplyUpdate:(s=Object(c.a)(regeneratorRuntime.mark(function e(){var t,a,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.find(this.quickReply,function(e){return e.title==r.editForm.title}),a=_.findIndex(this.quickReply,function(e){return e.title==r.editForm.title}),!t||this.editForm.index==a){e.next=6;break}this.$message.warning({showClose:!0,duration:5e3,message:this.$t("helpdesk.quickReply.exist")}),e.next=15;break;case 6:return a=Object.assign({},this.editForm),this.quickReply[this.editForm.index]={title:a.title,quickReply:a.quickReply},a=Object.assign([],this.quickReply),this.quickReply=[],this.quickReply=a,this.editForm={title:"",quickReply:""},e.next=14,this.updatePreferences();case 14:this.dialogEdit=!1;case 15:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),editQuickReply:function(e){this.editForm=Object.assign({},this.quickReply[e]),this.editForm.index=e,this.dialogEdit=!0},deleteQuickReply:function(e){var t=this;this.$swal({title:this.$t("delete_confirmation"),text:"Delete this quick reply?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return t.quickReply.splice(e,1),Object(m.a)({method:"patch",url:d.a.chatApi+"auth/preferences/"+t.form.phone_number,data:{quickReply:t.quickReply}}).then(function(e){return e})}}).then(function(e){200==e.data.ec?(t.$swal(t.$t("success"),t.$t("success"),"success").then(function(e){}),t.loadPreferences()):t.$swal(t.$t("error"),t.$t("error_text"),"warning"),t.loadingBtn=!1})},changeFilter:function(){this.loadPreferences()},loadWA:(o=Object(c.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(m.a)({method:"post",url:d.a.baseApi+"user/detail/number"}).then(function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.form.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0}).catch(function(e){t.showAlertError=!0});case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),loadPreferences:(i=Object(c.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(m.a)({method:"get",url:d.a.chatApi+"auth/preferences/"+this.form.phone_number}).then(function(e){200==e.data.ec?(t.greeting=e.data.data.greeting,t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline=e.data.data.alwaysOnline,t.isSubscribe=!0,t.quickReply=e.data.data.quickReply||[]):"not_subscribe"==e.data.message&&(t.isSubscribe=!1)}).catch(function(e){});case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),updatePreferences:(r=Object(c.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingBtn=!0,t={quickReply:this.quickReply},e.next=4,Object(m.a)({method:"patch",url:d.a.chatApi+"auth/preferences/"+this.form.phone_number,data:t}).then(function(e){a.dialogNew=!1,200==e.data.ec?a.$swal(a.$t("success"),a.$t("success"),"success").then(function(e){}):a.$swal(a.$t("error"),a.$t("error_text"),"warning")}).catch(function(e){a.dialogNew=!1,a.$swal(a.$t("error"),a.$t("error_text"),"error")});case 4:this.loadingBtn=!1;case 5:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})},mounted:(a=Object(c.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}},e,this)})),function(){return a.apply(this,arguments)})}),c=(n("4892"),n("2877")),p=Object(c.a)(p,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[r("div",{staticClass:"page-header"},[r("h1",[a._v(a._s(a.$t("helpdesk.preferences")))])]),a.showAlertError?r("el-card",{staticStyle:{"margin-bottom":"1em"}},[r("error-gope-siji")],1):a._e(),a.showAlert?r("el-card",{attrs:{align:"center"}},[r("h2",{attrs:{align:"center"}},[a._v("Start messaging your customers today")]),r("p",{domProps:{innerHTML:a._s(a.$t("promote.desc.whatsapp"))}}),r("br"),r("br"),r("span",[r("el-button",{on:{click:function(e){return a.mailto()}}},[a._v("Send us e-mail")])],1)]):a._e(),r("div",[r("el-dialog",{attrs:{title:"New Quick Reply",visible:a.dialogNew,width:"40%"},on:{"update:visible":function(e){a.dialogNew=e}}},[r("el-form",{ref:"form",attrs:{model:a.newForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"text",autofocus:"true",placeholder:"Greeting",max:"50"},model:{value:a.newForm.title,callback:function(e){a.$set(a.newForm,"title",e)},expression:"newForm.title"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[a._v(a._s(a.newForm.title.length)+"/50 character(s)")])],1),r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"textarea",autofocus:"true",rows:"6",max:"1000",placeholder:"Hello, this is new quick reply!"},model:{value:a.newForm.quickReply,callback:function(e){a.$set(a.newForm,"quickReply",e)},expression:"newForm.quickReply"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[a._v(a._s(a.newForm.quickReply.length)+"/1000 character(s)")])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:a.loadingBtn},on:{click:a.quickReplyAdd}},[a._v("Add")]),r("el-button",{on:{click:function(e){a.dialogNew=!1}}},[a._v("Close")])],1)],1)],1),r("div",[r("el-dialog",{attrs:{title:"Edit Quick Reply",visible:a.dialogEdit,width:"40%"},on:{"update:visible":function(e){a.dialogEdit=e}}},[r("el-form",{ref:"form",attrs:{model:a.editForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"text",autofocus:"true",placeholder:"Greeting",max:"50"},model:{value:a.editForm.title,callback:function(e){a.$set(a.editForm,"title",e)},expression:"editForm.title"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[a._v(a._s(a.editForm.title.length)+"/50 character(s)")])],1),r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"textarea",autofocus:"true",max:"1000",rows:"6",placeholder:"Hello, this is new quick reply!"},model:{value:a.editForm.quickReply,callback:function(e){a.$set(a.editForm,"quickReply",e)},expression:"editForm.quickReply"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[a._v(a._s(a.editForm.quickReply.length)+"/1000 character(s)")])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:a.loadingBtn},on:{click:a.quickReplyUpdate}},[r("i",{staticClass:"mdi mdi-content-save"}),a._v(" "+a._s(a.$t("generic.update")))]),r("el-button",{on:{click:function(e){a.dialogEdit=!1}}},[a._v("Close")])],1)],1)],1),!a.showCard||a.showAlert||a.showAlertError?a._e():r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:a.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[a.showCard?r("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[a.showCard?r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[a._v("Phone Number")])]),r("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-select",{attrs:{"default-first-option":!0},on:{change:a.changeFilter},model:{value:a.form.phone_number,callback:function(e){a.$set(a.form,"phone_number",e)},expression:"form.phone_number"}},a._l(a.phoneNumberList,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),a.isSubscribe?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[a._v("Quick Reply")])]),r("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-button",{staticClass:"button-new-tag",on:{click:a.newQuickClicked}},[a._v("+ New Quick Reply")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:a.quickReply}},[r("el-table-column",{attrs:{prop:"title",label:"Title"}}),r("el-table-column",{attrs:{prop:"quickReply",label:"Text"},scopedSlots:a._u([{key:"default",fn:function(e){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":3e3,content:e.row.quickReply,placement:"top"}},[r("span",[a._v(a._s(a.concatText(e.row.quickReply)))])])]}}],null,!1,2930269970)}),r("el-table-column",{attrs:{prop:"quickReply",label:"#",width:"200"},scopedSlots:a._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return a.editQuickReply(t.$index)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){return a.deleteQuickReply(t.$index)}}})]}}],null,!1,3993954137)}),r("template",{staticStyle:{height:"400px"},slot:"empty"},[r("p",{staticStyle:{color:"#909399"},attrs:{align:"center"}},[r("img",{attrs:{src:n("e44b"),width:"100"}}),r("br"),a._v("You do not have any quick reply ")])])],2)],1)],1):a._e(),a.isSubscribe?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}})],1):a._e(),a.isSubscribe?a._e():r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):a._e()],1):a._e()],1)],1)},[],!1,null,null,null);t.default=p.exports},"1f90":function(e,t,a){"use strict";a("7944")},"2f21":function(e,t,a){"use strict";var r=a("79e5");e.exports=function(e,t){return!!e&&r(function(){t?e.call(null,function(){},1):e.call(null)})}},3077:function(e,t,a){"use strict";a.r(t);var r,n,o,s,l,c,u=(a("55dd"),a("6b54"),a("20d6"),a("96cf"),a("3b8d")),m=(a("ac6a"),a("456d"),a("bd86")),d=(a("bce9"),a("271f")),p=(a("8055"),a("db49")),h=(a("c0d6"),a("7f45")),g=a.n(h),u=(a("b730"),a("bc3a"),{data:function(){var e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingDetail:!1,loadingBtn:!1,form:{phone_number:""},greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:"",autoResponder:"Sorry, we are currently offline. Please contact us again at 08:00 tommorow. Thank you!"},note:{askQuestion:"Note: Use {{name}} for specifying name",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1};return Object(m.a)(e,"showAlertError",!1),Object(m.a)(e,"alwaysOnline",!0),Object(m.a)(e,"onlineTime",[]),Object(m.a)(e,"tempOnlineTime",[g()().set({hour:8,minute:0,second:0}).toLocaleString(),g()().set({hour:17,minute:0,second:0}).toLocaleString()]),Object(m.a)(e,"selectedDay",[]),Object(m.a)(e,"currentCheck",[]),Object(m.a)(e,"checkedDay",[]),Object(m.a)(e,"savedSchedule",[]),Object(m.a)(e,"currentSchedule",[]),Object(m.a)(e,"timePickerDisabled",[]),Object(m.a)(e,"availableDay",[1,2,3,4,5,6,7]),e},methods:{removeDay:function(e,t){var a=this.currentSchedule[t],r=Object.keys(a[e]);this.availableDay.push(parseInt(r)),this.checkedDay=_.remove(this.checkedDay,function(e){return parseInt(e)!=parseInt(r)}),this.currentSchedule[t].splice(e,1)},getKeys:function(e){return Object.keys(e)},changeFilter:function(){this.loadPreferences()},copyToClipboard:function(){document.querySelector("#api_key").select();try{document.execCommand("copy"),this.$message.success({showClose:!0,duration:3e3,message:"Copied to clipboard"})}catch(e){}window.getSelection().removeAllRanges()},generateKey:(c=Object(u.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingBtnGenerate=!0,e.next=3,Object(d.a)({method:"get",url:p.a.chatApi+"auth/preferences/generate-key/"+this.form.phone_number}).then(function(e){200==e.data.ec?t.api_key=e.data.data.key:t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})}).catch(function(e){t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})});case 3:this.loadingBtnGenerate=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return c.apply(this,arguments)}),loadWA:(l=Object(u.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(d.a)({method:"post",url:p.a.baseApi+"user/detail/number"}).then(function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.form.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0}).catch(function(e){t.showAlertError=!0});case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return l.apply(this,arguments)}),loadPreferences:(s=Object(u.a)(regeneratorRuntime.mark(function e(){var s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(d.a)({method:"get",url:p.a.chatApi+"auth/preferences/"+this.form.phone_number}).then(function(e){if(200==e.data.ec){for(var t in e.data.data.greeting)void 0!==e.data.data.greeting[t]&&(s.greeting[t]=e.data.data.greeting[t]);if(s.autoClose=e.data.data.autoClose?"on":"off",s.api_key=e.data.data.api_key,s.alwaysOnline=void 0===e.data.data.alwaysOnline||e.data.data.alwaysOnline,e.data.data.onlineSchedule)if(0<e.data.data.onlineSchedule.length)for(var a in s.selectedDay=e.data.data.onlineSchedule,s.selectedDay){var r=s.selectedDay[a];null!=r?s.onlineTime[a]=[g()(r[Object.keys(r)].time[0]).toLocaleString(),g()(r[Object.keys(r)].time[1]).toLocaleString()]:s.onlineTime[i]=[g()().set({hour:8,minute:0,second:0}).toLocaleString(),g()().set({hour:17,minute:0,second:0}).toLocaleString()],"00:00|23:59"==r[Object.keys(r)].readable&&(s.timePickerDisabled[a]=!0)}else for(var n in[1,2,3,4,5,6,7])s.onlineTime[n]=[g()().set({hour:8,minute:0,second:0}).toLocaleString(),g()().set({hour:17,minute:0,second:0}).toLocaleString()],s.timePickerDisabled[n]=!1,s.selectedDay[n]=Object(m.a)({},parseInt(n)+1,{readable:g()(s.onlineTime[n][0]).format("HH:mm")+"|"+g()(s.onlineTime[n][1]).format("HH:mm"),time:[g()(s.onlineTime[n][0]).format(),g()(s.onlineTime[n][1]).format()]});else for(var o in[1,2,3,4,5,6,7])s.onlineTime[o]=[g()().set({hour:8,minute:0,second:0}).toLocaleString(),g()().set({hour:17,minute:0,second:0}).toLocaleString()],s.timePickerDisabled[o]=!1,s.selectedDay[o]=Object(m.a)({},parseInt(o)+1,{readable:g()(s.onlineTime[o][0]).format("HH:mm")+"|"+g()(s.onlineTime[o][1]).format("HH:mm"),time:[g()(s.onlineTime[o][0]).format(),g()(s.onlineTime[o][1]).format()]});s.isSubscribe=!0}else"not_subscribe"==e.data.message&&(s.isSubscribe=!1)}).catch(function(e){});case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),updatePreferences:(o=Object(u.a)(regeneratorRuntime.mark(function e(){var t,a,r,n=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={alwaysOnline:this.alwaysOnline,greeting:this.greeting},0!=this.alwaysOnline){e.next=11;break}if(a=g()().set({hour:0,minute:0,second:0}),r=g()().set({hour:23,minute:59,second:0}),this.timePickerDisabled.forEach(function(e,t){!0===e&&(n.selectedDay[t]=Object(m.a)({},t+1,{readable:a.format("HH:mm")+"|"+r.format("HH:mm"),time:[a.format(),r.format()]}))}),t.onlineSchedule=this.selectedDay,""==this.greeting.autoResponder||""==this.greeting.autoResponder.trim()||7!=this.selectedDay.length)return this.$message.error({showClose:!1,message:"All field is required"}),e.abrupt("return");e.next=9;break;case 9:e.next=12;break;case 11:t.onlineSchedule=[];case 12:return this.loadingBtn=!0,e.next=15,Object(d.a)({method:"patch",url:p.a.chatApi+"auth/preferences/"+this.form.phone_number,data:t}).then(function(e){200==e.data.ec?n.$swal(n.$t("success"),n.$t("success"),"success").then(function(e){n.loadPreferences()}):n.$swal(n.$t("error"),n.$t("error_text"),"warning")}).catch(function(e){n.loadingBtn=!1,n.$swal(n.$t("error"),n.$t("error_text"),"error")});case 15:this.loadingBtn=!1;case 16:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),setTimeAlways:(n=Object(u.a)(regeneratorRuntime.mark(function e(t,a){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:1==t?(r=g()().set({hour:0,minute:0,second:0}),n=g()().set({hour:23,minute:59,second:0}),this.onlineTime[a-1]=[r.toLocaleString(),n.toLocaleString()],this.selectedDay[a-1]=Object(m.a)({},a,{readable:r.format("HH:mm")+"|"+n.format("HH:mm"),time:[r.format(),n.format()]})):(r=g()().set({hour:8,minute:0,second:0}),n=g()().set({hour:17,minute:0,second:0}),this.onlineTime[a-1]=[r.toLocaleString(),n.toLocaleString()],this.selectedDay[a-1]=Object(m.a)({},a,{readable:r.format("HH:mm")+"|"+n.format("HH:mm"),time:[r.format(),n.format()]}));case 1:case"end":return e.stop()}},e,this)})),function(e,t){return n.apply(this,arguments)}),checkIfDis:function(e){return-1==this.availableDay.indexOf(e)},checkIfNull:function(e){return 0<e.length},checkedChange:function(e,t){this.selectedDay;var a=[g()(this.onlineTime[0]).format("HH:mm"),g()(this.onlineTime[1]).format("HH:mm")].join("|"),r=t.target.value;-1!=Object.keys(this.selectedDay).indexOf(a)?-1==(t=_.findIndex(this.selectedDay[a],function(e){return Object.keys(e).toString()==r.toString()}))?(this.selectedDay[a].push(Object(m.a)({},r,{time:[g()(this.onlineTime[0]),g()(this.onlineTime[1])],readable:a})),this.selectedDay[a]=_.sortBy(this.selectedDay[a],function(e){return Object.keys(e)})):0==e&&(this.selectedDay[a].splice(t,1),this.selectedDay[a]=_.sortBy(this.selectedDay[a],function(e){return Object.keys(e)})):(void 0===this.selectedDay[a]&&(this.selectedDay[a]=[]),this.selectedDay[a].push(Object(m.a)({},r,{time:[g()(this.onlineTime[0]),g()(this.onlineTime[1])],readable:a})),this.selectedDay[a].sort())},timePickerChange:function(e,t){this.selectedDay[t-1]=Object(m.a)({},t,{readable:g()(e[0]).format("HH:mm")+"|"+g()(e[1]).format("HH:mm"),time:[g()(e[0]).format(),g()(e[1]).format()]})}},watch:{onlineTime:function(){var t=this;this.onlineTime.forEach(function(e){null!=e||t.$message.error({showClose:!1,message:"All field is required"})})}},mounted:(r=Object(u.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}),a=a("2877"),u=Object(a.a)(u,function(){var a=this,e=a.$createElement,r=a._self._c||e;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:a.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[r("div",{staticClass:"page-header"},[r("h1",[a._v(a._s(a.$t("helpdesk.preferences")))])]),a.showAlertError?r("el-card",{staticStyle:{"margin-bottom":"1em"}},[r("error-gope-siji")],1):a._e(),a.showAlert?r("el-card",{attrs:{align:"center"}},[r("h2",{attrs:{align:"center"}},[a._v("Start messaging your customers today")]),r("p",{domProps:{innerHTML:a._s(a.$t("promote.desc.whatsapp"))}}),r("br"),r("br"),r("span",[r("el-button",{on:{click:function(e){return a.mailto()}}},[a._v("Send us e-mail")])],1)]):a._e(),!a.showCard||a.showAlert||a.showAlertError?a._e():r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:a.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[a.showCard?r("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[a.showCard?r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[a._v("Phone Number")])]),r("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-select",{attrs:{"default-first-option":!0},on:{change:a.changeFilter},model:{value:a.form.phone_number,callback:function(e){a.$set(a.form,"phone_number",e)},expression:"form.phone_number"}},a._l(a.phoneNumberList,function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),a.isSubscribe?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[a._v("Always Online")])]),r("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-switch",{attrs:{"active-text":"On","active-value":!0,"inactive-text":"Off","inactive-value":!1},model:{value:a.alwaysOnline,callback:function(e){a.alwaysOnline=e},expression:"alwaysOnline"}}),a._l([1,2,3,4,5,6,7],function(t){return a.alwaysOnline?a._e():r("el-row",{key:t,staticClass:"mt-20",attrs:{gutter:30}},[r("el-col",{staticClass:"mt-10",attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[a._v(a._s(a.$t("day."+t)))])]),r("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-time-picker",{attrs:{"is-range":"",start:"08:00",end:"17:00",format:"HH:mm",step:"00:30","range-separator":"To",disabled:a.timePickerDisabled[t-1],"start-placeholder":"Start time","end-placeholder":"End time"},on:{change:function(e){return a.timePickerChange(a.onlineTime[t-1],t)}},model:{value:a.onlineTime[t-1],callback:function(e){a.$set(a.onlineTime,t-1,e)},expression:"onlineTime[i-1]"}}),a._v("   "),r("el-switch",{attrs:{"active-text":"24 Hours","active-value":!0,"inactive-text":"","inactive-value":!1},on:{change:function(e){return a.setTimeAlways(a.timePickerDisabled[t-1],t)}},model:{value:a.timePickerDisabled[t-1],callback:function(e){a.$set(a.timePickerDisabled,t-1,e)},expression:"timePickerDisabled[i-1]"}})],1)],1)})],2)],1):a._e(),a.isSubscribe&&0==a.alwaysOnline?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[a._v("Bot Auto Responder Message")])]),r("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea",placeholder:"Message your customer service currently available at some time"},model:{value:a.greeting.autoResponder,callback:function(e){a.$set(a.greeting,"autoResponder",e)},expression:"greeting.autoResponder"}})],1)],1):a._e(),a.isSubscribe?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-button",{attrs:{type:"primary",loading:a.loadingBtn},on:{click:a.updatePreferences}},[r("i",{staticClass:"mdi mdi-content-save"}),a._v(" "+a._s(a.$t("generic.update")))])],1)],1):a._e(),a.isSubscribe?a._e():r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):a._e()],1):a._e()],1)],1)},[],!1,null,null,null);t.default=u.exports},4892:function(e,t,a){"use strict";a("8d16")},"55dd":function(e,t,a){"use strict";var r=a("5ca1"),n=a("d8e8"),i=a("4bf8"),o=a("79e5"),s=[].sort,l=[1,2,3];r(r.P+r.F*(o(function(){l.sort(void 0)})||!o(function(){l.sort(null)})||!a("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),n(e))}})},7944:function(e,t,a){},"8d16":function(e,t,a){},"98af":function(e,t,a){"use strict";a.r(t);var r,n,i,o,s,l=(a("96cf"),a("3b8d")),c=a("bd86"),u=(a("bce9"),a("271f")),m=(a("8055"),a("db49")),d=(a("c0d6"),a("7f45")),p=a.n(d),l=(a("b730"),a("bc3a"),{data:function(){var e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,loadingDetail:!1,form:{phone_number:""},greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:""},note:{askQuestion:"Note: Use {{name}} for specifying name",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1};return Object(c.a)(e,"showAlertError",!1),Object(c.a)(e,"alwaysOnline",!0),Object(c.a)(e,"onlineAt",[[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()],[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()],[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()],[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()],[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()],[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()],[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()]]),Object(c.a)(e,"onlineTime",[p()().set({hour:8,minute:0}).toLocaleString(),p()().set({hour:17,minute:0}).toLocaleString()]),Object(c.a)(e,"selectedDay",[]),e},methods:{changeFilter:function(){this.loadPreferences()},copyToClipboard:function(){document.querySelector("#api_key").select();try{document.execCommand("copy"),this.$message.success({showClose:!0,duration:3e3,message:"Copied to clipboard"})}catch(e){}window.getSelection().removeAllRanges()},generateKey:(s=Object(l.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingBtnGenerate=!0,e.next=3,Object(u.a)({method:"get",url:m.a.chatApi+"auth/preferences/generate-key/"+this.form.phone_number}).then(function(e){200==e.data.ec?t.api_key=e.data.data.key:t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})}).catch(function(e){t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})});case 3:this.loadingBtnGenerate=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),loadWA:(o=Object(l.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(u.a)({method:"post",url:m.a.baseApi+"user/detail/number"}).then(function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.form.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0}).catch(function(e){t.showAlertError=!0});case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),loadPreferences:(i=Object(l.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(u.a)({method:"get",url:m.a.chatApi+"auth/preferences/"+this.form.phone_number}).then(function(e){200==e.data.ec?(t.greeting=e.data.data.greeting,t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline=e.data.data.alwaysOnline,t.isSubscribe=!0):"not_subscribe"==e.data.message&&(t.isSubscribe=!1)}).catch(function(e){});case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),updatePreferences:(n=Object(l.a)(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.loadingBtn=!0,t={api_key:this.api_key},e.next=4,Object(u.a)({method:"patch",url:m.a.chatApi+"auth/preferences/"+this.form.phone_number,data:t}).then(function(e){200==e.data.ec?a.$swal(a.$t("success"),a.$t("success"),"success").then(function(e){a.loadPreferences()}):a.$swal(a.$t("error"),a.$t("error_text"),"warning")}).catch(function(e){a.$swal(a.$t("error"),a.$t("error_text"),"error")});case 4:this.loadingBtn=!1;case 5:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},mounted:(r=Object(l.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}),a=a("2877"),l=Object(a.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[t._v(t._s(t.$t("helpdesk.preferences")))])]),t.showAlertError?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[a("error-gope-siji")],1):t._e(),t.showAlert?a("el-card",{attrs:{align:"center"}},[a("h2",{attrs:{align:"center"}},[t._v("Start messaging your customers today")]),a("p",{domProps:{innerHTML:t._s(t.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(e){return t.mailto()}}},[t._v("Send us e-mail")])],1)]):t._e(),!t.showCard||t.showAlert||t.showAlertError?t._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[t.showCard?a("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[t.showCard?a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-select",{attrs:{"default-first-option":!0},on:{change:t.changeFilter},model:{value:t.form.phone_number,callback:function(e){t.$set(t.form,"phone_number",e)},expression:"form.phone_number"}},t._l(t.phoneNumberList,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1)],1)],1),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[t._v("API Key")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-input",{attrs:{type:"text",id:"api_key",placeholder:"Your API's key",readonly:""},model:{value:t.api_key,callback:function(e){t.api_key=e},expression:"api_key"}},[a("el-button",{attrs:{slot:"append"},on:{click:t.copyToClipboard},slot:"append"},[a("i",{staticClass:"mdi mdi-content-copy"})]),a("el-button",{attrs:{slot:"append",loading:t.loadingBtnGenerate},on:{click:t.generateKey},slot:"append"},[a("i",{staticClass:"mdi mdi-key-variant"}),t._v(" Generate")])],1)],1)],1):t._e(),t.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-button",{attrs:{type:"primary",loading:t.loadingBtn},on:{click:t.updatePreferences}},[a("i",{staticClass:"mdi mdi-content-save"}),t._v(" "+t._s(t.$t("generic.update")))])],1)],1):t._e(),t.isSubscribe?t._e():a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):t._e()],1):t._e()],1)],1)},[],!1,null,null,null);t.default=l.exports},d7ce:function(e,t,a){"use strict";a.r(t);var r,n,i,o=(a("6aa2"),a("ac6a"),a("96cf"),a("3b8d")),s=a("2ef0"),l=a.n(s),c=a("271f"),u=a("db49"),s=(a("c0d6"),a("7f45")),m=a.n(s),s=(a("b730"),a("aeb1")),d=a.n(s),s=(a("bc3a"),{data:function(){return{loadingPage:!1,reportData:[],dateRange:[new Date,new Date],startDate:new Date,endDate:new Date,startEndDate:[new Date,new Date],excelFields:{Date:"dateCreate","Time start":"timeStart","Time end":"timeEnd","Handphone Number":"customerPhone","Number of Reponds":"totalResponse","CS Name":"operatorName"},excelData:[],excelFilename:"Report CS (Platform by DAMCorp).xlsx",pageNotAllowed:!1,ticketList:[],currentPage:1,total:0,showAlertError:!1}},methods:{print:function(){window.print()},download:function(){this.getReport("download")},formatDate:function(e,t){return m()(e).format(t)},paginateReport:function(e){this.currentPage=e,this.getReport()},getReport:(i=Object(o.a)(regeneratorRuntime.mark(function e(){var r,t,n=this,a=arguments;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=0<a.length&&void 0!==a[0]?a[0]:"",this.loadingPage=!0,t={url:u.a.chatApi+"report/helpdesk/?"+r,method:"post",params:{page:this.currentPage},data:{startDate:m()(this.startEndDate[0]).format("YYYY-MM-DD"),endDate:m()(this.startEndDate[1]).format("YYYY-MM-DD")}},"download"==r&&(t.responseType="arraybuffer"),e.next=6,Object(c.a)(t).then(function(e){if(200==e.data.ec||"download"==r)if("download"==r)if(-1==e.headers["content-type"].indexOf("application/json"))try{var t=window.URL.createObjectURL(new Blob([e.data])),a=document.createElement("a");a.href=t,a.setAttribute("download","Report CS (Platform by DAMCorp).xlsx"),a.click()}catch(e){}else n.$swal(n.$t("error"),n.$t("helpdesk.".concat(e.data.message)),"error");else{n.ticketList=[],n.excelData=[];a=e.data.data.ticket;e.data.data.companyNumber,n.excelFilename="Report CS ".concat([n.formatDate(n.startDate,"YYYY-MM-DD"),n.formatDate(n.endDate,"YYYY-MM-DD")].join(" to ")," (Platform by DAMCorp).xls"),n.reportData=l()(a).groupBy(function(e){return e.operatorNumber}).map(function(e,t){return{number:t,ticket:e}}).value(),l.a.forEach(n.reportData,function(e){l.a.forEach(e.ticket,function(e){n.ticketList.push(e)})}),l.a.forEach(e.data.data.ticket,function(e){n.excelData.push({dateCreate:n.formatDate(e.dateCreate,"YYYY-MM-DD"),timeStart:n.formatDate(e.dateCreate,"HH:mm"),timeEnd:"-"==e.dateClose?"-":n.formatDate(e.dateClose,"HH:mm"),customerPhone:e.customerNumber,totalResponse:e.totalResponse,operatorName:e.operatorName})}),n.total=e.data.data.total}else"not_subscribe"!=e.data.message?n.$swal(n.$t("error"),n.$t("helpdesk.".concat(e.data.message)),"error"):n.pageNotAllowed=!0}).catch(function(e){n.showAlertError=!0});case 6:this.loadingPage=!1;case 7:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)}),exportExcel:(n=Object(o.a)(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={url:u.a.chatApi+"report/helpdesk",method:"post",data:{startDate:m()(this.startDate).format("YYYY-MM-DD"),endDate:m()(this.endDate).format("YYYY-MM-DD")}},e.next=3,Object(c.a)(t).then(function(e){if(200==e.data.ec){var t="";s.resData=e.data.data,s.ticket=e.data.data.ticket,s.ticket=l.a.orderBy(s.ticket,function(e){return new m.a(e.dateTimeIso)},["desc"]),t+="No\tDate\tTicket\tTime Start\tTime EndPhone NumberNumber of RespondsCS Name\n";var a=e.data.data.ticket,r=0;a.forEach(function(e){t+=++r+"\t",t+=m()(e.dateTime).tz("Asia/Jakarta").format("YYYY-MM-DD HH:mm:ss")+"\t",t+=e.ticket+"\t",t+='="'+e.timeStart+'"\t',t+='="'+e.timeEnd+'"\t',t+='="'+e.customerPhone+'"\t',t+='="'+e.operatorNumber+'"\t',t+='="'+e.operatorName+'"\t',t+="\r\n"});for(var e=window.btoa(window.unescape(encodeURIComponent(t))),n=atob(e),i=n.length,o=new Uint8ClampedArray(i);i--;)o[i]=n.charCodeAt(i);a="application/vnd.ms-excel",e=new Blob([o],{type:a});d()(e,"Report_Notification.xlsx",a)}}).catch(function(e){s.showAlertError=!0});case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)})},computed:{},mounted:(r=Object(o.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getReport();case 2:case"end":return e.stop()}},e,this)})),function(){return r.apply(this,arguments)})}),o=(a("1f90"),a("2877")),s=Object(o.a)(s,function(){var t=this,e=t.$createElement,e=t._self._c||e;return e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPage,expression:"loadingPage"}],staticClass:"page-report scrollable only-y"},[e("div",{staticClass:"page-header"},[e("h1",[t._v(t._s(t.$t("helpdesk.helpdesk"))+" Report")])]),t.pageNotAllowed?e("el-card",{attrs:{align:"center"}},[e("h2",{attrs:{align:"center"}},[t._v("Start messaging your customers today")]),e("p",{domProps:{innerHTML:t._s(t.$t("promote.desc.whatsapp"))}}),e("br"),e("br"),e("span",[e("el-button",{on:{click:function(e){return t.mailto()}}},[t._v("Send us e-mail")])],1)]):t._e(),t.pageNotAllowed||t.showAlertError?t._e():e("el-form",{attrs:{inline:!0}},[e("el-form-item",[e("el-date-picker",{attrs:{type:"daterange",format:"yyyy/MM/dd"},on:{change:function(e){return t.getReport()}},model:{value:t.startEndDate,callback:function(e){t.startEndDate=e},expression:"startEndDate"}})],1),e("el-form-item",[e("el-button",{staticClass:"animated fadeInRight",attrs:{type:"primary"},on:{click:t.download}},[e("i",{staticClass:"mdi mdi-download"}),t._v(" Download")])],1)],1),t.pageNotAllowed||t.showAlertError?t._e():e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPage,expression:"loadingPage"}],staticClass:"invoice"},[e("div",{staticClass:"invoice-top"},[e("div",{staticClass:"title",attrs:{align:"center"}},[e("h2",[t._v("Report")]),e("p",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[t._v('"CS - Customer Service" (Platform by DAMCorp)'),e("br"),t._v("Whatsapp Business API")])])]),e("div",[e("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","page-size":50,"current-page":t.currentPage,total:t.total},on:{"current-change":t.paginateReport}}),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingPage,expression:"loadingPage"}],staticStyle:{width:"100%",color:"#000 !important"},attrs:{data:t.ticketList,"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(246, 246, 245, 0.8)"}},[e("el-table-column",{attrs:{fixed:"",prop:"ticketCode",label:"Ticket","min-width":"120"}}),e("el-table-column",{attrs:{prop:"dateCreate",label:"Start Time","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(t.formatDate(e.row.dateCreate,"YYYY-MM-DD, HH:mm"))+" ")]}}],null,!1,689188257)}),e("el-table-column",{attrs:{prop:"dateClose",label:"End Time","min-width":"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s("-"==e.row.dateClose?"-":t.formatDate(e.row.dateClose,"YYYY-MM-DD, HH:mm"))+" ")]}}],null,!1,2613386228)}),e("el-table-column",{attrs:{prop:"chatDuration",label:"Duration","min-width":"250"}}),e("el-table-column",{attrs:{prop:"customerNumber",label:"Customer Contact","min-width":"300"}}),e("el-table-column",{attrs:{prop:"customerName",label:"Customer Name","min-width":"200"}}),e("el-table-column",{attrs:{prop:"channel",label:"Channel","min-width":"150"}}),e("el-table-column",{attrs:{prop:"operatorName",label:"Operator Name","min-width":"200"}}),e("el-table-column",{attrs:{prop:"firstOperatorResponse",label:"First Response Date","min-width":"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.firstOperatorResponse?t.formatDate(e.row.firstOperatorResponse,"YYYY-MM-DD, HH:mm"):"-")+" ")]}}],null,!1,1445935897)}),e("el-table-column",{attrs:{prop:"firstResponseTime",label:"First Response Time","min-width":"250"}}),e("el-table-column",{attrs:{prop:"rating",label:"Rating","min-width":"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(" "+t._s(e.row.rating||"-")+" ")]}}],null,!1,64860823)}),e("el-table-column",{attrs:{prop:"totalResponse",label:"Respond Count",width:"150"}}),e("el-table-column",{attrs:{prop:"totalOutbond",label:"Outbond Count",width:"150"}}),e("template",{staticStyle:{height:"500px"},slot:"empty"},[e("p",[e("img",{attrs:{src:a("7e53"),width:"100"}}),e("br"),t._v("No Report ")])])],2),e("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","page-size":50,"current-page":t.currentPage,total:t.total},on:{"current-change":t.paginateReport}})],1)]),t.showAlertError?e("el-card",{staticStyle:{"margin-bottom":"1em"}},[e("error-gope-siji")],1):t._e()],1)},[],!1,null,null,null);t.default=s.exports}}]);