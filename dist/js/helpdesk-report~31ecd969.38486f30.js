(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["helpdesk-report~31ecd969"],{"105e":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[e._v(e._s(e.$t("helpdesk.preferences")))])]),e.showAlertError?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[a("error-gope-siji")],1):e._e(),e.showAlert?a("el-card",{attrs:{align:"center"}},[a("h2",{attrs:{align:"center"}},[e._v("Start messaging your customers today")]),a("p",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1)]):e._e(),!e.showCard||e.showAlert||e.showAlertError?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[e.showCard?a("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[e.showCard?a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-select",{attrs:{"default-first-option":!0},on:{change:e.changeFilter},model:{value:e.ruleForm.phone_number,callback:function(t){e.$set(e.ruleForm,"phone_number",t)},expression:"ruleForm.phone_number"}},e._l(e.phoneNumberList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-form",{ref:"ruleForm",attrs:{model:e.ruleForm,rules:e.rules}},[e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Bot Asking Question")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"greeting.askQuestion"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea"},model:{value:e.ruleForm.greeting.askQuestion,callback:function(t){e.$set(e.ruleForm.greeting,"askQuestion",t)},expression:"ruleForm.greeting.askQuestion"}})],1),a("small",{staticStyle:{"font-size":"12px"},domProps:{innerHTML:e._s(e.note.askQuestion)}})],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Bot Info Ticket")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"greeting.ticketAssign"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea"},model:{value:e.ruleForm.greeting.ticketAssign,callback:function(t){e.$set(e.ruleForm.greeting,"ticketAssign",t)},expression:"ruleForm.greeting.ticketAssign"}})],1),a("small",{staticStyle:{"font-size":"12px"},domProps:{innerHTML:e._s(e.note.ticketAssign)}})],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Bot Close Ticket")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"greeting.ticketClose"}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea"},model:{value:e.ruleForm.greeting.ticketClose,callback:function(t){e.$set(e.ruleForm.greeting,"ticketClose",t)},expression:"ruleForm.greeting.ticketClose"}})],1),a("small",{staticStyle:{"font-size":"12px"},domProps:{innerHTML:e._s(e.note.ticketClose)}})],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Max Ticket Operator")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"max_load"}},[a("el-input",{attrs:{type:"number",id:"max_load",placeholder:"Maximal ticket handled by operator"},model:{value:e.ruleForm.max_load,callback:function(t){e.$set(e.ruleForm,"max_load",t)},expression:"ruleForm.max_load"}})],1),a("small",{staticStyle:{"font-size":"12px"}},[e._v("Info: Maximal count of ticket allowed to handle per Customer Service")])],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Masking Customer Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"masking_phone"}},[a("el-switch",{attrs:{"active-text":"On","inactive-text":"Off"},model:{value:e.ruleForm.masking_phone,callback:function(t){e.$set(e.ruleForm,"masking_phone",t)},expression:"ruleForm.masking_phone"}})],1),a("small",{staticStyle:{"font-size":"12px"}},[e._v("Info: Customer phone number will be masking like ********5155")])],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Show Ticket per CS Group")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"only_show_group_ticket"}},[a("el-switch",{attrs:{"active-text":"On","inactive-text":"Off"},model:{value:e.ruleForm.only_show_group_ticket,callback:function(t){e.$set(e.ruleForm,"only_show_group_ticket",t)},expression:"ruleForm.only_show_group_ticket"}})],1)],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Generate Rating Ticket URL")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-form-item",{attrs:{prop:"ticket_rating_enabled"}},[a("el-switch",{attrs:{"active-text":"On","inactive-text":"Off"},model:{value:e.ruleForm.ticket_rating_enabled,callback:function(t){e.$set(e.ruleForm,"ticket_rating_enabled",t)},expression:"ruleForm.ticket_rating_enabled"}})],1)],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:function(t){return e.updatePreferences("ruleForm")}}},[a("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update")))])],1)],1):e._e()],1),e.isSubscribe?e._e():a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):e._e()],1):e._e()],1)],1)},n=[],i=(a("96cf"),a("1da1")),o=a("ade3"),s=(a("bce9"),a("271f")),l=(a("8055"),a("db49")),c=(a("c0d6"),a("7f45")),u=a.n(c),m=(a("b730"),a("bc3a"),{data:function(){var e;return e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,loadingDetail:!1,ruleForm:{phone_number:"",greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:""},max_load:5,masking_phone:!0,only_show_group_ticket:!1,ticket_rating_enabled:!1},rules:{"greeting.askName":[{required:!0,message:"Please input Bot Asking Name",trigger:"blur"}],"greeting.askQuestion":[{required:!0,message:"Please input Bot Asking Question",trigger:"blur"}],"greeting.ticketAssign":[{required:!0,message:"Please input Bot Info Ticket",trigger:"blur"}],"greeting.ticketClose":[{required:!0,message:"Please input Bot Close Ticket",trigger:"blur"}],max_load:[{required:!0,message:"Please input Max Ticket Operator",trigger:"blur"}]},note:{askQuestion:"Note: Use {{name}} for specifying name.",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number.",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number. Use {{ticketRating}} for generated link for user give rating to his/her ticket, make sure you have enabled option Rate Ticket on the below"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1},Object(o["a"])(e,"showAlertError",!1),Object(o["a"])(e,"alwaysOnline",!0),Object(o["a"])(e,"onlineAt",[[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()]]),Object(o["a"])(e,"onlineTime",[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()]),Object(o["a"])(e,"selectedDay",[]),e},methods:{changeFilter:function(){this.loadPreferences()},copyToClipboard:function(){var e=document.querySelector("#api_key");e.select();try{document.execCommand("copy");this.$message.success({showClose:!0,duration:3e3,message:"Copied to clipboard"})}catch(t){}window.getSelection().removeAllRanges()},generateKey:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingBtnGenerate=!0,e.next=3,Object(s["a"])({method:"get",url:l["a"].chatApi+"auth/preferences/generate-key/"+this.ruleForm.phone_number}).then((function(e){200==e.data.ec?t.api_key=e.data.data.key:t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})})).catch((function(e){t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})}));case 3:this.loadingBtnGenerate=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadWA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(s["a"])({method:"post",url:l["a"].baseApi+"user/detail/number"}).then((function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.ruleForm.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0})).catch((function(e){t.showAlertError=!0}));case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadPreferences:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(s["a"])({method:"get",url:l["a"].chatApi+"auth/preferences/"+this.ruleForm.phone_number}).then((function(e){200==e.data.ec?(t.ruleForm.greeting=e.data.data.greeting,t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline=e.data.data.alwaysOnline,t.isSubscribe=!0,t.ruleForm.max_load=e.data.data.max_load,t.ruleForm.masking_phone=void 0==e.data.data.masking_phone||e.data.data.masking_phone,t.ruleForm.only_show_group_ticket=void 0!=e.data.data.only_show_group_ticket&&e.data.data.only_show_group_ticket,t.ruleForm.ticket_rating_enabled=void 0!=e.data.data.ticket_rating_enabled&&e.data.data.ticket_rating_enabled):"not_subscribe"==e.data.message&&(t.isSubscribe=!1)})).catch((function(e){}));case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updatePreferences:function(e){var t=this;this.$refs[e].validate(function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(a){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return t.loadingBtn=!0,r={greeting:t.ruleForm.greeting,autoClose:t.autoClose,max_load:t.ruleForm.max_load,masking_phone:t.ruleForm.masking_phone,only_show_group_ticket:t.ruleForm.only_show_group_ticket,ticket_rating_enabled:t.ruleForm.ticket_rating_enabled},e.next=5,Object(s["a"])({method:"patch",url:l["a"].chatApi+"auth/preferences/"+t.ruleForm.phone_number,data:r}).then((function(e){200==e.data.ec?t.$swal(t.$t("success"),t.$t("success"),"success").then((function(e){t.loadPreferences()})):t.$swal(t.$t("error"),t.$t("error_text"),"warning")})).catch((function(e){t.$swal(t.$t("error"),t.$t("error_text"),"error")}));case 5:t.loadingBtn=!1,e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),d=m,p=a("2877"),h=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=h.exports},1637:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[r("div",{staticClass:"page-header"},[r("h1",[e._v(e._s(e.$t("helpdesk.preferences")))])]),e.showAlertError?r("el-card",{staticStyle:{"margin-bottom":"1em"}},[r("error-gope-siji")],1):e._e(),e.showAlert?r("el-card",{attrs:{align:"center"}},[r("h2",{attrs:{align:"center"}},[e._v("Start messaging your customers today")]),r("p",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),r("br"),r("br"),r("span",[r("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1)]):e._e(),r("div",[r("el-dialog",{attrs:{title:"New Quick Reply",visible:e.dialogNew,width:"40%"},on:{"update:visible":function(t){e.dialogNew=t}}},[r("el-form",{ref:"form",attrs:{model:e.newForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"text",autofocus:"true",placeholder:"Greeting",max:"50"},model:{value:e.newForm.title,callback:function(t){e.$set(e.newForm,"title",t)},expression:"newForm.title"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[e._v(e._s(e.newForm.title.length)+"/50 character(s)")])],1),r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"textarea",autofocus:"true",rows:"6",max:"1000",placeholder:"Hello, this is new quick reply!"},model:{value:e.newForm.quickReply,callback:function(t){e.$set(e.newForm,"quickReply",t)},expression:"newForm.quickReply"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[e._v(e._s(e.newForm.quickReply.length)+"/1000 character(s)")])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.quickReplyAdd}},[e._v("Add")]),r("el-button",{on:{click:function(t){e.dialogNew=!1}}},[e._v("Close")])],1)],1)],1),r("div",[r("el-dialog",{attrs:{title:"Edit Quick Reply",visible:e.dialogEdit,width:"40%"},on:{"update:visible":function(t){e.dialogEdit=t}}},[r("el-form",{ref:"form",attrs:{model:e.editForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"text",autofocus:"true",placeholder:"Greeting",max:"50"},model:{value:e.editForm.title,callback:function(t){e.$set(e.editForm,"title",t)},expression:"editForm.title"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[e._v(e._s(e.editForm.title.length)+"/50 character(s)")])],1),r("el-form-item",{attrs:{label:"Quick Reply"}},[r("el-input",{attrs:{type:"textarea",autofocus:"true",max:"1000",rows:"6",placeholder:"Hello, this is new quick reply!"},model:{value:e.editForm.quickReply,callback:function(t){e.$set(e.editForm,"quickReply",t)},expression:"editForm.quickReply"}}),r("span",{staticStyle:{float:"right","font-size":"10px"}},[e._v(e._s(e.editForm.quickReply.length)+"/1000 character(s)")])],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.quickReplyUpdate}},[r("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update")))]),r("el-button",{on:{click:function(t){e.dialogEdit=!1}}},[e._v("Close")])],1)],1)],1),!e.showCard||e.showAlert||e.showAlertError?e._e():r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[e.showCard?r("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[e.showCard?r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[e._v("Phone Number")])]),r("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-select",{attrs:{"default-first-option":!0},on:{change:e.changeFilter},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}},e._l(e.phoneNumberList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e.isSubscribe?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[r("h5",[e._v("Quick Reply")])]),r("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[r("el-button",{staticClass:"button-new-tag",on:{click:e.newQuickClicked}},[e._v("+ New Quick Reply")]),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.quickReply}},[r("el-table-column",{attrs:{prop:"title",label:"Title"}}),r("el-table-column",{attrs:{prop:"quickReply",label:"Text"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-tooltip",{staticClass:"item",attrs:{effect:"dark","open-delay":3e3,content:t.row.quickReply,placement:"top"}},[r("span",[e._v(e._s(e.concatText(t.row.quickReply)))])])]}}],null,!1,2930269970)}),r("el-table-column",{attrs:{prop:"quickReply",label:"#",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){return e.editQuickReply(t.$index)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.deleteQuickReply(t.$index)}}})]}}],null,!1,3993954137)}),r("template",{staticStyle:{height:"400px"},slot:"empty"},[r("p",{staticStyle:{color:"#909399"},attrs:{align:"center"}},[r("img",{attrs:{src:a("e44b"),width:"100"}}),r("br"),e._v("You do not have any quick reply ")])])],2)],1)],1):e._e(),e.isSubscribe?r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}})],1):e._e(),e.isSubscribe?e._e():r("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[r("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):e._e()],1):e._e()],1)],1)},n=[],i=(a("20d6"),a("7514"),a("96cf"),a("1da1")),o=a("ade3"),s=(a("bce9"),a("271f")),l=(a("8055"),a("db49")),c=(a("c0d6"),a("7f45")),u=a.n(c),m=(a("b730"),a("bc3a"),{data:function(){var e;return e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,loadingDetail:!1,form:{phone_number:""},greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:""},note:{askQuestion:"Note: Use {{name}} for specifying name",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1},Object(o["a"])(e,"showAlertError",!1),Object(o["a"])(e,"alwaysOnline",!0),Object(o["a"])(e,"onlineAt",[[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()]]),Object(o["a"])(e,"onlineTime",[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()]),Object(o["a"])(e,"selectedDay",[]),Object(o["a"])(e,"quickReply",[]),Object(o["a"])(e,"newForm",{title:"",quickReply:""}),Object(o["a"])(e,"dialogNew",!1),Object(o["a"])(e,"editForm",{title:"",quickReply:""}),Object(o["a"])(e,"dialogEdit",!1),e},methods:{concatText:function(e){return e.length>50?e.substring(0,50)+"...":e},newQuickClicked:function(){this.dialogNew=!0},quickReplyAdd:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=_.find(this.quickReply,(function(e){return e.title==n.newForm.title})),!t){e.next=5;break}this.$message.warning({showClose:!0,duration:5e3,message:this.$t("helpdesk.quickReply.exist")}),e.next=12;break;case 5:return a=Object.assign({},this.newForm),this.quickReply.push(a),r=this.quickReply.length-1,this.newForm={title:"",quickReply:""},e.next=11,this.updatePreferences("",r);case 11:this.dialogNew=!1;case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),quickReplyUpdate:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n,i,o=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=_.find(this.quickReply,(function(e){return e.title==o.editForm.title})),a=_.findIndex(this.quickReply,(function(e){return e.title==o.editForm.title})),!t||this.editForm.index==a){e.next=6;break}this.$message.warning({showClose:!0,duration:5e3,message:this.$t("helpdesk.quickReply.exist")}),e.next=16;break;case 6:return r=Object.assign({},this.editForm),n=this.editForm.index,this.quickReply[n]={title:r.title,quickReply:r.quickReply},i=Object.assign([],this.quickReply),this.quickReply=[],this.quickReply=i,this.editForm={title:"",quickReply:""},e.next=15,this.updatePreferences("update",n);case 15:this.dialogEdit=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),editQuickReply:function(e){this.editForm=Object.assign({},this.quickReply[e]),this.editForm.index=e,this.dialogEdit=!0},deleteQuickReply:function(e){var t=this;this.$swal({title:this.$t("delete_confirmation"),text:"Delete this quick reply?",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:this.$t("delete_confirmation_button"),showLoaderOnConfirm:!0,preConfirm:function(){return t.quickReply.splice(e,1),Object(s["a"])({method:"patch",url:l["a"].chatApi+"auth/preferences/"+t.form.phone_number,data:{quickReply:t.quickReply,index:e,delete:!0}}).then((function(e){return e}))}}).then((function(e){200==e.data.ec?(t.$swal(t.$t("success"),t.$t("success"),"success").then((function(e){})),t.loadPreferences()):t.$swal(t.$t("error"),t.$t("error_text"),"warning"),t.loadingBtn=!1}))},changeFilter:function(){this.loadPreferences()},loadWA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(s["a"])({method:"post",url:l["a"].baseApi+"user/detail/number"}).then((function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.form.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0})).catch((function(e){t.showAlertError=!0}));case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadPreferences:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(s["a"])({method:"get",url:l["a"].chatApi+"auth/preferences/"+this.form.phone_number}).then((function(e){200==e.data.ec?(t.greeting=e.data.data.greeting,t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline=e.data.data.alwaysOnline,t.isSubscribe=!0,t.quickReply=e.data.data.quickReply||[]):"not_subscribe"==e.data.message&&(t.isSubscribe=!1)})).catch((function(e){}));case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updatePreferences:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t,a){var r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingBtn=!0,r={quickReply:this.quickReply},"update"==t&&(r.update=!0),r.index=a,e.next=6,Object(s["a"])({method:"patch",url:l["a"].chatApi+"auth/preferences/"+this.form.phone_number,data:r}).then((function(e){n.dialogNew=!1,200==e.data.ec?n.$swal(n.$t("success"),n.$t("success"),"success").then((function(e){})):n.$swal(n.$t("error"),n.$t("error_text"),"warning")})).catch((function(e){n.dialogNew=!1,n.$swal(n.$t("error"),n.$t("error_text"),"error")}));case 6:this.loadingBtn=!1;case 7:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),d=m,p=(a("4892"),a("2877")),h=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=h.exports},"1f90":function(e,t,a){"use strict";a("7944")},"2f21":function(e,t,a){"use strict";var r=a("79e5");e.exports=function(e,t){return!!e&&r((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},3077:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[e._v(e._s(e.$t("helpdesk.preferences")))])]),e.showAlertError?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[a("error-gope-siji")],1):e._e(),e.showAlert?a("el-card",{attrs:{align:"center"}},[a("h2",{attrs:{align:"center"}},[e._v("Start messaging your customers today")]),a("p",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1)]):e._e(),!e.showCard||e.showAlert||e.showAlertError?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[e.showCard?a("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[e.showCard?a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-select",{attrs:{"default-first-option":!0},on:{change:e.changeFilter},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}},e._l(e.phoneNumberList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Always Online")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-switch",{attrs:{"active-text":"On","active-value":!0,"inactive-text":"Off","inactive-value":!1},model:{value:e.alwaysOnline,callback:function(t){e.alwaysOnline=t},expression:"alwaysOnline"}}),e._l([1,2,3,4,5,6,7],(function(t){return e.alwaysOnline?e._e():a("el-row",{key:t,staticClass:"mt-20",attrs:{gutter:30}},[a("el-col",{staticClass:"mt-10",attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v(e._s(e.$t("day."+t)))])]),a("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-time-picker",{attrs:{"is-range":"",start:"08:00",end:"17:00",format:"HH:mm",step:"00:30","range-separator":"To",disabled:e.timePickerDisabled[t-1],"start-placeholder":"Start time","end-placeholder":"End time"},on:{change:function(a){return e.timePickerChange(e.onlineTime[t-1],t)}},model:{value:e.onlineTime[t-1],callback:function(a){e.$set(e.onlineTime,t-1,a)},expression:"onlineTime[i-1]"}}),e._v("   "),a("el-switch",{attrs:{"active-text":"24 Hours","active-value":!0,"inactive-text":"","inactive-value":!1},on:{change:function(a){return e.setTimeAlways(e.timePickerDisabled[t-1],t)}},model:{value:e.timePickerDisabled[t-1],callback:function(a){e.$set(e.timePickerDisabled,t-1,a)},expression:"timePickerDisabled[i-1]"}})],1)],1)}))],2)],1):e._e(),e.isSubscribe&&0==e.alwaysOnline?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Bot Auto Responder Message")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-input",{attrs:{autosize:{minRows:3,maxRows:6},type:"textarea",placeholder:"Message your customer service currently available at some time"},model:{value:e.greeting.autoResponder,callback:function(t){e.$set(e.greeting,"autoResponder",t)},expression:"greeting.autoResponder"}})],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.updatePreferences}},[a("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update")))])],1)],1):e._e(),e.isSubscribe?e._e():a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):e._e()],1):e._e()],1)],1)},n=[],o=(a("55dd"),a("6b54"),a("20d6"),a("96cf"),a("1da1")),s=(a("ac6a"),a("456d"),a("ade3")),l=(a("bce9"),a("271f")),c=(a("8055"),a("db49")),u=(a("c0d6"),a("7f45")),m=a.n(u),d=(a("b730"),a("bc3a"),{data:function(){var e;return e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingDetail:!1,loadingBtn:!1,form:{phone_number:""},greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:"",autoResponder:"Sorry, we are currently offline. Please contact us again at 08:00 tommorow. Thank you!"},note:{askQuestion:"Note: Use {{name}} for specifying name",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1},Object(s["a"])(e,"showAlertError",!1),Object(s["a"])(e,"alwaysOnline",!0),Object(s["a"])(e,"onlineTime",[]),Object(s["a"])(e,"tempOnlineTime",[m()().set({hour:8,minute:0,second:0}).toLocaleString(),m()().set({hour:17,minute:0,second:0}).toLocaleString()]),Object(s["a"])(e,"selectedDay",[]),Object(s["a"])(e,"currentCheck",[]),Object(s["a"])(e,"checkedDay",[]),Object(s["a"])(e,"savedSchedule",[]),Object(s["a"])(e,"currentSchedule",[]),Object(s["a"])(e,"timePickerDisabled",[]),Object(s["a"])(e,"availableDay",[1,2,3,4,5,6,7]),e},methods:{removeDay:function(e,t){var a=this.currentSchedule[t],r=Object.keys(a[e]);this.availableDay.push(parseInt(r)),this.checkedDay=_.remove(this.checkedDay,(function(e){return parseInt(e)!=parseInt(r)})),this.currentSchedule[t].splice(e,1)},getKeys:function(e){return Object.keys(e)},changeFilter:function(){this.loadPreferences()},copyToClipboard:function(){var e=document.querySelector("#api_key");e.select();try{document.execCommand("copy");this.$message.success({showClose:!0,duration:3e3,message:"Copied to clipboard"})}catch(t){}window.getSelection().removeAllRanges()},generateKey:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingBtnGenerate=!0,e.next=3,Object(l["a"])({method:"get",url:c["a"].chatApi+"auth/preferences/generate-key/"+this.form.phone_number}).then((function(e){200==e.data.ec?t.api_key=e.data.data.key:t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})})).catch((function(e){t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})}));case 3:this.loadingBtnGenerate=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadWA:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(l["a"])({method:"post",url:c["a"].baseApi+"user/detail/number"}).then((function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.form.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0})).catch((function(e){t.showAlertError=!0}));case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadPreferences:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(l["a"])({method:"get",url:c["a"].chatApi+"auth/preferences/"+this.form.phone_number}).then((function(e){if(200==e.data.ec){for(var a in e.data.data.greeting)"undefined"!=typeof e.data.data.greeting[a]&&(t.greeting[a]=e.data.data.greeting[a]);if(t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline="undefined"==typeof e.data.data.alwaysOnline||e.data.data.alwaysOnline,e.data.data.onlineSchedule)if(e.data.data.onlineSchedule.length>0)for(var r in t.selectedDay=e.data.data.onlineSchedule,t.selectedDay){var n=t.selectedDay[r];null!=n?t.onlineTime[r]=[m()(n[Object.keys(n)].time[0]).toLocaleString(),m()(n[Object.keys(n)].time[1]).toLocaleString()]:t.onlineTime[i]=[m()().set({hour:8,minute:0,second:0}).toLocaleString(),m()().set({hour:17,minute:0,second:0}).toLocaleString()],"00:00|23:59"==n[Object.keys(n)].readable&&(t.timePickerDisabled[r]=!0)}else for(var o in[1,2,3,4,5,6,7])t.onlineTime[o]=[m()().set({hour:8,minute:0,second:0}).toLocaleString(),m()().set({hour:17,minute:0,second:0}).toLocaleString()],t.timePickerDisabled[o]=!1,t.selectedDay[o]=Object(s["a"])({},parseInt(o)+1,{readable:m()(t.onlineTime[o][0]).format("HH:mm")+"|"+m()(t.onlineTime[o][1]).format("HH:mm"),time:[m()(t.onlineTime[o][0]).format(),m()(t.onlineTime[o][1]).format()]});else for(var l in[1,2,3,4,5,6,7])t.onlineTime[l]=[m()().set({hour:8,minute:0,second:0}).toLocaleString(),m()().set({hour:17,minute:0,second:0}).toLocaleString()],t.timePickerDisabled[l]=!1,t.selectedDay[l]=Object(s["a"])({},parseInt(l)+1,{readable:m()(t.onlineTime[l][0]).format("HH:mm")+"|"+m()(t.onlineTime[l][1]).format("HH:mm"),time:[m()(t.onlineTime[l][0]).format(),m()(t.onlineTime[l][1]).format()]});t.isSubscribe=!0}else"not_subscribe"==e.data.message&&(t.isSubscribe=!1)})).catch((function(e){}));case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updatePreferences:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={alwaysOnline:this.alwaysOnline,greeting:this.greeting},0!=this.alwaysOnline){e.next=11;break}if(a=m()().set({hour:0,minute:0,second:0}),r=m()().set({hour:23,minute:59,second:0}),this.timePickerDisabled.forEach((function(e,t){!0===e&&(n.selectedDay[t]=Object(s["a"])({},t+1,{readable:a.format("HH:mm")+"|"+r.format("HH:mm"),time:[a.format(),r.format()]}))})),t.onlineSchedule=this.selectedDay,""!=this.greeting.autoResponder&&""!=this.greeting.autoResponder.trim()&&7==this.selectedDay.length){e.next=9;break}return this.$message.error({showClose:!1,message:"All field is required"}),e.abrupt("return");case 9:e.next=12;break;case 11:t.onlineSchedule=[];case 12:return this.loadingBtn=!0,e.next=15,Object(l["a"])({method:"patch",url:c["a"].chatApi+"auth/preferences/"+this.form.phone_number,data:t}).then((function(e){200==e.data.ec?n.$swal(n.$t("success"),n.$t("success"),"success").then((function(e){n.loadPreferences()})):n.$swal(n.$t("error"),n.$t("error_text"),"warning")})).catch((function(e){n.loadingBtn=!1,n.$swal(n.$t("error"),n.$t("error_text"),"error")}));case 15:this.loadingBtn=!1;case 16:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setTimeAlways:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,a){var r,n,i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:1==t?(r=m()().set({hour:0,minute:0,second:0}),n=m()().set({hour:23,minute:59,second:0}),this.onlineTime[a-1]=[r.toLocaleString(),n.toLocaleString()],this.selectedDay[a-1]=Object(s["a"])({},a,{readable:r.format("HH:mm")+"|"+n.format("HH:mm"),time:[r.format(),n.format()]})):(i=m()().set({hour:8,minute:0,second:0}),o=m()().set({hour:17,minute:0,second:0}),this.onlineTime[a-1]=[i.toLocaleString(),o.toLocaleString()],this.selectedDay[a-1]=Object(s["a"])({},a,{readable:i.format("HH:mm")+"|"+o.format("HH:mm"),time:[i.format(),o.format()]}));case 1:case"end":return e.stop()}}),e,this)})));function t(t,a){return e.apply(this,arguments)}return t}(),checkIfDis:function(e){return-1==this.availableDay.indexOf(e)},checkIfNull:function(e){return e.length>0},checkedChange:function(e,t){this.selectedDay;var a=[m()(this.onlineTime[0]).format("HH:mm"),m()(this.onlineTime[1]).format("HH:mm")],r=a.join("|"),n=t.target.value,i=Object.keys(this.selectedDay).indexOf(r);if(-1!=i){var o=_.findIndex(this.selectedDay[r],(function(e){return Object.keys(e).toString()==n.toString()}));if(-1==o)this.selectedDay[r].push(Object(s["a"])({},n,{time:[m()(this.onlineTime[0]),m()(this.onlineTime[1])],readable:r})),this.selectedDay[r]=_.sortBy(this.selectedDay[r],(function(e){return Object.keys(e)}));else if(0==e){var l=o;this.selectedDay[r].splice(l,1),this.selectedDay[r]=_.sortBy(this.selectedDay[r],(function(e){return Object.keys(e)}))}}else"undefined"==typeof this.selectedDay[r]&&(this.selectedDay[r]=[]),this.selectedDay[r].push(Object(s["a"])({},n,{time:[m()(this.onlineTime[0]),m()(this.onlineTime[1])],readable:r})),this.selectedDay[r].sort()},timePickerChange:function(e,t){this.selectedDay[t-1]=Object(s["a"])({},t,{readable:m()(e[0]).format("HH:mm")+"|"+m()(e[1]).format("HH:mm"),time:[m()(e[0]).format(),m()(e[1]).format()]})}},watch:{onlineTime:function(){var e=this;this.onlineTime.forEach((function(t){null!=t&&void 0!=t||e.$message.error({showClose:!1,message:"All field is required"})}))}},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),p=d,h=a("2877"),g=Object(h["a"])(p,r,n,!1,null,null,null);t["default"]=g.exports},4892:function(e,t,a){"use strict";a("8d16")},"55dd":function(e,t,a){"use strict";var r=a("5ca1"),n=a("d8e8"),i=a("4bf8"),o=a("79e5"),s=[].sort,l=[1,2,3];r(r.P+r.F*(o((function(){l.sort(void 0)}))||!o((function(){l.sort(null)}))||!a("2f21")(s)),"Array",{sort:function(e){return void 0===e?s.call(i(this)):s.call(i(this),n(e))}})},7944:function(e,t,a){},"8d16":function(e,t,a){},"98af":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[e._v(e._s(e.$t("helpdesk.preferences")))])]),e.showAlertError?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[a("error-gope-siji")],1):e._e(),e.showAlert?a("el-card",{attrs:{align:"center"}},[a("h2",{attrs:{align:"center"}},[e._v("Start messaging your customers today")]),a("p",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1)]):e._e(),!e.showCard||e.showAlert||e.showAlertError?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDetail,expression:"loadingDetail"}],staticStyle:{"margin-bottom":"1em"}},[e.showCard?a("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[e.showCard?a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-select",{attrs:{"default-first-option":!0},on:{change:e.changeFilter},model:{value:e.form.phone_number,callback:function(t){e.$set(e.form,"phone_number",t)},expression:"form.phone_number"}},e._l(e.phoneNumberList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("API Key")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-input",{attrs:{type:"text",id:"api_key",placeholder:"Your API's key",readonly:""},model:{value:e.api_key,callback:function(t){e.api_key=t},expression:"api_key"}},[a("el-button",{attrs:{slot:"append"},on:{click:e.copyToClipboard},slot:"append"},[a("i",{staticClass:"mdi mdi-content-copy"})]),a("el-button",{attrs:{slot:"append",loading:e.loadingBtnGenerate},on:{click:e.generateKey},slot:"append"},[a("i",{staticClass:"mdi mdi-key-variant"}),e._v(" Generate")])],1)],1)],1):e._e(),e.isSubscribe?a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.updatePreferences}},[a("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update")))])],1)],1):e._e(),e.isSubscribe?e._e():a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-alert",{attrs:{title:"Info",type:"info","show-icon":"",description:"This number is not connecting to Helpdesk service"}})],1)],1):e._e()],1):e._e()],1)],1)},n=[],i=(a("96cf"),a("1da1")),o=a("ade3"),s=(a("bce9"),a("271f")),l=(a("8055"),a("db49")),c=(a("c0d6"),a("7f45")),u=a.n(c),m=(a("b730"),a("bc3a"),{data:function(){var e;return e={showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,loadingDetail:!1,form:{phone_number:""},greeting:{askName:"",askQuestion:"",ticketAssign:"",ticketClose:""},note:{askQuestion:"Note: Use {{name}} for specifying name",ticketAssign:"Note: Use {{name}} for specifying name and {{ticketNumber}} for specifying ticket number",ticketClose:"Note: Use {{ticketNumber}} for specifying ticket number"},isSubscribe:!1,autoClose:!1,api_key:"",phoneNumberList:[],loadingBtnGenerate:!1},Object(o["a"])(e,"showAlertError",!1),Object(o["a"])(e,"alwaysOnline",!0),Object(o["a"])(e,"onlineAt",[[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()],[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()]]),Object(o["a"])(e,"onlineTime",[u()().set({hour:8,minute:0}).toLocaleString(),u()().set({hour:17,minute:0}).toLocaleString()]),Object(o["a"])(e,"selectedDay",[]),e},methods:{changeFilter:function(){this.loadPreferences()},copyToClipboard:function(){var e=document.querySelector("#api_key");e.select();try{document.execCommand("copy");this.$message.success({showClose:!0,duration:3e3,message:"Copied to clipboard"})}catch(t){}window.getSelection().removeAllRanges()},generateKey:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingBtnGenerate=!0,e.next=3,Object(s["a"])({method:"get",url:l["a"].chatApi+"auth/preferences/generate-key/"+this.form.phone_number}).then((function(e){200==e.data.ec?t.api_key=e.data.data.key:t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})})).catch((function(e){t.$message.error({showClose:!0,duration:3e3,message:"Failed generate key"})}));case 3:this.loadingBtnGenerate=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadWA:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(s["a"])({method:"post",url:l["a"].baseApi+"user/detail/number"}).then((function(e){200==e.data.ec?(t.phoneNumberList=e.data.data,t.form.phone_number=t.phoneNumberList[0]):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlert=!0:t.showAlertError=!0})).catch((function(e){t.showAlertError=!0}));case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadPreferences:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDetail=!0,e.next=3,Object(s["a"])({method:"get",url:l["a"].chatApi+"auth/preferences/"+this.form.phone_number}).then((function(e){200==e.data.ec?(t.greeting=e.data.data.greeting,t.autoClose=e.data.data.autoClose?"on":"off",t.api_key=e.data.data.api_key,t.alwaysOnline=e.data.data.alwaysOnline,t.isSubscribe=!0):"not_subscribe"==e.data.message&&(t.isSubscribe=!1)})).catch((function(e){}));case 3:this.loadingDetail=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updatePreferences:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingBtn=!0,t={api_key:this.api_key},e.next=4,Object(s["a"])({method:"patch",url:l["a"].chatApi+"auth/preferences/"+this.form.phone_number,data:t}).then((function(e){200==e.data.ec?a.$swal(a.$t("success"),a.$t("success"),"success").then((function(e){a.loadPreferences()})):a.$swal(a.$t("error"),a.$t("error_text"),"warning")})).catch((function(e){a.$swal(a.$t("error"),a.$t("error_text"),"error")}));case 4:this.loadingBtn=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadWA();case 2:this.loadPreferences();case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),d=m,p=a("2877"),h=Object(p["a"])(d,r,n,!1,null,null,null);t["default"]=h.exports},d7ce:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"page-report scrollable only-y"},[r("div",{staticClass:"page-header"},[r("h1",[e._v(e._s(e.$t("helpdesk.helpdesk"))+" Report")])]),e.pageNotAllowed?r("el-card",{attrs:{align:"center"}},[r("h2",{attrs:{align:"center"}},[e._v("Start messaging your customers today")]),r("p",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),r("br"),r("br"),r("span",[r("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1)]):e._e(),e.pageNotAllowed||e.showAlertError?e._e():r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("el-date-picker",{attrs:{type:"daterange",format:"yyyy/MM/dd"},on:{change:function(t){return e.getReport()}},model:{value:e.startEndDate,callback:function(t){e.startEndDate=t},expression:"startEndDate"}})],1),r("el-form-item",[r("el-button",{staticClass:"animated fadeInRight",attrs:{type:"primary"},on:{click:e.download}},[r("i",{staticClass:"mdi mdi-download"}),e._v(" Download")])],1)],1),e.pageNotAllowed||e.showAlertError?e._e():r("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"invoice"},[r("div",{staticClass:"invoice-top"},[r("div",{staticClass:"title",attrs:{align:"center"}},[r("h2",[e._v("Report")]),r("p",{staticStyle:{"font-weight":"bold","font-size":"14px"}},[e._v('"CS - Customer Service" (Platform by DAMCorp)'),r("br"),e._v("Whatsapp Business API")])])]),r("div",[r("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","page-size":50,"current-page":e.currentPage,total:e.total},on:{"current-change":e.paginateReport}}),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticStyle:{width:"100%",color:"#000 !important"},attrs:{data:e.ticketList,"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(246, 246, 245, 0.8)"}},[r("el-table-column",{attrs:{fixed:"",prop:"ticketCode",label:"Ticket","min-width":"120"}}),r("el-table-column",{attrs:{prop:"dateCreate",label:"Start Time","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.formatDate(t.row.dateCreate,"YYYY-MM-DD, HH:mm"))+" ")]}}],null,!1,689188257)}),r("el-table-column",{attrs:{prop:"dateClose",label:"End Time","min-width":"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s("-"==t.row.dateClose?"-":e.formatDate(t.row.dateClose,"YYYY-MM-DD, HH:mm"))+" ")]}}],null,!1,2613386228)}),r("el-table-column",{attrs:{prop:"chatDuration",label:"Duration","min-width":"250"}}),r("el-table-column",{attrs:{prop:"customerNumber",label:"Customer Contact","min-width":"300"}}),r("el-table-column",{attrs:{prop:"customerName",label:"Customer Name","min-width":"200"}}),r("el-table-column",{attrs:{prop:"channel",label:"Channel","min-width":"150"}}),r("el-table-column",{attrs:{prop:"operatorName",label:"Operator Name","min-width":"200"}}),r("el-table-column",{attrs:{prop:"firstOperatorResponse",label:"First Response Date","min-width":"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.firstOperatorResponse?e.formatDate(t.row.firstOperatorResponse,"YYYY-MM-DD, HH:mm"):"-")+" ")]}}],null,!1,1445935897)}),r("el-table-column",{attrs:{prop:"firstResponseTime",label:"First Response Time","min-width":"250"}}),r("el-table-column",{attrs:{prop:"rating",label:"Rating","min-width":"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.rating||"-")+" ")]}}],null,!1,64860823)}),r("el-table-column",{attrs:{prop:"totalResponse",label:"Respond Count",width:"150"}}),r("el-table-column",{attrs:{prop:"totalOutbond",label:"Outbond Count",width:"150"}}),r("template",{staticStyle:{height:"500px"},slot:"empty"},[r("p",[r("img",{attrs:{src:a("7e53"),width:"100"}}),r("br"),e._v("No Report ")])])],2),r("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","page-size":50,"current-page":e.currentPage,total:e.total},on:{"current-change":e.paginateReport}})],1)]),e.showAlertError?r("el-card",{staticStyle:{"margin-bottom":"1em"}},[r("error-gope-siji")],1):e._e()],1)},n=[],i=(a("6aa2"),a("ac6a"),a("96cf"),a("1da1")),o=a("2ef0"),s=a.n(o),l=a("271f"),c=a("db49"),u=(a("c0d6"),a("7f45")),m=a.n(u),d=(a("b730"),a("aeb1")),p=a.n(d),h=(a("bc3a"),{data:function(){return{loadingPage:!1,reportData:[],dateRange:[new Date,new Date],startDate:new Date,endDate:new Date,startEndDate:[new Date,new Date],excelFields:{Date:"dateCreate","Time start":"timeStart","Time end":"timeEnd","Handphone Number":"customerPhone","Number of Reponds":"totalResponse","CS Name":"operatorName"},excelData:[],excelFilename:"Report CS (Platform by DAMCorp).xlsx",pageNotAllowed:!1,ticketList:[],currentPage:1,total:0,showAlertError:!1}},methods:{print:function(){window.print()},download:function(){this.getReport("download")},formatDate:function(e,t){return m()(e).format(t)},paginateReport:function(e){this.currentPage=e,this.getReport()},getReport:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a,r,n=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",a=i.length>1&&void 0!==i[1]&&i[1],this.loadingPage=!0,r={url:c["a"].chatApi+"report/helpdesk/?"+t,method:"post",params:{page:this.currentPage,view:1==a||null},data:{startDate:m()(this.startEndDate[0]).format("YYYY-MM-DD"),endDate:m()(this.startEndDate[1]).format("YYYY-MM-DD")}},"download"==t&&(r.responseType="arraybuffer"),e.next=7,Object(l["a"])(r).then((function(e){if(200==e.data.ec||"download"==t)if("download"==t)if(-1==e.headers["content-type"].indexOf("application/json"))try{var a=window.URL.createObjectURL(new Blob([e.data])),r=document.createElement("a");r.href=a,r.setAttribute("download","Report CS (Platform by DAMCorp).xlsx"),r.click()}catch(o){}else n.$swal(n.$t("error"),n.$t("helpdesk.".concat(e.data.message)),"error");else{n.ticketList=[],n.excelData=[];var i=e.data.data.ticket;e.data.data.companyNumber;n.excelFilename="Report CS ".concat([n.formatDate(n.startDate,"YYYY-MM-DD"),n.formatDate(n.endDate,"YYYY-MM-DD")].join(" to ")," (Platform by DAMCorp).xls"),n.reportData=s()(i).groupBy((function(e){return e.operatorNumber})).map((function(e,t){return{number:t,ticket:e}})).value(),s.a.forEach(n.reportData,(function(e){s.a.forEach(e.ticket,(function(e){n.ticketList.push(e)}))})),s.a.forEach(e.data.data.ticket,(function(e){n.excelData.push({dateCreate:n.formatDate(e.dateCreate,"YYYY-MM-DD"),timeStart:n.formatDate(e.dateCreate,"HH:mm"),timeEnd:"-"==e.dateClose?"-":n.formatDate(e.dateClose,"HH:mm"),customerPhone:e.customerNumber,totalResponse:e.totalResponse,operatorName:e.operatorName})})),n.total=e.data.data.total}else"not_subscribe"!=e.data.message?n.$swal(n.$t("error"),n.$t("helpdesk.".concat(e.data.message)),"error"):n.pageNotAllowed=!0})).catch((function(e){console.log(e),n.showAlertError=!0}));case 7:this.loadingPage=!1;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),exportExcel:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={url:c["a"].chatApi+"report/helpdesk",method:"post",data:{startDate:m()(this.startDate).format("YYYY-MM-DD"),endDate:m()(this.endDate).format("YYYY-MM-DD")}},e.next=3,Object(l["a"])(t).then((function(e){if(200==e.data.ec){var t="";a.resData=e.data.data,a.ticket=e.data.data.ticket,console.log("this ticket",a.ticket),a.ticket=s.a.orderBy(a.ticket,(function(e){return new m.a(e.dateTimeIso)}),["desc"]),t+="No\tDate\tTicket\tTime Start\tTime EndPhone NumberNumber of RespondsCS Name\n";var r=e.data.data.ticket,n=0;r.forEach((function(e){n++,t+=n+"\t",t+=m()(e.dateTime).tz("Asia/Jakarta").format("YYYY-MM-DD HH:mm:ss")+"\t",t+=e.ticket+"\t",t+='="'+e.timeStart+'"\t',t+='="'+e.timeEnd+'"\t',t+='="'+e.customerPhone+'"\t',t+='="'+e.operatorNumber+'"\t',t+='="'+e.operatorName+'"\t',t+="\r\n"}));var i=window.btoa(window.unescape(encodeURIComponent(t))),o=atob(i),l=o.length,c=new Uint8ClampedArray(l);while(l--)c[l]=o.charCodeAt(l);var u="Report_Notification.xlsx",d="application/vnd.ms-excel",h=new Blob([c],{type:d});p()(h,u,d)}})).catch((function(e){console.log(e.message),a.showAlertError=!0}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{},mounted:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getReport("",!0);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),g=h,f=(a("1f90"),a("2877")),b=Object(f["a"])(g,r,n,!1,null,null,null);t["default"]=b.exports}}]);