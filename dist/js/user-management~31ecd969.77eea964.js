(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user-management~31ecd969"],{"0a49":function(e,t,a){var i=a("9b43"),s=a("626a"),r=a("4bf8"),n=a("9def"),o=a("cd1c");e.exports=function(e,t){var a=1==e,l=2==e,c=3==e,u=4==e,d=6==e,m=5==e||d,p=t||o;return function(t,o,g){for(var v,h,f=r(t),b=s(f),w=i(o,g,3),C=n(b.length),x=0,_=a?p(t,C):l?p(t,0):void 0;C>x;x++)if((m||x in b)&&(v=b[x],h=w(v,x,f),e))if(a)_[x]=h;else if(h)switch(e){case 3:return!0;case 5:return v;case 6:return x;case 2:_.push(v)}else if(u)return!1;return d?-1:c||u?u:_}}},1169:function(e,t,a){var i=a("2d95");e.exports=Array.isArray||function(e){return"Array"==i(e)}},"2f21":function(e,t,a){"use strict";var i=a("79e5");e.exports=function(e,t){return!!e&&i((function(){t?e.call(null,(function(){}),1):e.call(null)}))}},4837:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[e._v(e._s(e.$t("settings.title")))])]),e.showAlertError||e.showAlert?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[e.showAlertError?a("error-gope-siji"):e._e(),e.showAlert?a("el-alert",{attrs:{title:e.$t("error"),description:e.alertErrorMessage,type:"error",closable:!1,"show-icon":""}}):e._e()],1):e._e(),!e.showCard||e.showAlert||e.showAlertError?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticStyle:{"margin-bottom":"1em"}},[e.showCard?a("el-row",{staticStyle:{"z-index":"0"},attrs:{gutter:10}},[e._l(e.options,(function(t,i){return e.showCard?a("el-col",{key:i,staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v(e._s(t.options_name))])]),"boolean"==t.options_type?a("el-col",{staticClass:"mt-20",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-switch",{attrs:{"active-text":"Yes","active-value":"true","inactive-text":"No","inactive-value":"false"},model:{value:e.options[i].options_value,callback:function(t){e.$set(e.options[i],"options_value",t)},expression:"options[index].options_value"}})],1):e._e()],1)],1):e._e()})),a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:e.updatePreferences}},[a("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update")))])],1)],1)],1)],2):e._e()],1)],1)},s=[],r=(a("96cf"),a("1da1")),n=a("271f"),o=a("db49"),l=(a("c0d6"),a("bc3a"),{data:function(){return{showAlert:!1,showAlertError:!1,showCard:!0,loadingPage:!1,loadingBtn:!1,alertErrorMessage:"You are not allowed to see this page.",options:{allowMakerChecker:!1}}},methods:{changeFilter:function(){this.loadPreferences()},loadPreferences:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(n["a"])({method:"get",url:o["a"].baseApi+"auth/settings/",params:{view:1==t||null}}).then((function(e){200==e.data.ec?a.options=e.data.data:"not_allowed"==e.data.message&&(a.showAlert=!0)})).catch((function(e){a.showAlertError=!0}));case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updatePreferences:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingBtn=!0,e.next=3,Object(n["a"])({method:"patch",url:o["a"].baseApi+"auth/settings/",data:{options:this.options}}).then((function(e){200==e.data.ec?t.$swal(t.$t("success"),t.$t("success"),"success").then((function(e){t.loadPreferences()})):t.$swal(t.$t("error"),t.$t("error_text"),"warning")})).catch((function(e){t.$swal(t.$t("error"),t.$t("error_text"),"error")}));case 3:this.loadingBtn=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.getters.isPic?this.loadPreferences(!0):(this.loadingPage=!1,this.showAlert=!0);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}),c=l,u=a("2877"),d=Object(u["a"])(c,i,s,!1,null,null,null);t["default"]=d.exports},"4d24":function(e,t,a){},"55dd":function(e,t,a){"use strict";var i=a("5ca1"),s=a("d8e8"),r=a("4bf8"),n=a("79e5"),o=[].sort,l=[1,2,3];i(i.P+i.F*(n((function(){l.sort(void 0)}))||!n((function(){l.sort(null)}))||!a("2f21")(o)),"Array",{sort:function(e){return void 0===e?o.call(r(this)):o.call(r(this),s(e))}})},"5ca3":function(e,t,a){},7367:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[e._v(e._s(e.$t("usermanagement.usermanagement")))])]),a("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.tabClicked},model:{value:e.activeTab,callback:function(t){e.activeTab=t},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"User",name:"user"}},[e.showAlertError||e.showAlert?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[e.showAlertError?a("error-gope-siji"):e._e(),e.showAlert?a("el-alert",{attrs:{title:e.$t("error"),description:"You are not allowed to see this page.",type:"error",closable:!1,"show-icon":""}}):e._e()],1):e._e(),e.showAlertError||e.showAlert?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTable,expression:"loadingTable"}]},[a("div",[a("p",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!0}}},[a("i",{staticClass:"mdi mdi-email"}),e._v(" Invite user ")])],1)]),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listUser}},[a("el-table-column",{attrs:{prop:"email",label:"Email",width:"350"}}),a("el-table-column",{attrs:{prop:"name",label:"Name",width:"250"}}),a("el-table-column",{attrs:{label:"Action","min-width":"700"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mt-10",attrs:{type:"default",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),e.dialogDetail=!0,e.selectedRows=t.row}}},[a("i",{staticClass:"mdi mdi-account-card-details"}),e._v(" Detail ")]),t.row.email!=e.userEmail?a("el-button",{staticClass:"mt-10",attrs:{type:"danger",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),e.remove(t.row.email),e.selectedRows=t.row}}},[a("i",{staticClass:"mdi mdi-account-remove"}),e._v(" Remove ")]):e._e(),null==t.row.oa||t.row.oa.length!==e.availableChannel.length?a("el-button",{staticClass:"mt-10",attrs:{type:"primary",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),e.dialogAssignCS=!0,e.selectedRows=t.row}}},[a("i",{staticClass:"mdi mdi-headset"}),e._v(" Assign as Customer Service ")]):e._e(),null!==t.row.oa&&t.row.oa.length>0?a("el-button",{staticClass:"mt-10",attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),e.dialogRemoveCS=!0,e.selectedRows=t.row}}},[a("i",{staticClass:"mdi mdi-headset"}),e._v(" Unassign Customer Service ")]):e._e()]}}],null,!1,2392381259)})],1)],1)]),e.showAlertError||e.showAlert?e._e():a("div",[a("el-form",{ref:"form",attrs:{model:e.form,"status-icon":"",rules:e.rulesForm},nativeOn:{submit:function(t){return t.preventDefault(),e.invite.apply(null,arguments)}}},[a("el-dialog",{attrs:{title:"Invite User",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{attrs:{type:"text",placeholder:"Email"},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingReg},on:{click:e.invite}},[e._v("Invite")]),a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")])],1)],1)],1)],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Warning",visible:e.sendInvite,width:"30%"},on:{"update:visible":function(t){e.sendInvite=t}}},[a("span",[e._v("User not registered. Send this user an email for registration?")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingEmail},on:{click:e.sendEmail}},[e._v("Send email")]),a("el-button",{on:{click:function(t){e.sendInvite=!1,e.dialogVisible=!0}}},[e._v("Cancel")])],1)])],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-form",{ref:"formRemove",attrs:{model:e.formRemove,"status-icon":"",rules:e.rulesFormRemove}},[a("el-dialog",{attrs:{title:"Warning",visible:e.visibleRemove,width:"30%","before-close":function(){e.loadingRemove=!1,e.visibleRemove=!1,e.$refs["formRemove"].resetFields(),e.selectedEmail="",e.selectedRows=null}},on:{"update:visible":function(t){e.visibleRemove=t}},nativeOn:{submit:function(t){return t.preventDefault(),e.removeAccount.apply(null,arguments)}}},[a("span",[e._v(" This account ( "),a("b",[e._v(e._s(e.selectedEmail))]),e._v(") will be remove from system and your company. Remove this account? ")]),a("br"),a("br"),a("span",[e._v("For security, please input your password")]),a("el-form-item",{attrs:{prop:"password"}},[a("el-input",{attrs:{type:"password",placeholder:"Your password"},model:{value:e.formRemove.password,callback:function(t){e.$set(e.formRemove,"password",t)},expression:"formRemove.password"}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"danger",loading:e.loadingRemove},on:{click:e.removeAccount}},[e._v("Remove")]),a("el-button",{on:{click:function(t){e.visibleRemove=!1,e.$refs["formRemove"].resetFields()}}},[e._v("Cancel")])],1)],1)],1)],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Assign as Customer Service",visible:e.dialogAssignCS,width:"40%","before-close":function(t){e.selectedEmail="",e.selectedRows=null,t()}},on:{"update:visible":function(t){e.dialogAssignCS=t}}},[a("span",[e._v("Please fill all fields below to assign this user as Customer Service")]),a("br"),a("br"),a("el-form",{attrs:{"label-width":"150px","label-position":"left"}},[a("el-form-item",{attrs:{label:"Channel",required:"true"}},[a("el-select",{attrs:{placeholder:"Select channel"},on:{change:function(t){return e.detailWa()}},model:{value:e.formAssignCs.channels,callback:function(t){e.$set(e.formAssignCs,"channels",t)},expression:"formAssignCs.channels"}},e._l(e.availableChannel,(function(t){return a("el-option",{key:t.k,attrs:{disabled:!!(e.selectedRows&&e.selectedRows.oa&&e.selectedRows.oa.find((function(e){return e.channels==t.k}))),value:t.k,label:t.v}})})),1)],1),a("el-form-item",{attrs:{label:"Channel Account",required:"true"}},[a("el-select",{attrs:{loading:e.tokenLoader,disabled:!e.formAssignCs.channels,placeholder:"Select channel account"},model:{value:e.formAssignCs.number,callback:function(t){e.$set(e.formAssignCs,"number",t)},expression:"formAssignCs.number"}},e._l(e.wanumber,(function(e){return a("el-option",{key:e,attrs:{value:e,label:e}})})),1)],1),a("el-form-item",{attrs:{label:"CS Group"}},[a("el-select",{attrs:{placeholder:"Select CS Group (Optional)","allow-create":"",filterable:""},model:{value:e.formAssignCs.group,callback:function(t){e.$set(e.formAssignCs,"group",t)},expression:"formAssignCs.group"}},e._l(e.listGroupCS,(function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id,"value-key":e.id}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingAssign},on:{click:e.assignCs}},[e._v("Confirm")]),a("el-button",{on:{click:function(t){e.dialogAssignCS=!1}}},[e._v("Cancel")])],1)],1)],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Unassign Customer Service",visible:e.dialogRemoveCS,width:"30%","before-close":function(t){e.selectedEmail="",e.selectedRows=null,t()}},on:{"update:visible":function(t){e.dialogRemoveCS=t}}},[a("span",[e._v("Unassign user ("),a("b",[e._v(e._s(e.selectedRows?e.selectedRows.email:""))]),e._v(") from Customer Service?")]),a("br"),a("br"),a("el-form",{attrs:{"label-width":"150px","label-position":"left"}},[e.selectedRows?a("el-form-item",{attrs:{label:"Channel Account",required:!0}},[a("el-select",{attrs:{placeholder:"Select channel account"},model:{value:e.formRemoveCS.channels,callback:function(t){e.$set(e.formRemoveCS,"channels",t)},expression:"formRemoveCS.channels"}},e._l(e.selectedRows.oa.map((function(e){return e.operator.channels})),(function(t){return a("el-option",{key:t,attrs:{value:t,label:e.upperFirst(t)}})})),1)],1):e._e()],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingRemoveCs},on:{click:function(t){return e.removeCs()}}},[e._v("Confirm")]),a("el-button",{on:{click:function(t){e.dialogRemoveCS=!1}}},[e._v("Cancel")])],1)],1)],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Confirm",visible:e.dialogAssignChecker,width:"30%","before-close":function(t){e.selectedEmail="",e.selectedRows=null,t()}},on:{"update:visible":function(t){e.dialogAssignChecker=t}}},[a("span",[e._v("Assign this user as Checker?")]),a("br"),a("br"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingAssignChecker},on:{click:function(t){return e.assignChecker()}}},[e._v("Confirm")]),a("el-button",{on:{click:function(t){e.dialogAssignChecker=!1}}},[e._v("Cancel")])],1)])],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Confirm",visible:e.dialogRemoveChecker,width:"30%","before-close":function(t){e.selectedEmail="",e.selectedRows=null,t()}},on:{"update:visible":function(t){e.dialogRemoveChecker=t}}},[a("span",[e._v("Remove this user from Checker?")]),a("br"),a("br"),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingAssignChecker},on:{click:function(t){return e.removeChecker()}}},[e._v("Confirm")]),a("el-button",{on:{click:function(t){e.dialogRemoveChecker=!1}}},[e._v("Cancel")])],1)])],1),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Info",visible:e.dialogDetail,width:"40%","before-close":function(t){e.selectedEmail="",e.selectedRows=null,t()}},on:{"update:visible":function(t){e.dialogDetail=t}}},[null!=e.selectedRows?a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingDialogDetail,expression:"loadingDialogDetail"}]},[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Date Register")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.formatDate(e.selectedRows.created_at,"dddd, DD MMM YYYY HH:mm")))])],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Email")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-input",{attrs:{type:"text",value:e.selectedRows.email,readonly:"",disabled:""}})],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Name")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-input",{attrs:{type:"text",value:e.selectedRows.name,readonly:"",disabled:""}})],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Username")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-input",{attrs:{type:"text",value:e.selectedRows.username,readonly:"",disabled:""}})],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("PIC")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[e.userEmail!==e.selectedRows.email?a("el-switch",{attrs:{value:e.selectedRows.is_pic,"active-text":"Yes","active-value":1,"inactive-text":"No","inactive-value":0},model:{value:e.selectedRows.is_pic,callback:function(t){e.$set(e.selectedRows,"is_pic",t)},expression:"selectedRows.is_pic"}}):e._e(),e.userEmail===e.selectedRows.email?a("el-tag",{attrs:{type:"success"}},[e._v(e._s(1==e.selectedRows.is_pic?"Yes":"No"))]):e._e()],1)],1),"true"==e.allowMakerChecker.options_value||1==e.allowMakerChecker.options_value?a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Checker")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-switch",{attrs:{value:e.selectedRows.is_checker,"active-text":"Yes","active-value":1,"inactive-text":"No","inactive-value":0},model:{value:e.selectedRows.is_checker,callback:function(t){e.$set(e.selectedRows,"is_checker",t)},expression:"selectedRows.is_checker"}})],1)],1):e._e(),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Max Blast")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-input",{attrs:{type:"text",value:e.selectedRows.max_blast,placeholder:"Max blast for this user. Leave empty for unlimited"},nativeOn:{keypress:function(t){return e.numberOnly.apply(null,arguments)},paste:function(t){return e.paste.apply(null,arguments)}},model:{value:e.selectedRows.max_blast,callback:function(t){e.$set(e.selectedRows,"max_blast",t)},expression:"selectedRows.max_blast"}})],1)],1)],1):e._e(),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.loadingDialogDetail},on:{click:e.updateUser}},[a("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update"))+" ")]),a("el-button",{on:{click:function(t){e.dialogDetail=!1}}},[e._v("Close")])],1)])],1)],1),a("el-tab-pane",{attrs:{label:"Division",name:"division"}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:10}},[a("el-card",[a("el-button",{attrs:{type:"primary",loading:e.loadingAddTemplate},on:{click:function(t){return e.doShowDialogNewDivision()}}},[e._v("Create New Division")])],1)],1),a("div",[a("el-card",[a("div",{staticClass:"group-list scrollable only-y"},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTableDivision,expression:"loadingTableDivision"}],staticStyle:{width:"100%"},attrs:{data:e.division.data}},[a("el-table-column",{attrs:{prop:"createdAt",label:"Created At",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.formatDate(t.row.createdAt,"dddd, DD MMM YYYY HH:mm")))])]}}])}),a("el-table-column",{attrs:{prop:"divisionName",label:"Division Name",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.divisionName))])]}}])}),a("el-table-column",{attrs:{prop:"picName",label:"PIC Name",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.picName))])]}}])}),a("el-table-column",{attrs:{prop:"totalAssignedTemplate",label:"Total Template",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.totalAssignedTemplate))])]}}])}),a("el-table-column",{attrs:{label:"Operations",width:"450"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{loading:e.division.buttonLoadingViewDivision,type:"default",size:"small"},on:{click:function(a){return e.handleClickViewDivision(t.row.divisionName)}}},[a("i",{staticClass:"mdi mdi-plus"}),e._v(" Assign Template ")]),a("el-button",{attrs:{loading:e.division.buttonLoadingUpdateDivision,type:"primary",size:"small"},on:{click:function(a){return e.handleClickUpdateDivision(t.row.divisionName,t.row.picName)}}},[a("i",{staticClass:"mdi mdi-border-color"}),e._v(" Edit Division ")]),a("el-button",{attrs:{loading:e.division.buttonLoadingDeleteDivision,type:"danger",size:"small"},on:{click:function(a){return e.handleClickDeleteDivision(t.row.divisionName)}}},[a("i",{staticClass:"mdi mdi-delete"}),e._v(" Delete Division ")])]}}])})],1)]],2),a("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","page-size":10,"current-page":e.divisionCurrentPage,total:e.totalDivision},on:{"current-change":e.paginateDivision}})],1)],1)],1),a("el-tab-pane",{attrs:{label:"Customer Service",name:"customer_service"}},[e.showAlertError||e.showAlert?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[e.showAlertError?a("error-gope"):e._e(),e.showAlert?a("el-alert",{attrs:{title:e.$t("error"),description:"You are not allowed to see this page.",type:"error",closable:!1,"show-icon":""}}):e._e()],1):e._e(),e.showAlertError||e.showAlert?e._e():a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.customer_service.loadingTable,expression:"customer_service.loadingTable"}]},[a("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","current-page":e.customer_service.current_page,"page-size":e.customer_service.limit,total:e.customer_service.total},on:{"current-change":e.paginateCs}}),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.customer_service.list}},[a("el-table-column",{attrs:{prop:"name",label:"Name",width:"200"}}),a("el-table-column",{attrs:{label:"Group",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.groupName?a("el-tag",{staticClass:"mt-10",attrs:{type:"primary",size:"mini"}},[e._v(e._s(t.row.groupName))]):a("el-tag",{attrs:{size:"mini"}},[e._v("-")])]}}],null,!1,1597983947)}),a("el-table-column",{attrs:{prop:"channels",label:"Channels",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(e.upperFirst(t.row.channels))+" ")]}}],null,!1,2845235188)}),a("el-table-column",{attrs:{label:"Status",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return["available"==t.row.status?a("el-tag",{staticClass:"mt-10",attrs:{type:"primary",size:"mini"}},[a("i",{staticClass:"mdi mdi-headset"}),e._v(" Available ")]):a("el-tag",{staticClass:"mt-10",attrs:{type:"danger",size:"mini"}},[a("i",{staticClass:"mdi mdi-headset-off"}),e._v(" Not Available ")])]}}],null,!1,2268150257)}),a("el-table-column",{attrs:{prop:"currentOpen",label:"Open Ticket","min-width":"150"}}),a("el-table-column",{attrs:{prop:"waiting",label:"Waiting Ticket","min-width":"150"}}),a("el-table-column",{attrs:{prop:"currentProcess",label:"Processing Ticket","min-width":"150"}}),a("el-table-column",{attrs:{label:"Action",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mt-10",attrs:{type:"warning",size:"mini"},nativeOn:{click:function(a){a.preventDefault(),e.customer_service.dialogEdit.visible=!0,e.customer_service.selected=t.row}}},[a("i",{staticClass:"mdi mdi-account-edit"}),e._v(" Edit ")])]}}],null,!1,3343381311)})],1),a("br"),a("el-pagination",{attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","current-page":e.customer_service.current_page,"page-size":e.customer_service.limit,total:e.customer_service.total},on:{"current-change":e.paginateCs}}),e.showAlertError||e.showAlert?e._e():a("div",[a("el-dialog",{attrs:{title:"Edit Customer Service",visible:e.customer_service.dialogEdit.visible,width:"40%","before-close":function(t){e.customer_service.selected={},t()}},on:{"update:visible":function(t){return e.$set(e.customer_service.dialogEdit,"visible",t)}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.customer_service.dialogEdit.loading,expression:"customer_service.dialogEdit.loading"}]},[a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Name")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-input",{model:{value:e.customer_service.selected.name,callback:function(t){e.$set(e.customer_service.selected,"name",t)},expression:"customer_service.selected.name"}})],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Max Handle")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-input-number",{attrs:{min:0,max:999999},model:{value:e.customer_service.selected.maxLoad,callback:function(t){e.$set(e.customer_service.selected,"maxLoad",t)},expression:"customer_service.selected.maxLoad"}})],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Status")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-switch",{attrs:{value:e.customer_service.selected.status,"active-text":"Available","active-value":"available","inactive-text":"Not Available","inactive-value":"not_available"},model:{value:e.customer_service.selected.status,callback:function(t){e.$set(e.customer_service.selected,"status",t)},expression:"customer_service.selected.status"}})],1)],1),a("el-row",{attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:6,sm:6,md:6,lg:6,xl:6}},[a("h4",[e._v("Group")])]),a("el-col",{staticClass:"mt-20",attrs:{xs:18,sm:18,md:18,lg:18,xl:18}},[a("el-select",{attrs:{clearable:"",filterable:""},model:{value:e.customer_service.selected.group,callback:function(t){e.$set(e.customer_service.selected,"group",t)},expression:"customer_service.selected.group"}},e._l(e.listGroupCS,(function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})})),1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:e.customer_service.dialogEdit.loading},on:{click:e.updateCs}},[a("i",{staticClass:"mdi mdi-content-save"}),e._v(" "+e._s(e.$t("generic.update"))+" ")]),a("el-button",{on:{click:function(t){e.customer_service.dialogEdit.visible=!1}}},[e._v("Close")])],1)])],1)],1)],1),a("el-tab-pane",{attrs:{label:"CS Group",name:"cs_group"}},[a("el-row",{staticClass:"mb-20",attrs:{gutter:10}},[a("el-card",[a("el-button",{attrs:{type:"primary",loading:e.loadingAddTemplate},on:{click:function(t){return e.doShowDialogNewCsGroup()}}},[e._v("Create New CS Group")])],1)],1),a("div",[a("el-card",[a("div",{staticClass:"group-list scrollable only-y"},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTableCsGroup,expression:"loadingTableCsGroup"}],staticStyle:{width:"100%"},attrs:{data:e.listGroupCS}},[a("el-table-column",{attrs:{prop:"dateCreate",label:"Created At",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(e.formatDate(t.row.dateCreate,"dddd, DD MMM YYYY HH:mm")))])]}}])}),a("el-table-column",{attrs:{prop:"name",label:"Group Name",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",{staticStyle:{"font-weight":"bold"}},[e._v(e._s(t.row.name))])]}}])}),a("el-table-column",{attrs:{label:"Operations",width:"450"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"mt-10",attrs:{type:"default",size:"small"},on:{click:function(a){return e.handleClickDetailCsGroup(t.row.name)}}},[a("i",{staticClass:"mdi mdi-account-card-details"}),e._v(" Detail ")]),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return e.handleClickUpdateCsGroup(t.row.id,t.row.name)}}},[a("i",{staticClass:"mdi mdi-border-color"}),e._v(" Edit ")]),0==t.row.isDisabled?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return e.deleteCsGroup(t.row.id,t.row.name)}}},[a("i",{staticClass:"mdi mdi-delete"}),e._v(" Delete ")]):a("el-button",{attrs:{type:"danger",size:"small",disabled:!0}},[a("i",{staticClass:"mdi mdi-delete"}),e._v(" Delete ")])]}}])})],1)]],2)])],1)],1)],1),a("el-dialog",{attrs:{title:"Create New Division",visible:e.dialogNewDivision},on:{"update:visible":function(t){e.dialogNewDivision=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"Division Name"}},[a("el-input",{attrs:{type:"text",placeholder:"Division name"},model:{value:e.division.divisionName,callback:function(t){e.$set(e.division,"divisionName",t)},expression:"division.divisionName"}})],1),a("el-form-item",{attrs:{label:"PIC Name"}},[a("el-input",{attrs:{type:"text",placeholder:"PIC of division"},model:{value:e.division.picName,callback:function(t){e.$set(e.division,"picName",t)},expression:"division.picName"}})],1),a("el-button",{attrs:{type:"primary",loading:e.division.buttonLoadingCreate},on:{click:e.createDivision}},[e._v("Save")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogNewDivision=!1,e.division.divisionName="",e.division.picName=""}}},[e._v("Close")])],1)],1),a("el-dialog",{attrs:{title:e.selectedDivision,visible:e.dialogViewDivision},on:{"update:visible":function(t){e.dialogViewDivision=t}}},[a("el-form",[a("el-form-item",[e.showAlert?e._e():a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTableDivision,expression:"loadingTableDivision"}],attrs:{gutter:10}},[a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("el-card",{attrs:{shadow:"card-shadow--small"}},[a("div",{staticClass:"group-list scrollable only-y"},[[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingTableDetailDivision,expression:"loadingTableDetailDivision"}],staticStyle:{color:"#000 !important"},attrs:{data:e.division.dataSelected,"element-loading-text":"Loading...","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(246, 246, 245, 0.8)"}},[a("el-table-column",{attrs:{prop:"templateName",label:"Template Name"}}),a("el-table-column",{attrs:{prop:"templateId",label:"#"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"danger",loading:e.buttonloadingremove},on:{click:function(a){return e.deleteAssignedTemplate(t.row.templateId)}}},[a("i",{staticClass:"mdi mdi-delete"}),e._v(" Remove template ")])]}}],null,!1,1281600283)})],1)]],2),a("br"),a("el-pagination",{staticStyle:{"margin-top":"10px"},attrs:{background:"","prev-text":"Prev","next-text":"Next",layout:"prev, pager, next","page-size":10,"current-page":e.divisionTemplateCurrentPage,total:e.division.dataSelectedLength},on:{"current-change":e.paginateDivisionTemplate}})],1)],1)],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.handleClickAssignTemplate(e.selectedDivision)}}},[e._v("Add")]),a("el-button",{staticClass:"mt-10",attrs:{type:"danger"},on:{click:function(t){e.dialogViewDivision=!1}}},[e._v("Close")])],1)],1)],1),a("el-dialog",{attrs:{title:"Edit Division "+e.selectedDivision,visible:e.dialogUpdateDivision},on:{"update:visible":function(t){e.dialogUpdateDivision=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"Insert a new Division Name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.selectedDivision,callback:function(t){e.selectedDivision=t},expression:"selectedDivision"}})],1),a("el-form-item",{attrs:{label:"PIC Name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.selectedDivisionPic,callback:function(t){e.selectedDivisionPic=t},expression:"selectedDivisionPic"}})],1),a("el-button",{attrs:{type:"primary",loading:e.division.buttonLoadingEdit},on:{click:e.updateDivision}},[e._v("Save")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogUpdateDivision=!1}}},[e._v("Close")])],1)],1),a("el-dialog",{attrs:{title:"Assign Template",visible:e.dialogAssignTemplate},on:{"update:visible":function(t){e.dialogAssignTemplate=t}}},[a("el-form",{attrs:{"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Template"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"Select template to assigned",loading:e.loadingListHsm},on:{change:e.showSelectedHsm},model:{value:e.selectedHsm,callback:function(t){e.selectedHsm=t},expression:"selectedHsm"}},e._l(e.hsmList,(function(t){return a("el-option",{key:t.name,attrs:{label:t.name,value:t.id,disabled:!!e.hsmAssigned(t.id)}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.assignTemplate.buttonLoading},on:{click:e.createAssignTemplate}},[e._v("Save")]),a("el-button",{attrs:{type:"danger"},on:{click:e.closeAssignTemplate}},[e._v("Close")])],1)],1)],1),a("el-dialog",{attrs:{title:"Create New CS Group",visible:e.dialogNewCsGroup},on:{"update:visible":function(t){e.dialogNewCsGroup=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"Group Name"}},[a("el-input",{attrs:{type:"text",placeholder:"Insert Group name"},model:{value:e.cs_group.name,callback:function(t){e.$set(e.cs_group,"name",t)},expression:"cs_group.name"}})],1),a("el-button",{attrs:{type:"primary",loading:e.cs_group.buttonLoadingCreate},on:{click:e.createCsGroup}},[e._v("Save")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogNewCsGroup=!1,e.cs_group.name=""}}},[e._v("Close")])],1)],1),a("el-dialog",{attrs:{title:"Edit CS Group ",visible:e.dialogUpdateCsGroup},on:{"update:visible":function(t){e.dialogUpdateCsGroup=t}}},[a("el-form",[a("el-form-item",{attrs:{label:"Insert a new CS Group name"}},[a("el-input",{attrs:{type:"text"},model:{value:e.selectedCsGroup[0].name,callback:function(t){e.$set(e.selectedCsGroup[0],"name",t)},expression:"selectedCsGroup[0].name"}})],1),a("el-button",{attrs:{type:"primary",loading:e.cs_group.buttonLoadingEdit},on:{click:e.updateCsGroup}},[e._v("Save")]),a("el-button",{attrs:{type:"danger"},on:{click:e.handleClickCloseCsGroup}},[e._v("Close")])],1)],1),a("el-dialog",{attrs:{title:"Member Group",visible:e.dialogTableDetailCsVisible},on:{"update:visible":function(t){e.dialogTableDetailCsVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.removeMemberLoading,expression:"removeMemberLoading"}],attrs:{data:e.checkTotalCsGroup}},[a("el-table-column",{attrs:{property:"name",label:"Name",width:"250"}}),a("el-table-column",{attrs:{property:"groupName",label:"Group",width:"250"}}),a("el-table-column",{attrs:{property:"name",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){return e.removeMemberGroup(t.row.name)}}})]}}])})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableDetailCsVisible=!1}}},[e._v("Close")])],1)],1)],1)},s=[],r=(a("55dd"),a("7f7f"),a("ac6a"),a("7514"),a("a481"),a("96cf"),a("1da1")),n=a("ade3"),o=a("2ef0"),l=a.n(o),c=a("271f"),u=a("db49"),d=a("c0d6"),m=a("c1df"),p=a("5928"),g=new p({b:512}),v=g.importKey(u["a"].privateKey,"pkcs1-public-pem"),h={data:function(){var e,t=this,a=function(e,a,i){if(a=t.form.email,!a)return i(new Error(t.$t("register.invalid_parameter")));var s=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;if(0==s.test(a))return i(new Error(t.$t("register.email_not_valid")));i()},i=function(e,a,i){if(!a)return i(new Error(t.$t("register.invalid_parameter")));i()};return e={availableChannel:[{v:"WhatsApp",k:"whatsapp"},{v:"Telegram",k:"telegram"}],currentPage:1},Object(n["a"])(e,"currentPage",1),Object(n["a"])(e,"totalDivision",0),Object(n["a"])(e,"totalDivisionTemplate",1),Object(n["a"])(e,"divisionCurrentPage",1),Object(n["a"])(e,"divisionTemplateCurrentPage",1),Object(n["a"])(e,"activeTab","user"),Object(n["a"])(e,"listUser",new Array),Object(n["a"])(e,"wanumber",new Array),Object(n["a"])(e,"dialogVisible",!1),Object(n["a"])(e,"dialogDetail",!1),Object(n["a"])(e,"sendInvite",!1),Object(n["a"])(e,"loadingReg",!1),Object(n["a"])(e,"loadingEmail",!1),Object(n["a"])(e,"loadingDialogDetail",!1),Object(n["a"])(e,"loadingTable",!0),Object(n["a"])(e,"loadingAssign",!1),Object(n["a"])(e,"loadingRemoveCs",!1),Object(n["a"])(e,"loadingAssignChecker",!1),Object(n["a"])(e,"loadingDivision",!1),Object(n["a"])(e,"loadingDivisionTemplate",!1),Object(n["a"])(e,"loadingListHsm",!1),Object(n["a"])(e,"visibleRemove",!1),Object(n["a"])(e,"loadingRemove",!1),Object(n["a"])(e,"loadingAddTemplate",!1),Object(n["a"])(e,"selectedEmail",""),Object(n["a"])(e,"selectedNumber",""),Object(n["a"])(e,"selectedRows",null),Object(n["a"])(e,"userEmail",d["a"].getters.email),Object(n["a"])(e,"dialogAssignCS",!1),Object(n["a"])(e,"dialogRemoveCS",!1),Object(n["a"])(e,"dialogAssignChecker",!1),Object(n["a"])(e,"dialogRemoveChecker",!1),Object(n["a"])(e,"dialogNewDivision",!1),Object(n["a"])(e,"dialogNewCsGroup",!1),Object(n["a"])(e,"dialogViewDivision",!1),Object(n["a"])(e,"dialogUpdateDivision",!1),Object(n["a"])(e,"dialogUpdateCsGroup",!1),Object(n["a"])(e,"dialogAssignTemplate",!1),Object(n["a"])(e,"showAlertError",!1),Object(n["a"])(e,"showAlert",!1),Object(n["a"])(e,"alertErrorMessage",this.$t("error_text")),Object(n["a"])(e,"allowMakerChecker",!1),Object(n["a"])(e,"totalDivision",0),Object(n["a"])(e,"selectedGroupCS",""),Object(n["a"])(e,"listGroupCS",[]),Object(n["a"])(e,"division",{dataSelected:[],dataSelectedLength:0,data:[],divisionName:"",picName:"",loading:!1,buttonLoadingCreate:!1,buttonLoadingEdit:!1,buttonLoadingDelete:!1,buttonLoadingAssignTemplate:!1,buttonLoadingViewDivision:!1,buttonLoadingUpdateDivision:!1,buttonLoadingDeleteDivision:!1}),Object(n["a"])(e,"customer_service",{list:[],loadingTable:!1,total:0,current_page:1,limit:10,selected:{},dialogEdit:{visible:!1,loading:!1}}),Object(n["a"])(e,"cs_group",{id:"",name:"",buttonLoadingCreate:!1,buttonLoadingEdit:!1}),Object(n["a"])(e,"checkTotalCsGroup",[]),Object(n["a"])(e,"dialogTableDetailCsVisible",!1),Object(n["a"])(e,"buttonloadingremove",!1),Object(n["a"])(e,"removeMemberLoading",!1),Object(n["a"])(e,"selectedCsGroup",[{name:""}]),Object(n["a"])(e,"selectedDivision",""),Object(n["a"])(e,"selectedDivisionPic",""),Object(n["a"])(e,"selectedHsm",""),Object(n["a"])(e,"assignTemplate",{data:[],loading:!1,buttonLoading:!1}),Object(n["a"])(e,"assignedHsmDivision",[]),Object(n["a"])(e,"hsmList",[]),Object(n["a"])(e,"loadingTableDivision",!1),Object(n["a"])(e,"loadingTableDetailDivision",!1),Object(n["a"])(e,"loadingTableCsGroup",!1),Object(n["a"])(e,"form",{email:""}),Object(n["a"])(e,"formAssignCs",{channels:"",number:"",group:null}),Object(n["a"])(e,"formRemoveCS",{number:"",channels:""}),Object(n["a"])(e,"formRemove",{password:""}),Object(n["a"])(e,"rulesForm",{email:[{validator:a,trigger:"blur"}]}),Object(n["a"])(e,"rulesFormRemove",{password:[{validator:i,trigger:"blur"}]}),Object(n["a"])(e,"errors",[]),Object(n["a"])(e,"waUserDetail",{hsm:[],sender:{}}),Object(n["a"])(e,"loadingForm",!1),Object(n["a"])(e,"tokenLoader",!1),e},methods:{upperFirst:function(){return o["upperFirst"].apply(void 0,arguments)},paginateCs:function(e){this.customer_service.current_page=e,this.getCsList(e)},tabClicked:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.paneName,"division"!=a){e.next=5;break}this.getDivision(),e.next=17;break;case 5:if("user"!=a){e.next=9;break}this.getListUser(),e.next=17;break;case 9:if("customer_service"!=a){e.next=13;break}this.getCsList(),e.next=17;break;case 13:if("cs_group"!=a){e.next=17;break}return e.next=16,this.getCsList();case 16:this.getCsGroup();case 17:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),formatString:function(e){return(e[0].toUpperCase()+e.slice(1)).replace(/_/g," ")},hsmAssigned:function(e){return l.a.find(this.assignedHsmDivision,(function(t){return t.templateId==e}))},paginateDivision:function(e){this.divisionCurrentPage=e,this.getDivision(e)},paginateDivisionTemplate:function(e){this.divisionTemplateCurrentPage=e,this.getDivisionDetail(e)},numberOnly:function(e){window.event?e.keyCode:e.which;var t=l.a.indexOf([8,9,27,13,190,43],e.keyCode);-1!==t||86===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||82===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>42&&e.keyCode<=49&&-1==l.a.indexOf([44,45,46,47],e.keyCode)||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode>96||e.keyCode<200)&&e.preventDefault()},paste:function(e){e.preventDefault();for(var t,a=window.event.clipboardData.getData("Text"),i="+0123456789",s="",r=0;r<a.length;r++)t=a.charAt(r),-1!=i.indexOf(t)&&(s+=t);this.contactDialog.data.phone_number=s},formatDate:function(e,t){return m(e).format(t)},showSelectedHsm:function(){},doShowDialogNewDivision:function(){this.dialogNewDivision=!0},doShowDialogNewCsGroup:function(){this.dialogNewCsGroup=!0},handleClickAssignTemplate:function(e){this.selectedDivision=e,this.dialogAssignTemplate=!0},closeAssignTemplate:function(){this.selectedPhoneNumber="",this.selectedHsm="",this.division.dataSelected=[],this.dialogAssignTemplate=!1,this.getDivisionDetail()},handleClickViewDivision:function(e){this.division.buttonLoadingViewDivision=!0,this.selectedDivision=e,this.getDivisionDetail(),this.getAllHSM(),this.division.buttonLoadingViewDivision=!1,this.dialogViewDivision=!0},handleClickUpdateDivision:function(e,t){this.division.buttonLoadingUpdateDivision=!0,this.selectedOldDivision=e,this.selectedDivision=e,this.selectedDivisionPic=t,this.getDivisionDetail(),this.division.buttonLoadingUpdateDivision=!1,this.dialogUpdateDivision=!0},handleClickDeleteDivision:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$confirm("Are you sure want to delete division <b>".concat(t,"</b> ?"),"Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning",center:!0,dangerouslyUseHTMLString:!0}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a.division.buttonLoadingDeleteDivision=!0,a.selectedDivision=t,e.next=4,Object(c["a"])({url:u["a"].baseApi+"/division/remove/",method:"POST",data:{divisionName:a.selectedDivision}}).then((function(e){200!=e.data.ec?a.$swal(a.$t("error"),a.$t("error_text"),"error"):(a.$message({showClose:!0,message:"Division successfully deleted",type:"success"}),a.getDivision()),a.division.buttonLoadingDeleteDivision=!1})).catch((function(e){a.division.buttonLoadingDeleteDivision=!1}));case 4:case"end":return e.stop()}}),e)})))).catch((function(e){a.division.buttonLoadingDeleteDivision=!1}));case 1:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getDivision:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:1,this.loadingTableDivision=!0,e.next=4,Object(c["a"])({methods:"get",url:u["a"].baseApi+"division/list?page="+t}).then((function(e){a.division.data=e.data.data;var t=[];l.a.forEach(e.data.data,(function(e){l.a.forEach(e.template,(function(e){t.push(e)}))})),a.assignedHsmDivision=t,a.totalDivision=parseInt(e.data.total)})).catch((function(e){console.log(e)}));case 4:this.loadingTableDivision=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getDivisionDetail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a,i=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:1,a=this.selectedDivision,e.next=4,Object(c["a"])({methods:"get",url:"".concat(u["a"].baseApi,"division/list/").concat(a,"?page=").concat(t)}).then((function(e){i.division.dataSelected=e.data.data.template,i.division.dataSelectedLength=parseInt(e.data.total)})).catch((function(e){console.log(e)}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createDivision:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.division.divisionName&&""!=this.division.picName){e.next=5;break}return this.$message.error({showClose:!1,message:"All field is required"}),e.abrupt("return");case 5:return this.division.buttonLoadingCreate=!0,e.next=8,Object(c["a"])({method:"post",url:u["a"].baseApi+"division/create",data:{divisionName:this.division.divisionName,picName:this.division.picName,template:[{templateName:"",templateId:""}]}}).then((function(e){200!=e.data.ec?t.$message({showClose:!0,message:"Create division failed",type:"error"}):(t.$message({showClose:!0,message:"Division was successfully created",type:"success"}),t.dialogNewDivision=!1,t.division.divisionName="",t.division.picName="",t.getDivision()),t.division.buttonLoadingCreate=!1})).catch((function(e){console.log("error",e.message)}));case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateDivision:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.selectedDivision&&""!=this.selectedDivisionPic){e.next=5;break}return this.$message.error({showClose:!1,message:"All field is required"}),e.abrupt("return");case 5:return e.next=7,Object(c["a"])({method:"POST",url:u["a"].baseApi+"division/update/"+this.selectedOldDivision+"/"+this.selectedDivisionPic,data:{divisionName:this.selectedDivision,picName:this.selectedDivisionPic}}).then((function(e){200!=e.data.ec?t.$message({showClose:!0,message:"Update division failed",type:"error"}):(t.$message({showClose:!0,message:"Updated success",type:"success"}),t.dialogUpdateDivision=!1,t.selectedDivision="",t.selectedDivisionPic="",t.getDivision())})).catch((function(e){console.log("error",e.message)}));case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCsGroup:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({methods:"get",url:u["a"].chatApi+"csgroup"}).then((function(e){t.listGroupCS=e.data.data.group,t.listGroupCS.forEach((function(e){""!=e.name&&null!=e.name||(e.name="-")})),t.listGroupCS.sort((function(e,t){var a=e.name.toUpperCase(),i=t.name.toUpperCase();return a<i?-1:a>i?1:0})),t.forEnableDisable();var a=t.customer_service.list;a.forEach((function(e,t){null!=e.groupName&&""!=e.groupName||(a[t].groupName="-")}));for(var i=function(e){t.listGroupCS.forEach((function(t){t.name==a[e].groupName&&(t.isDisabled=!0)}))},s=0;s<a.length;s++)i(s)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),createCsGroup:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(""!=this.cs_group.name&&""!=this.cs_group.name.trim()&&" "!=this.cs_group.name.trim()&&"-"!=this.cs_group.name.trim()){e.next=5;break}return this.$message.error({showClose:!1,message:"Group Name field is required"}),e.abrupt("return");case 5:return this.cs_group.buttonLoadingCreate=!0,this.loadingTableCsGroup=!0,e.next=9,Object(c["a"])({method:"post",url:u["a"].chatApi+"csgroup",data:{name:this.cs_group.name}}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200==a.data.ec||400==a.data.code){e.next=4;break}t.$message({showClose:!0,message:"Create CS Group failed",type:"error"}),e.next=16;break;case 4:if(400!=a.data.code){e.next=8;break}t.$message.error({showClose:!1,message:"Group name "+a.data.message}),e.next=16;break;case 8:return t.$message({showClose:!0,message:"CS Group was successfully created",type:"success"}),t.dialogNewDivision=!1,t.cs_group.name="",t.dialogNewCsGroup=!1,e.next=14,t.getCsList();case 14:return e.next=16,t.getCsGroup();case 16:t.cs_group.buttonLoadingCreate=!1,t.loadingTableCsGroup=!1;case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error",e.message),t.$swal(t.$t("error"),t.$t("error_text"),"error"),t.loadingTableCsGroup=!1}));case 9:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateCsGroup:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=this.selectedCsGroup[0].name.trim(),""!=this.selectedCsGroup[0].name&&""!=t&&" "!=t&&"-"!=t){e.next=6;break}return this.$message.error({showClose:!1,message:"All field is required"}),e.abrupt("return");case 6:return this.cs_group.buttonLoadingEdit=!0,this.loadingTableCsGroup=!0,e.next=10,Object(c["a"])({method:"PATCH",url:u["a"].chatApi+"csgroup/"+this.cs_group.id,data:{name:this.selectedCsGroup[0].name}}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(200==t.data.ec||400==t.data.code){e.next=5;break}a.$message({showClose:!0,message:"Update CS Group failed",type:"error"}),a.cs_group.buttonLoadingEdit=!1,e.next=19;break;case 5:if(400!=t.data.code){e.next=10;break}a.$message.error({showClose:!1,message:"Group name "+t.data.message}),a.cs_group.buttonLoadingEdit=!1,e.next=19;break;case 10:return a.$message({showClose:!0,message:"Updated success",type:"success"}),a.cs_group.buttonLoadingEdit=!1,a.dialogUpdateCsGroup=!1,a.selectedCsGroup[0].name="",a.cs_group.name="",e.next=17,a.getCsList();case 17:return e.next=19,a.getCsGroup();case 19:a.loadingTableCsGroup=!1;case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log("error",e.message),a.$swal(a.$t("error"),a.$t("error_text"),"error"),a.loadingTableCsGroup=!1}));case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClickDetailCsGroup:function(e){this.checkTotalCsGroup=this.customer_service.list.filter((function(t){return t.groupName==e})),this.dialogTableDetailCsVisible=!0},removeMemberGroup:function(e){var t=this;this.$confirm("Are you sure want to delete <b>".concat(e,"</b> from group ?"),"Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning",center:!0,dangerouslyUseHTMLString:!0}).then((function(a){t.removeMemberLoading=!0,t.checkTotalCsGroup.forEach(function(){var a=Object(r["a"])(regeneratorRuntime.mark((function a(i,s){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(i.name!=e){a.next=3;break}return a.next=3,Object(c["a"])({method:"patch",url:"company/customer-service",data:{id:i.id,name:i.name,email:i.email,group:null}}).then((function(e){200==e.data.ec?(t.checkTotalCsGroup.splice(s,1),t.getCsList()):t.$message({showClose:!0,message:"Update CS failed",type:"error"})})).catch((function(e){t.$message({showClose:!0,message:"Update CS failed",type:"error"}),console.log(e)}));case 3:t.removeMemberLoading=!1;case 4:case"end":return a.stop()}}),a)})));return function(e,t){return a.apply(this,arguments)}}())})).catch((function(e){}))},deleteCsGroup:function(e,t){var a=this;this.$confirm("Are you sure want to delete group <b>".concat(t,"</b> ?"),"Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning",center:!0,dangerouslyUseHTMLString:!0}).then(Object(r["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(c["a"])({url:u["a"].chatApi+"csgroup/"+e,method:"DELETE"}).then(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return 200!=t.data.ec&&400!==t.data.code?a.$swal(a.$t("error"),a.$t("error_text"),"error"):400==t.data.code?a.$swal({title:"Warning",text:"Current Ticket is Still Open"==t.data.message?"Member Ticket is Open":a.$t("error_text"),type:"warning"}):a.$swal({title:a.$t("success"),text:"",type:"success"}),e.next=3,a.getCsList();case 3:return a.loadingTableCsGroup=!0,e.next=6,a.getCsGroup();case 6:a.loadingTableCsGroup=!1;case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})))).catch((function(e){}))},handleClickUpdateCsGroup:function(e,t){var a=this;this.cs_group.id=e,this.listGroupCS.forEach((function(e){e.name==t&&(a.selectedCsGroup[0].name=e.name)})),this.dialogUpdateCsGroup=!0},handleClickCloseCsGroup:function(){this.cs_group.name="",this.selectedCsGroup=[{name:""}],this.dialogUpdateCsGroup=!1},getAllHSM:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:null,this.loadingListHsm=!0,e.next=4,Object(c["a"])({method:"get",url:"bussiness/message-template",params:{after:null!=t?t:void 0}}).then((function(e){console.log("response",e),200!=e.data.ec?a.$swal(a.$t("error"),a.$t("error_text"),"error"):a.hsmList=e.data.data.data,a.loadingListHsm=!1})).catch((function(e){a.loadingListHsm=!1}));case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),createAssignTemplate:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.assignTemplate.buttonLoading=!0,t=l.a.find(this.hsmList,(function(e){return e.id==a.selectedHsm})).name,e.next=4,Object(c["a"])({method:"post",url:u["a"].baseApi+"division/assign_template",data:{divisionName:this.selectedDivision,template:[{templateName:t,templateId:this.selectedHsm}]}}).then((function(e){200!=e.data.ec?a.$message({showClose:!0,message:"This template is already assigned",type:"error"}):(a.$message({showClose:!0,message:"The template was successfully assigned",type:"success"}),a.dialogAssignTemplate=!1,a.selectedHsm="",a.getDivisionDetail(),a.getDivision())})).catch((function(e){console.log("error",e.message)}));case 4:this.assignTemplate.buttonLoading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),deleteAssignedTemplate:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=l.a.find(this.hsmList,(function(e){return e.id==t})).name,this.$confirm("Are you sure want to unassigned <b>".concat(a,"</b> from this division?"),"Confirm",{confirmButtonText:"Yes",cancelButtonText:"No",type:"warning",center:!0,dangerouslyUseHTMLString:!0}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i.buttonloadingremove=!0,e.next=3,Object(c["a"])({url:u["a"].baseApi+"division/unassign_template",method:"POST",data:{divisionName:i.selectedDivision,template:[{templateName:a,templateId:t}]}}).then((function(e){200!=e.data.ec?i.$message({showClose:!0,message:"The template was not deleted",type:"success"}):(i.$message({showClose:!0,message:"Template successfully deleted",type:"success"}),i.selectedHsm="",i.getDivisionDetail(),i.getDivision())})).catch((function(e){}));case 3:i.buttonloadingremove=!1;case 4:case"end":return e.stop()}}),e)})))).catch((function(e){}));case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),updateUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingDialogDetail=!0,e.next=3,Object(c["a"])({method:"post",url:"company/update-user/"+this.selectedRows.user,data:{is_checker:this.selectedRows.is_checker,max_blast:null==this.selectedRows.max_blast?null:this.selectedRows.max_blast,is_pic:this.selectedRows.is_pic,email:this.selectedRows.email}}).then((function(e){200==e.data.ec?(t.$swal({title:t.$t("success"),text:"",type:"success"}),t.dialogDetail=!1,t.selectedRows=null,t.getListUser()):(t.dialogDetail=!1,t.$swal({title:"Warning",text:"not_allowed"==e.data.message?t.$t("usermanagement.not_allowed"):t.$t("error_text"),type:"warning"}))})).catch((function(e){t.dialogDetail=!1,t.$swal({title:"Error",text:t.$t("error_text")+". Kindly plese check your internet connection.",type:"warning"})}));case 3:this.loadingDialogDetail=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),remove:function(e){this.selectedEmail=e,this.visibleRemove=!0},detailWa:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.tokenLoader=!0,e.next=3,Object(c["a"])({method:"post",url:"user/detail/number",data:{channels:this.formAssignCs.channels}}).then((function(e){t.wanumber=[],200==e.data.ec?(t.wanumber=[],l.a.forEach(e.data.data,(function(e){t.wanumber.push(e)})),t.showFormMessage=!0):400==e.data.ec&&"not_subscribe"==e.data.message&&(t.showAlertMessage=!0),t.tokenLoader=!1})).catch((function(e){t.tokenLoader=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getCsList:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:1,this.customer_service.loadingTable=!0,this.showAlertError=!1,e.next=5,Object(c["a"])({method:"get",url:"company/customer-service",params:{page:t}}).then((function(e){200==e.data.ec?(a.customer_service.list=e.data.data.list,a.customer_service.total=e.data.data.total):a.showAlertMessage=!0})).catch((function(e){a.showAlertError=!0}));case 5:this.customer_service.loadingTable=!1;case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateCs:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.customer_service.dialogEdit.loading=!0,t=this.customer_service.selected,e.next=4,Object(c["a"])({method:"patch",url:"company/customer-service",data:{id:t.id,name:t.name,status:t.status,email:t.email,maxLoad:t.maxLoad,group:t.group}}).then((function(e){200==e.data.ec?(a.customer_service.dialogEdit.visible=!1,a.$swal(a.$t("success"),"","success"),a.getCsList(),a.customer_service.dialogEdit.loading=!1):a.$swal({title:a.$t("error"),text:"Failed update data",type:"warning"})})).catch((function(e){a.$swal({title:a.$t("error"),text:a.$t("error_text"),type:"error"})}));case 4:this.customer_service.dialogEdit.loading=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),assignCs:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingAssign=!0,e.next=3,Object(c["a"])({method:"post",url:u["a"].chatApi+"auth/",data:{email:this.selectedRows.email,name:this.selectedRows.name,origin:"dashboard",companyNumber:this.formAssignCs.number,channels:this.formAssignCs.channels,group:this.formAssignCs.group?this.formAssignCs.group:void 0,isNewGroup:!this.listGroupCS.find((function(e){return e.id==t.formAssignCs.group}))}}).then((function(e){200==e.data.ec?(t.dialogAssignCS=!1,t.selectedGroupCS="",t.selectedNumber="",t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){return t.getListUser()}))):(t.dialogAssignCS=!1,t.$swal({title:t.$t("error"),text:t.$t("assigncs.".concat(e.data.message)),type:"warning"}))})).catch((function(e){t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"warning"})}));case 3:this.loadingAssign=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeCs:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this,a=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:a.length>0&&void 0!==a[0]?a[0]:"",a.length>1&&void 0!==a[1]?a[1]:"",this.$confirm("This user will be unassign from ".concat(this.upperFirst(this.formRemoveCS.channels),"?"),"Confirmation",{confirmButtonText:"Continue",cancelButtonText:"Cancel",type:"warning"}).then(Object(r["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t.selectedRows.oa.find((function(e){return e.operator.channels==t.formRemoveCS.channels})),t.loadingRemoveCs=!0,e.next=4,Object(c["a"])({method:"delete",url:u["a"].chatApi+"auth/",data:{operatorId:a.operator.id,number:a.operator.number,email:a.email}}).then((function(e){t.dialogRemoveCS=!1,200==e.data.ec?(t.formRemoveCS={number:"",channels:""},t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){return t.getListUser()}))):t.$swal({title:t.$t("error"),text:"fatal_error"==e.data.message?t.$t("error_text"):t.$t("assigncs.".concat(e.data.message)),type:"warning"})})).catch((function(e){t.dialogRemoveCS=!1,t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"warning"})}));case 4:t.loadingRemoveCs=!1;case 5:case"end":return e.stop()}}),e)})))).catch((function(){t.loadingRemoveCs=!1}));case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeAccount:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["formRemove"].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=8;break}return t.loadingRemove=!0,i={operatorId:t.selectedRows.operatorId,number:t.selectedRows.operatorNumber},e.next=5,Object(c["a"])({method:"delete",url:u["a"].baseApi+"company/user-company",data:{email:t.selectedEmail,password:v.encrypt(t.formRemove.password,"base64")}}).then((function(e){200==e.data.ec?("undefined"!=typeof i.operatorId&&""!=i.operatorId&&"undefined"!=typeof i.number&&""!=i.number&&null!=i.number&&null!=i.operatorId&&t.removeCs(i.operatorId,i.number),t.visibleRemove=!1,t.$swal({title:t.$t("success"),text:"",type:"success"}).then((function(e){t.getListUser()}))):t.$message.error({showClose:!1,message:t.$t("usermanagement.".concat(e.data.message)),type:"error",timeout:5e3})})).catch((function(e){t.$message.error({showClose:!1,message:t.$t("error_text"),type:"error"})}));case 5:t.loadingRemove=!1,e.next=9;break;case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getListUser:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(t){var a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingTable=!0,e.next=3,Object(c["a"])({method:"get",url:u["a"].baseApi+"company/user-company",timeout:6e4,params:{view:1==t||null},data:null}).then((function(e){a.showAlertError=!1,200==e.data.ec?(a.listUser=e.data.data.company.user,a.getCsGroup()):400==e.data.ec&&"not_allowed"==e.data.message&&(a.showAlertError=!0,a.alertErrorMessage="You are not allowed to see this page.")})).catch((function(e){a.showAlertError=!0,a.$message.error({showClose:!1,message:a.$t("error_text"),type:"error"})}));case 3:this.loadingTable=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),invite:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$refs["form"].validate(function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(a){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a){e.next=7;break}return t.loadingReg=!0,e.next=4,Object(c["a"])({method:"post",url:u["a"].baseApi+"company/invite",data:{pic_email:d["a"].getters.email,invited_email:t.form.email,company:d["a"].getters.customerID}}).then((function(e){200==e.data.ec?(t.dialogVisible=!1,t.$swal({title:t.$t("success"),text:t.$t("usermanagement.invite_success"),type:"success"}),t.form.email="",t.getListUser()):400==e.data.ec&&"user_not_register"==e.data.message?(t.sendInvite=!0,t.dialogVisible=!1):500==e.data.ec?t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"warning"}):(t.dialogVisible=!1,t.$swal({title:t.$t("error"),text:t.$t("usermanagement.".concat(e.data.message)),type:"warning"}))})).catch((function(e){t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"error"}).then((function(e){}))}));case 4:t.loadingReg=!1,e.next=8;break;case 7:return e.abrupt("return",!1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),sendEmail:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingEmail=!0,e.next=3,Object(c["a"])({method:"post",url:u["a"].baseApi+"company/send-invite-email",data:{pic_email:d["a"].getters.email,invited_email:this.form.email,company:d["a"].getters.customerID}}).then((function(e){200==e.data.ec?(t.dialogVisible=!1,t.sendInvite=!1,t.$swal({title:t.$t("success"),text:t.$t("register.invite_success"),type:"success"}),t.form.email=""):(t.sendInvite=!1,t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"warning"}))})).catch((function(e){t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"error"}).then((function(e){}))}));case 3:this.loadingEmail=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadPreferences:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({method:"get",url:u["a"].baseApi+"auth/settings/"}).then((function(e){200==e.data.ec&&(t.allowMakerChecker=l.a.find(e.data.data,(function(e){return"makerChecker"==e.options_key})))})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),assignChecker:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingAssignChecker=!0,e.next=3,Object(c["a"])({method:"post",url:u["a"].baseApi+"auth/management/assign-checker",data:{email:this.selectedRows.email,username:this.selectedRows.username}}).then((function(e){t.dialogAssignChecker=!1,200==e.data.ec?(t.$swal({title:t.$t("success"),text:"",type:"success"}),t.getListUser()):t.$swal({title:"Warning",text:"not_allowed"==e.data.message?t.$t("usermanagement.not_allowed"):t.$t("error_text"),type:"warning"})})).catch((function(e){t.dialogAssignChecker=!1,t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"error"})}));case 3:this.loadingAssignChecker=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeChecker:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingAssignChecker=!0,e.next=3,Object(c["a"])({method:"post",url:u["a"].baseApi+"auth/management/unassign-checker",data:{email:this.selectedRows.email,username:this.selectedRows.username}}).then((function(e){t.dialogRemoveChecker=!1,200==e.data.ec?(t.$swal({title:t.$t("success"),text:"",type:"success"}),t.getListUser()):t.$swal({title:"Warning",text:"not_allowed"==e.data.message?t.$t("usermanagement.not_allowed"):t.$t("error_text"),type:"warning"})})).catch((function(e){t.dialogAssignChecker=!1,t.$swal({title:t.$t("error"),text:t.$t("error_text"),type:"error"})}));case 3:this.loadingAssignChecker=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadWA:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["a"])({method:"post",url:"user/detail"}).then((function(e){if(t.loadingForm=!1,200==e.data.ec){t.showFormMessage=!0;var a=[],i=[];l.a.forEach(e.data.data,(function(e){l.a.forEach(e.hsm,(function(e){l.a.isEmpty(e)||a.push(e)})),i.push(e.phoneNumber)})),t.waUserDetail.hsm=l.a.uniqBy(a,"name"),t.waUserDetail.sender=l.a.uniq(i)}else 400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlertMessage=!0:t.showAlertError=!0})).catch((function(e){t.loadingForm=!1,t.showAlertError=!0}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),forEnableDisable:function(){this.listGroupCS.forEach((function(e){e.isDisabled=!1}))}},watch:{dialogTableDetailCsVisible:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.dialogTableDetailCsVisible){e.next=5;break}return e.next=3,this.getCsList();case 3:this.getCsGroup(),this.checkTotalCsGroup=[];case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.$store.getters.isPic){e.next=8;break}return e.next=3,this.getCsList();case 3:return e.next=5,this.getListUser(!0);case 5:this.loadPreferences(),e.next=9;break;case 8:this.showAlert=!0;case 9:this.loadingTableDivision=!0,this.getDivision(),this.loadWA();case 12:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),components:{}},f=h,b=(a("73a8"),a("8cd1"),a("2877")),w=Object(b["a"])(f,i,s,!1,null,"0d9f50e8",null);t["default"]=w.exports},"73a8":function(e,t,a){"use strict";a("5ca3")},7514:function(e,t,a){"use strict";var i=a("5ca1"),s=a("0a49")(5),r="find",n=!0;r in[]&&Array(1)[r]((function(){n=!1})),i(i.P+i.F*n,"Array",{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(r)},"8cd1":function(e,t,a){"use strict";a("4d24")},cd1c:function(e,t,a){var i=a("e853");e.exports=function(e,t){return new(i(e))(t)}},e853:function(e,t,a){var i=a("d3f4"),s=a("1169"),r=a("2b4c")("species");e.exports=function(e){var t;return s(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!s(t.prototype)||(t=void 0),i(t)&&(t=t[r],null===t&&(t=void 0))),void 0===t?Array:t}}}]);