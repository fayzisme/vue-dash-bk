(window.webpackJsonp=window.webpackJsonp||[]).push([["whatsapp-overview"],{"6af9":function(e,t,a){},b7196:function(e,t,a){"use strict";a("6af9")},e790:function(e,t,a){"use strict";a.r(t);var i,s,r,o,n,l=(a("96cf"),a("3b8d")),c=a("271f"),d=(a("db49"),a("c1df")),g=a.n(d),d=a("2ef0"),f=a.n(d),l={name:"Overview",component:{},directives:{echarts:a("f858").a},data:function(){return{optionsMonths:[],selectedPhoneNumber:"",loadingData:!0,clientName:"",companyName:"",companyPhone:"",totalWA:0,showFormMessage:!1,showAlertMessage:!1,showAlertError:!1,today:g()().format("DD MMM YYYY"),tanggal:[0],textSuccess:[0],textFail:[0],textTotal:[0],image:{success:[0],fail:[0],total:[0]},hsm:{success:[0],fail:[0],total:[0]},document:{success:[0],fail:[0],total:[0]},audio:{success:[0],fail:[0],total:[0]},outbond:{success:[0],fail:[0],total:[0]},billWhatsapp:{},isLoading:!0,waServAlias:{text:"Whatsapp Regular Text",hsm:"Whatsapp Template Text",image:"Whatsapp Image",document:"Whatsapp Document",audio:"Whatsapp Audio"},totalBill:0,loadingTable:!0,currentMonth:g()().format("YYYY-MM"),chartOption:{areaColor:"#FFF",grid:{show:!1,left:"20px",right:"50px",bottom:"20px",top:"20px",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{show:!1,data:["line","bar"],textStyle:{color:"#ccc"}},xAxis:[{type:"category",boundaryGap:!1,data:[0],axisLine:{lineStyle:{color:"rgba(255,255,255,0.5)"}}}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.5)"}}}],series:[{name:"Total Outbond Message",type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:10,lineStyle:{color:"#fff"},itemStyle:{color:"#fff",borderColor:"#5f8fdf",borderWidth:3},areaStyle:{color:"rgba(255,255,255,0.2)"},animationDuration:2800,animationEasing:"cubicInOut",data:[0]},{name:"Total Notification Message",type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:10,lineStyle:{color:"#f98643"},itemStyle:{color:"#f98643",borderColor:"#5f8fdf",borderWidth:3},areaStyle:{color:"rgba(255,255,255,0.2)"},animationDuration:2800,animationEasing:"cubicInOut",data:[0]}]},chartOption1:{areaColor:"#FFF",grid:{show:!1,left:"20px",right:"50px",bottom:"20px",top:"20px",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{show:!1,data:["line","bar"],textStyle:{color:"#ccc"}},xAxis:[{type:"category",boundaryGap:!1,data:[0],axisLine:{lineStyle:{color:"rgba(255,255,255,0.5)"}}}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.5)"}}}],series:[{name:"Delivered Outbond Message",type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:10,lineStyle:{color:"#fff"},itemStyle:{color:"#fff",borderColor:"#5f8fdf",borderWidth:3},areaStyle:{color:"rgba(255,255,255,0.2)"},animationDuration:2800,animationEasing:"cubicInOut",data:[0]},{name:"Delivered Notification Message",type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:10,lineStyle:{color:"#f98643"},itemStyle:{color:"#f98643",borderColor:"#5f8fdf",borderWidth:3},areaStyle:{color:"rgba(255,255,255,0.2)"},animationDuration:2800,animationEasing:"cubicInOut",data:[0]}]},chartOption2:{areaColor:"#FFF",grid:{show:!1,left:"20px",right:"50px",bottom:"20px",top:"20px",containLabel:!0},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{show:!1,data:["line","bar"],textStyle:{color:"#ccc"}},xAxis:[{type:"category",boundaryGap:!1,data:[0],axisLine:{lineStyle:{color:"rgba(255,255,255,0.5)"}}}],yAxis:[{type:"value",splitLine:{show:!1},axisLine:{lineStyle:{color:"rgba(255,255,255,0.5)"}}}],series:[{name:"Failed Outbond Message",type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:10,lineStyle:{color:"#fff"},itemStyle:{color:"#fff",borderColor:"#5f8fdf",borderWidth:3},areaStyle:{color:"rgba(255,255,255,0.2)"},animationDuration:2800,animationEasing:"cubicInOut",data:[0]},{name:"Failed Notification Message",type:"line",smooth:!0,showAllSymbol:!0,symbol:"emptyCircle",symbolSize:10,lineStyle:{color:"#f98643"},itemStyle:{color:"#f98643",borderColor:"#5f8fdf",borderWidth:3},areaStyle:{color:"rgba(255,255,255,0.2)"},animationDuration:2800,animationEasing:"cubicInOut",data:[0]}]}}},methods:{changeFilter:(n=Object(l.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wa_billing();case 2:this.renderChart();case 3:case"end":return e.stop()}},e,this)})),function(){return n.apply(this,arguments)}),mailto:function(){location.href="mailto: business.solution@damcorp.id"},print:function(){window.print()},wa_billing:(o=Object(l.a)(regeneratorRuntime.mark(function e(){var a=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.isLoading=!0,e.next=3,Object(c.a)({method:"post",url:"user/overview",data:{months:this.currentMonth,with_date:!0,number:this.selectedPhoneNumber}}).then(function(e){var t,l,c,d,h,u,m,p;a.loadingData=!1,a.isLoading=!1,200==e.data.ec?(a.showAlertError=!1,a.showFormMessage=!0,t=e.data.data,l=new Array,c={success:new Array,fail:new Array,total:new Array},d={success:new Array,fail:new Array,total:new Array},h={success:new Array,fail:new Array,total:new Array},u={success:new Array,fail:new Array,total:new Array},m={success:new Array,fail:new Array,total:new Array},p={success:new Array,fail:new Array,total:new Array},new Array,f.a.forOwn(t,function(e,t){var a=g()(t).format("YYYY-MM-DD");l.push(a);var i=e.text.delivered+e.text.read+e.text.sent,s=e.text.failed+e.text.invalid;c.success.push(i),c.total.push(i+s),c.fail.push(s);var r=e.image.delivered+e.image.read+e.image.sent,o=e.image.failed+e.image.invalid;d.success.push(r),d.fail.push(o),d.total.push(r+o);var n=e.hsm.delivered+e.hsm.read+e.hsm.sent,t=e.hsm.failed+e.hsm.invalid;h.success.push(n),h.fail.push(t),h.total.push(n+t);a=e.document.delivered+e.document.read+e.document.sent,n=e.document.failed+e.document.invalid;u.success.push(a),u.fail.push(n),u.total.push(a+n);t=e.audio.delivered+e.audio.read+e.audio.sent,e=e.audio.failed+e.audio.invalid;m.success.push(t),m.fail.push(e),m.total.push(t+e);t=i+r+a+t,e=s+o+n+e;p.success.push(t),p.fail.push(e),p.total.push(t+e)}),a.tanggal=l,a.textSuccess=c.success,a.textFail=c.fail,a.textTotal=c.total,a.image=d,a.hsm=h,a.document=u,a.audio=m,a.outbond=p):400==e.data.ec&&"not_subscribe"==e.data.message?(a.showAlertMessage=!0,a.showFormMessage=!1):500==e.data.ec&&(a.showAlertError=!0,a.showFormMessage=!1)}).catch(function(e){a.loadingData=!1,a.showAlertError=!0,a.showFormMessage=!1});case 3:this.isLoading=!1;case 4:case"end":return e.stop()}},e,this)})),function(){return o.apply(this,arguments)}),wa_detail:(r=Object(l.a)(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)({method:"post",url:"user/detail/number",data:{channels:"whatsapp"}}).then(function(e){t.companyPhone=e.data.data,t.selectedPhoneNumber=t.companyPhone[0]}).catch(function(e){});case 2:case"end":return e.stop()}},e)})),function(){return r.apply(this,arguments)}),renderChart:function(){var e=Object.assign({},this.chartOption),t=Object.assign({},this.chartOption1),a=Object.assign({},this.chartOption2);e.xAxis[0].data=this.tanggal,e.series[0].data=this.outbond.total,e.series[1].data=this.hsm.total,t.xAxis[0].data=this.tanggal,t.series[0].data=this.outbond.success,t.series[1].data=this.hsm.success,a.xAxis[0].data=this.tanggal,a.series[0].data=this.outbond.fail,a.series[1].data=this.hsm.fail,this.chartOption=e,this.chartOption1=t,this.chartOption2=a}},beforeMount:(s=Object(l.a)(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(this.loadingTable=!1,t=6;0<=t;t--)this.optionsMonths.push({value:g()().subtract(t,"month").format("YYYY-MM"),label:g()().subtract(t,"month").format("MMM YYYY")});case 2:case"end":return e.stop()}},e,this)})),function(){return s.apply(this,arguments)}),mounted:(i=Object(l.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.wa_detail();case 2:return e.next=4,this.wa_billing();case 4:return e.next=6,this.renderChart();case 6:case"end":return e.stop()}},e,this)})),function(){return i.apply(this,arguments)})},a=(a("b7196"),a("2877")),l=Object(a.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],staticClass:"scrollable only-y",attrs:{gutter:10}},[a("div",{staticClass:"page-header"},[a("h1",[t._v(t._s(t.$t("whatsapp.whatsapp"))+" Overview")])]),t.showAlertMessage?a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingData,expression:"loadingData"}],attrs:{align:"center"}},[a("h2",[t._v("Start messaging your customers today")]),a("span",{domProps:{innerHTML:t._s(t.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(e){return t.mailto()}}},[t._v("Send us e-mail")])],1)]):t._e(),t.showAlertMessage?t._e():a("el-card",[a("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"Select Month"},model:{value:t.currentMonth,callback:function(e){t.currentMonth=e},expression:"currentMonth"}},t._l(t.optionsMonths,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1),t._v("   "),a("el-select",{staticStyle:{width:"200px"},attrs:{placeholder:"Select Phone Number","default-first-option":!0},model:{value:t.selectedPhoneNumber,callback:function(e){t.selectedPhoneNumber=e},expression:"selectedPhoneNumber"}},t._l(t.companyPhone,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}),1),t._v("   "),a("el-button",{attrs:{type:"primary",loading:t.isLoading},on:{click:t.changeFilter}},[a("i",{staticClass:"mdi mdi-filter"}),t._v(" Filter")]),a("br"),a("br"),t.showAlertError?a("error-gope-siji",{staticStyle:{"margin-bottom":"1em"}}):t._e(),t.showFormMessage?a("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:24,lg:24,xl:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"card-base bg-accent card-shadow--medium p-10"},[a("h2",{staticClass:"white-text mv-0 mt-5 animated fadeInDown"},[t._v("Whatsapp Overview")]),a("h3",{staticClass:"mt-0 mb-40 white-text o-050 animated slideInUp"},[t._v("Total Sent Message")]),a("div",{directives:[{name:"echarts",rawName:"v-echarts",value:t.chartOption,expression:"chartOption"}],staticClass:"chart"})]),a("br"),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"card-base bg-accent card-shadow--medium p-10"},[a("h2",{staticClass:"white-text mv-0 mt-5 animated fadeInDown"},[t._v("Whatsapp Overview")]),a("h3",{staticClass:"mt-0 mb-40 white-text o-050 animated slideInUp"},[t._v("Delivered Message")]),a("div",{directives:[{name:"echarts",rawName:"v-echarts",value:t.chartOption1,expression:"chartOption1"}],staticClass:"chart"})]),a("br"),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLoading,expression:"isLoading"}],staticClass:"card-base bg-accent card-shadow--medium p-10"},[a("h2",{staticClass:"white-text mv-0 mt-5 animated fadeInDown"},[t._v("Whatsapp Overview")]),a("h3",{staticClass:"mt-0 mb-40 white-text o-050 animated slideInUp"},[t._v("Failed Message")]),a("div",{directives:[{name:"echarts",rawName:"v-echarts",value:t.chartOption2,expression:"chartOption2"}],staticClass:"chart"})])]):t._e()],1)],1)},[],!1,null,null,null);t.default=l.exports}}]);