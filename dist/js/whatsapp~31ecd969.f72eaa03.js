(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["whatsapp~31ecd969"],{"0a49":function(e,t,a){var r=a("9b43"),i=a("626a"),n=a("4bf8"),s=a("9def"),o=a("cd1c");e.exports=function(e,t){var a=1==e,l=2==e,c=3==e,u=4==e,d=6==e,p=5==e||d,m=t||o;return function(t,o,h){for(var f,g,v=n(t),b=i(v),w=r(o,h,3),y=s(b.length),_=0,x=a?m(t,y):l?m(t,0):void 0;y>_;_++)if((p||_ in b)&&(f=b[_],g=w(f,_,v),e))if(a)x[_]=g;else if(g)switch(e){case 3:return!0;case 5:return f;case 6:return _;case 2:x.push(f)}else if(u)return!1;return d?-1:c||u?u:x}}},1169:function(e,t,a){var r=a("2d95");e.exports=Array.isArray||function(e){return"Array"==r(e)}},"1c4c":function(e,t,a){"use strict";var r=a("9b43"),i=a("5ca1"),n=a("4bf8"),s=a("1fa8"),o=a("33a4"),l=a("9def"),c=a("f1ae"),u=a("27ee");i(i.S+i.F*!a("5cc5")((function(e){Array.from(e)})),"Array",{from:function(e){var t,a,i,d,p=n(e),m="function"==typeof this?this:Array,h=arguments.length,f=h>1?arguments[1]:void 0,g=void 0!==f,v=0,b=u(p);if(g&&(f=r(f,h>2?arguments[2]:void 0,2)),void 0==b||m==Array&&o(b))for(t=l(p.length),a=new m(t);t>v;v++)c(a,v,g?f(p[v],v):p[v]);else for(d=b.call(p),a=new m;!(i=d.next()).done;v++)c(a,v,g?s(d,f,[i.value,v],!0):i.value);return a.length=v,a}})},"20d6":function(e,t,a){"use strict";var r=a("5ca1"),i=a("0a49")(6),n="findIndex",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),r(r.P+r.F*s,"Array",{findIndex:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},2187:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingForm,expression:"loadingForm"}],staticClass:"scrollable only-y"},[r("div",{staticClass:"page-header"},[r("h1",[e._v(e._s(e.$t("whatsapp.whatsapp")))])]),e.showAlertMessage?r("el-card",{attrs:{align:"center"}},[r("h2",[e._v("Start messaging your customers today")]),r("span",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),r("br"),r("br"),r("span",[r("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1),2==e.customer_type&&void 0==e.businessId||""==e.businessId?r("div",{staticStyle:{margin:"0 0 20px"}},[r("button",{staticStyle:{"background-color":"#1877f2",border:"0","border-radius":"23px",color:"#fff",cursor:"pointer","font-family":"Helvetica, Arial, sans-serif","font-size":"14px","font-weight":"bold",height:"40px",padding:"0 24px","margin-top":"20px"},attrs:{onclick:"launchWhatsAppSignup()"}},[e._v("Connect to Facebook")])]):e._e()]):e._e(),e.showAlertError?r("el-card",{staticStyle:{"margin-bottom":"1em"}},[r("error-gope-siji")],1):e._e(),e.showFormMessage?r("el-card",[r("el-steps",{attrs:{active:e.step,"align-center":""}},[r("el-step",{attrs:{title:e.$t("whatsapp.step_1"),description:e.$t("whatsapp.step_1_description")}}),r("el-step",{attrs:{title:e.$t("whatsapp.step_2"),description:e.$t("whatsapp.step_2_description")}}),r("el-step",{attrs:{title:e.$t("whatsapp.step_3"),description:e.$t("whatsapp.step_3_description")}})],1),0==e.step?[r("el-form",{attrs:{"label-position":"top","label-width":"100px",model:e.form}},[r("el-row",{attrs:{gutter:10}},[r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:18,lg:18,xl:18}},[e.waUserDetail.headerTemp&&"text"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-card",{attrs:{shadow:"never"}},[r("div",[r("h5",[e._v("Header format : "),r("el-tag",[e._v(e._s(e.waUserDetail.templateHeaderFormat))]),e._v(" Header text preview : "),r("el-tag",[e._v(e._s(e.parsingDataHeader(e.choose_template,e.waUserDetail.headerText)))])],1)]),1==e.paramHeaderText?r("div",{staticClass:"mt-10"},[r("el-input",{attrs:{type:"text",placeholder:"Insert header text parameter"},model:{value:e.waUserDetail.headerText,callback:function(t){e.$set(e.waUserDetail,"headerText",t)},expression:"waUserDetail.headerText"}})],1):e._e()]):e._e(),e.waUserDetail.headerTemp&&"image"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-card",{attrs:{shadow:"never"}},[r("div",[r("h5",[e._v("Header format : "),r("el-tag",[e._v(e._s(e.waUserDetail.templateHeaderFormat))])],1)]),[r("el-select",{attrs:{placeholder:"Select image source"},model:{value:e.mediaSource,callback:function(t){e.mediaSource=t},expression:"mediaSource"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],r("div",{staticClass:"mt-10"},["url"==e.mediaSource?r("el-input",{attrs:{type:"text",placeholder:"Insert image URL here"},model:{value:e.waUserDetail.headerImage,callback:function(t){e.$set(e.waUserDetail,"headerImage",t)},expression:"waUserDetail.headerImage"}}):e._e(),r("div",{staticStyle:{width:"1500px","min-width":"0",display:"table-cell"}},["local"==e.mediaSource?r("el-upload",{staticClass:"upload-demo",attrs:{id:"inputMedia","http-request":e.renderMedia,action:"","on-preview":e.handlePreview,"on-remove":e.handleRemove,"before-upload":e.beforeUploadMedia,"before-remove":e.beforeRemove,"file-list":e.handleListMedia,drag:"","list-type":"picture",limit:1,"on-exceed":e.handleExceed},model:{value:e.waUserDetail.headerImage,callback:function(t){e.$set(e.waUserDetail,"headerImage",t)},expression:"waUserDetail.headerImage"}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text",on:{click:e.renderMedia}},[e._v("Drop file here or "),r("em",[e._v("click to upload")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[r("b",[e._v("The maximum file upload size is 5 MB")])])]):e._e()],1),r("div",["csv"==e.mediaSource?r("el-input",{attrs:{placeholder:"Please input CSV header"},model:{value:e.waUserDetail.headerCSV,callback:function(t){e.$set(e.waUserDetail,"headerCSV",t)},expression:"waUserDetail.headerCSV"}},[r("template",{slot:"prepend"},[e._v(e._s(e.waUserDetail.hashtag_csv))])],2):e._e()],1)],1)],2):e._e(),e.waUserDetail.headerTemp&&"document"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-card",{attrs:{shadow:"never"}},[r("div",[r("h5",[e._v("Header format : "),r("el-tag",[e._v(e._s(e.waUserDetail.templateHeaderFormat))])],1)]),[r("el-select",{attrs:{placeholder:"Select document source"},model:{value:e.mediaSource,callback:function(t){e.mediaSource=t},expression:"mediaSource"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],r("div",{staticClass:"mt-10"},["url"==e.mediaSource?r("el-input",{attrs:{type:"text",placeholder:"Insert document URL here"},model:{value:e.waUserDetail.headerDocument,callback:function(t){e.$set(e.waUserDetail,"headerDocument",t)},expression:"waUserDetail.headerDocument"}}):e._e(),"local"==e.mediaSource?r("el-upload",{staticClass:"upload-demo",attrs:{id:"inputMedia","http-request":e.renderMedia,action:"","on-preview":e.handlePreview,"before-upload":e.beforeUploadMedia,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,drag:"","list-type":"text","file-list":e.handleListMedia,limit:1,"on-exceed":e.handleExceed},model:{value:e.waUserDetail.headerDocument,callback:function(t){e.$set(e.waUserDetail,"headerDocument",t)},expression:"waUserDetail.headerDocument"}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text",on:{click:e.renderMedia}},[e._v("Drop file here or "),r("em",[e._v("click to upload")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[r("b",[e._v("The maximum file upload size is 100 MB")])])]):e._e(),r("div",["csv"==e.mediaSource?r("el-input",{attrs:{placeholder:"Please input CSV header"},model:{value:e.waUserDetail.headerCSV,callback:function(t){e.$set(e.waUserDetail,"headerCSV",t)},expression:"waUserDetail.headerCSV"}},[r("template",{slot:"prepend"},[e._v(e._s(e.waUserDetail.hashtag_csv))])],2):e._e()],1)],1)],2):e._e(),e.waUserDetail.headerTemp&&"video"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-card",{attrs:{shadow:"never"}},[r("div",[r("h5",[e._v("Header format : "),r("el-tag",[e._v(e._s(e.waUserDetail.templateHeaderFormat))])],1)]),[r("el-select",{attrs:{placeholder:"Select video source"},model:{value:e.mediaSource,callback:function(t){e.mediaSource=t},expression:"mediaSource"}},e._l(e.options,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],r("div",{staticClass:"mt-10"},["url"==e.mediaSource?r("el-input",{attrs:{type:"text",placeholder:"Insert video URL here"},model:{value:e.waUserDetail.headerVideo,callback:function(t){e.$set(e.waUserDetail,"headerVideo",t)},expression:"waUserDetail.headerVideo"}}):e._e(),"local"==e.mediaSource?r("el-upload",{staticClass:"upload-demo",attrs:{id:"inputMedia","http-request":e.renderMedia,action:"","on-preview":e.handlePreview,"before-upload":e.beforeUploadMedia,"on-remove":e.handleRemove,"before-remove":e.beforeRemove,drag:"","list-type":"text","file-list":e.handleListMedia,limit:1,"on-exceed":e.handleExceed},model:{value:e.waUserDetail.headerVideo,callback:function(t){e.$set(e.waUserDetail,"headerVideo",t)},expression:"waUserDetail.headerVideo"}},[r("i",{staticClass:"el-icon-upload"}),r("div",{staticClass:"el-upload__text",on:{click:e.renderMedia}},[e._v("Drop file here or "),r("em",[e._v("click to upload")])]),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[r("b",[e._v("The maximum file upload size is 16 MB")])])]):e._e(),r("div",["csv"==e.mediaSource?r("el-input",{attrs:{placeholder:"Please input CSV header"},model:{value:e.waUserDetail.headerCSV,callback:function(t){e.$set(e.waUserDetail,"headerCSV",t)},expression:"waUserDetail.headerCSV"}},[r("template",{slot:"prepend"},[e._v(e._s(e.waUserDetail.hashtag_csv))])],2):e._e()],1)],1)],2):e._e(),e.choose_template?r("div",e._l(e.paramCount,(function(t){return r("el-form-item",{key:t,staticClass:"mb-0",attrs:{label:"Param "+t}},[r("el-input",{attrs:{type:"text"},model:{value:e.param[t-1],callback:function(a){e.$set(e.param,t-1,a)},expression:"param[i-1]"}})],1)})),1):e._e(),"document"==e.sendCategory?r("el-form-item",{staticClass:"mb-0",attrs:{label:"Filename"}},[r("el-input",{attrs:{type:"text"},model:{value:e.filename,callback:function(t){e.filename=t},expression:"filename"}})],1):e._e(),["image","text"].indexOf(e.sendCategory)>-1?r("el-form-item",{staticClass:"mb-0",attrs:{label:e.$t("whatsapp.message")}},[e.choose_template?r("el-input",{attrs:{type:"textarea",value:e.parsingData(e.choose_template,e.param),rows:"8",readonly:""}}):e._e(),e.choose_template?r("p",{staticClass:"float-right m-0"},[e._v(e._s(e.parsingData(e.choose_template,e.param).length)+" "+e._s(e.$t("whatsapp.characters")))]):e._e(),e.choose_template?e._e():r("el-input",{attrs:{type:"textarea",rows:"8",readonly:""},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}}),e.choose_template?e._e():r("p",{staticClass:"float-right m-0"},[e._v(e._s(e.form.message.length)+" "+e._s(e.$t("whatsapp.characters")))]),""!=e.template_button&&void 0!=e.template_button?r("div",e._l(e.buttonElement,(function(t,a){return r("el-card",{key:a,staticClass:"mt-50",attrs:{shadow:"never"}},[r("el-form-item",{staticClass:"mb-0",attrs:{label:"Button Type"}},[r("el-input",{attrs:{type:"text",readonly:""},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}})],1),r("el-form-item",{staticClass:"mb-0",attrs:{label:"Button Text"}},[r("el-input",{attrs:{type:"text",readonly:""},model:{value:t.text,callback:function(a){e.$set(t,"text",a)},expression:"item.text"}})],1),r("el-form-item",{staticClass:"mb-0",attrs:{label:"Button Preview"}},[r("el-button",{attrs:{disabled:""}},[e._v(e._s(t.text))])],1),e.paramCountUrl>0?r("div",e._l(e.paramCountUrl,(function(t){return r("el-form-item",{key:t,staticClass:"mb-20",attrs:{label:"Param "+t}},[r("el-input",{attrs:{type:"text"},model:{value:e.paramButton[t-1],callback:function(a){e.$set(e.paramButton,t-1,a)},expression:"paramButton[i-1]"}})],1)})),1):e._e(),r("el-input",{staticClass:"mt-15",style:[""==e.parsingDataButton(e.choose_template,e.paramButton)?{display:"none"}:{display:"inline-block"}],attrs:{type:"textarea",value:e.parsingDataButton(e.choose_template,e.paramButton),rows:"8",readonly:""}})],1)})),1):e._e()],1):e._e()],1),r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:6,lg:6,xl:6}},[r("el-form-item",{attrs:{label:"Template"}},[r("el-select",{attrs:{filterable:""},on:{change:e.resetTemplate},model:{value:e.choose_template,callback:function(t){e.choose_template=t},expression:"choose_template"}},[r("el-option",{attrs:{label:"No Template",value:""}}),e._l(e.waUserDetail.hsm,(function(e){return r("el-option",{key:e.name,attrs:{label:e.name,value:e.name}})}))],2)],1),r("div",{staticClass:"font-size-14"},[r("p",{staticClass:"mb-0"},[e._v(e._s(e.$t("whatsapp.use"))+" :")]),r("ul",{staticClass:"mt-0"},[r("li",[e._v("*text* "+e._s(e.$t("whatsapp.to_get"))+" "),r("strong",[e._v("text")])]),r("li",[e._v("_text_ "+e._s(e.$t("whatsapp.to_get"))+" "),r("i",[e._v("text")])]),r("li",[e._v("~text~ "+e._s(e.$t("whatsapp.to_get"))+" "),r("del",[e._v("text")])]),r("li",[e._v("```code``` "+e._s(e.$t("whatsapp.to_get"))+" "),r("span",{staticStyle:{"font-family":"monospace"}},[e._v("code")])])])])],1)],1)],1),r("div",{staticClass:"footer"},[r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{disabled:e.disabledButtonNext,type:"primary"},on:{click:function(t){return e.stepHandle(1)}}},[e._v(e._s(e.$t("generic.next"))+" "),r("i",{staticClass:"mdi mdi-arrow-right-bold-circle"})])],1)]:e._e(),1==e.step?[r("el-form",{attrs:{"label-position":"top","label-width":"100px",model:e.form}},[r("h2",[e._v("Sending Time")]),r("div",["false"==e.allowMakerChecker.options_value||0==e.allowMakerChecker.options_value?r("el-radio",{attrs:{label:"now",border:""},on:{change:function(t){return e.resetSendDate()}},model:{value:e.sendTime,callback:function(t){e.sendTime=t},expression:"sendTime"}},[e._v("Now")]):e._e(),r("el-radio",{attrs:{label:"later",border:""},on:{change:function(t){return e.resetSendDate()}},model:{value:e.sendTime,callback:function(t){e.sendTime=t},expression:"sendTime"}},[e._v("Later")])],1),"later"==e.sendTime?r("div",{staticClass:"mt-10"},[r("el-date-picker",{attrs:{type:"date",placeholder:"Pick a day",format:"yyyy-MM-dd","value-format":"yyyy-MM-dd","picker-options":{disabledDate:e.disabledDate}},model:{value:e.scheduleDate,callback:function(t){e.scheduleDate=t},expression:"scheduleDate"}}),r("el-time-select",{staticClass:"ml-10",attrs:{placeholder:"Select time",disabled:!e.scheduleDate,"picker-options":{start:e.scheduleTimeStart,step:"01:00",end:"23:59"}},model:{value:e.scheduleTime,callback:function(t){e.scheduleTime=t},expression:"scheduleTime"}})],1):e._e(),r("h2",[e._v("Sender")]),r("div",e._l(e.waUserDetail.sender,(function(t){return r("el-radio",{key:t,attrs:{label:t,border:""},on:{change:function(t){e.alternatifEmail=!1,e.handleChangeQuota()}},model:{value:e.sender,callback:function(t){e.sender=t},expression:"sender"}},[e._v(e._s(t))])})),1),r("h2",[e._v("Recipients")]),r("el-row",{attrs:{gutter:10}},[r("el-col",{attrs:{xs:24,sm:24,md:18,lg:18,xl:18}},[r("el-alert",{staticClass:"mt-10",attrs:{closable:!1,title:e.countTo+" Recipients"}}),r("div",[e._l(e.selectedRecipient.slice(0,10),(function(t){return r("el-tag",{key:t.id,staticClass:"mt-10",attrs:{closable:"","disable-transitions":!0},on:{close:function(a){return e.handleCloseRecipient(t)}}},[e._v(e._s(t.name))])})),e.selectedRecipient.length>10?r("el-tag",{staticClass:"mt-10"},[e._v("+"+e._s(e.selectedRecipient.length-10)+" more")]):e._e()],2)],1),r("el-col",{attrs:{xs:24,sm:24,md:6,lg:6,xl:6}},[r("div",{staticClass:"mt-10"},[r("el-button",{staticClass:"full-button text-left",attrs:{type:"primary"},on:{click:e.openCsvDialog}},[r("i",{staticClass:"mdi mdi-plus-circle"}),e._v(" Add from CSV")])],1),r("div",{staticClass:"mt-10"},[e.alternatifEmail||e.itHas||e.itHasBtn||e.alternatifSms?e._e():r("el-button",{staticClass:"full-button text-left",attrs:{type:"primary"},on:{click:e.openGroupDialog}},[r("i",{staticClass:"mdi mdi-plus-circle"}),e._v(" Add from group")])],1),r("div",{staticClass:"mt-10"},[e.alternatifEmail||e.itHas||e.itHasBtn||e.alternatifSms?e._e():r("el-button",{staticClass:"full-button text-left",attrs:{type:"primary"},on:{click:e.openContactDialog}},[r("i",{staticClass:"mdi mdi-plus-circle"}),e._v(" Add from contact")])],1)])],1),r("div",{staticClass:"footer"},[r("el-button",{staticClass:"mt-10 mb-20 float-left",on:{click:function(t){e.step=0,e.resetTemplate(!1,!1)}}},[r("i",{staticClass:"mdi mdi-arrow-left-bold-circle"}),e._v(" "+e._s(e.$t("generic.back")))]),r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{type:"primary"},on:{click:function(t){return e.stepHandle(2)}}},[e._v(e._s(e.$t("generic.next"))+" "),r("i",{staticClass:"mdi mdi-arrow-right-bold-circle"})])],1)],1)]:e._e(),2==e.step?[r("el-form",{attrs:{"label-position":"top","label-width":"100px",model:e.form}},[r("h2",[e._v("Verify your message")]),r("el-row",{attrs:{gutter:10}},[r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:18,lg:18,xl:18}},[["audio","document"].indexOf(e.sendCategory)<0?r("el-form-item",{attrs:{label:e.labelName[e.sendCategory]}},[e.choose_template?e._e():r("el-input",{attrs:{type:"textarea",rows:"5",readonly:""},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}}),e.choose_template?r("el-input",{attrs:{type:"textarea",value:e.parsingPreview(),rows:"5",readonly:""}}):e._e()],1):e._e(),e.waUserDetail.templateHeaderFormat?r("el-form-item",{attrs:{label:"Header type"}},[r("el-input",{attrs:{value:e.waUserDetail.templateHeaderFormat,readonly:""}})],1):e._e(),"image"==e.waUserDetail.templateHeaderFormat.toLowerCase()&&"csv"!=e.mediaSource?r("el-form-item",{attrs:{label:"Media URL"}},["image"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-input",{attrs:{value:e.waUserDetail.headerImage,readonly:""}}):"document"==e.waUserDetail.templateHeaderFormat?r("el-input",{attrs:{value:e.waUserDetail.headerDocument,readonly:""}}):e._e()],1):e._e(),"video"==e.waUserDetail.templateHeaderFormat.toLowerCase()&&"csv"!=e.mediaSource?r("el-form-item",{attrs:{label:"Media URL"}},["video"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-input",{attrs:{value:e.waUserDetail.headerVideo,readonly:""}}):e._e()],1):e._e(),"document"==e.waUserDetail.templateHeaderFormat&&"csv"!=e.mediaSource?r("el-form-item",{attrs:{label:"Media URL"}},["image"==e.waUserDetail.templateHeaderFormat.toLowerCase()?r("el-input",{attrs:{value:e.waUserDetail.headerImage,readonly:""}}):"document"==e.waUserDetail.templateHeaderFormat?r("el-input",{attrs:{value:e.waUserDetail.headerDocument,readonly:""}}):e._e()],1):e._e(),e.waUserDetail.templateHeaderFormat&&"csv"==e.mediaSource?r("el-form-item",{attrs:{label:"Header CSV"}},[r("el-input",{attrs:{value:e.waUserDetail.hashtag_csv+e.waUserDetail.headerCSV,readonly:""}})],1):e._e(),"text"==e.waUserDetail.templateHeaderFormat&&1==e.paramHeaderText?r("el-form-item",{attrs:{label:"Text header parameter"}},[r("el-input",{attrs:{value:e.waUserDetail.headerText,readonly:""}})],1):e._e(),["audio","document"].indexOf(e.sendCategory)>=0?r("el-form-item",{attrs:{label:"File name"}},[r("el-input",{attrs:{value:e.filename+"."+e.extensionFile,readonly:""}})],1):e._e(),"image"==e.sendCategory?r("el-form-item",{staticClass:"image",attrs:{label:"Preview"}},[r("img",{attrs:{src:e.dataFile,width:"268"}})]):e._e(),e._l(e.buttonElement,(function(t,a){return r("div",{key:a},[""!=e.template_button&&void 0!=e.template_button?r("el-form-item",{attrs:{label:"Button Type"}},[e.choose_template?r("el-input",{attrs:{type:"text",rows:"5",readonly:""},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}}):e._e()],1):e._e(),""!=e.template_button&&void 0!=e.template_button?r("el-form-item",{class:["URL"==t.type?"mb-0":"mb-20"],attrs:{label:"Button Preview"}},[r("el-button",{attrs:{disabled:""}},[e._v(e._s(t.text))])],1):e._e(),""!=e.template_button&&void 0!=e.template_button&&"URL"==t.type?r("el-form-item",{staticClass:"mt-20",attrs:{label:"Button URL"}},[e.choose_template?e._e():r("el-input",{attrs:{type:"text",rows:"5",readonly:""},model:{value:e.form.buttonContents,callback:function(t){e.$set(e.form,"buttonContents",t)},expression:"form.buttonContents"}}),e.choose_template?r("el-input",{attrs:{type:"text",value:e.parsingPreviewButton(),rows:"5",readonly:""}}):e._e()],1):e._e()],1)})),r("el-form-item",{attrs:{label:"Number of recipients"}},[r("el-input",{attrs:{value:e.countTo,readonly:""}})],1),r("el-form-item",{attrs:{label:"Sender"}},[r("el-input",{attrs:{value:e.sender,readonly:""}})],1),r("el-form-item",{attrs:{label:"Sending Time"}},[r("el-input",{attrs:{value:"later"==e.sendTime?e.actualSendTime:"Now",readonly:""}})],1)],2),r("el-col",{staticClass:"mt-10",attrs:{xs:24,sm:24,md:6,lg:6,xl:6}})],1),r("div",{staticClass:"footer"},[r("el-button",{staticClass:"mt-10 mb-20 float-left",on:{click:function(t){e.step=1}}},[r("i",{staticClass:"mdi mdi-arrow-left-bold-circle"}),e._v(" "+e._s(e.$t("generic.back")))]),e.choose_template||"text"!=e.sendCategory?e._e():r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.sendMessage()}}},[e._v(e._s(e.$t("submit")))]),e.choose_template?r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.sendHSM()}}},[r("i",{staticClass:"mdi mdi-check-circle"}),e._v(" "+e._s(e.$t("submit")))]):e._e(),e.choose_template||"audio"!=e.sendCategory?e._e():r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.sendAudio()}}},[e._v(e._s(e.$t("submit")))]),e.choose_template||"document"!=e.sendCategory?e._e():r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.sendDocument()}}},[e._v(e._s(e.$t("submit")))]),e.choose_template||"image"!=e.sendCategory?e._e():r("el-button",{staticClass:"mt-10 mb-20 float-right",attrs:{type:"primary",loading:e.btnLoading},on:{click:function(t){return e.sendImage()}}},[e._v(e._s(e.$t("submit")))])],1)],1)]:e._e()],2):e._e(),r("el-dialog",{attrs:{title:"Add From Group",visible:e.groupDialog.visible},on:{"update:visible":function(t){return e.$set(e.groupDialog,"visible",t)}}},[r("el-table",{ref:"groupTable",staticStyle:{width:"100%"},attrs:{data:e.groups},on:{"selection-change":e.handleGroupSelectionChange}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"group_name",label:"Group Name"}}),r("el-table-column",{attrs:{prop:"member",label:"Number of Contact"}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.groupDialog.visible=!1}}},[e._v(e._s(e.$t("submit")))])],1)],1),r("el-dialog",{attrs:{title:"Add From Contact",visible:e.contactDialog.visible},on:{"update:visible":function(t){return e.$set(e.contactDialog,"visible",t)}}},[r("div",[r("el-input",{staticClass:"search-contact",attrs:{"prefix-icon":"el-icon-search",placeholder:e.$t("contact.search"),clearable:""},on:{clear:e.loadContactAll},nativeOn:{keypress:function(t){return e.doSearchContact.apply(null,arguments)},keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.doSearchContact.apply(null,arguments)}},model:{value:e.searchContact,callback:function(t){e.searchContact=t},expression:"searchContact"}})],1),r("br"),r("div",{staticClass:"clearfix"},[r("el-pagination",{attrs:{"current-page":e.currentPageContact,background:"",layout:"prev, pager, next",total:e.contactsTotal},on:{"current-change":e.nextContact}})],1),r("br"),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingContact,expression:"loadingContact"}],ref:"contactTable",staticStyle:{width:"100%"},attrs:{data:e.contacts},on:{select:e.handleContactSelectSingle,"select-all":e.handleContactSelect}},[r("el-table-column",{attrs:{type:"selection",width:"55"}}),r("el-table-column",{attrs:{prop:"phone_number",label:"Phone Number"}}),r("el-table-column",{attrs:{prop:"name",label:"Fullname"}}),r("template",{staticStyle:{height:"200px"},slot:"empty"},[r("p",{staticStyle:{color:"#909399"},attrs:{align:"center"}},[r("img",{attrs:{src:a("e0aa"),width:"100"}}),r("br"),e._v("Contact not found ")])])],2),r("br"),r("div",{staticClass:"clearfix"},[r("el-pagination",{attrs:{"current-page":e.currentPageContact,background:"",layout:"prev, pager, next",total:e.contactsTotal},on:{"current-change":e.nextContact}})],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"success",circle:""},on:{click:e.selectAllContact}},[e._v("All")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.contactDialog.visible=!1}}},[e._v(e._s(e.$t("submit")))])],1)],1),r("el-dialog",{attrs:{title:"Add From CSV",visible:e.csvDialog.visible},on:{"update:visible":function(t){return e.$set(e.csvDialog,"visible",t)}}},[r("el-form",{attrs:{"label-position":"left","label-width":"150px","element-loading-text":"Please wait while we read your file..."}},[r("el-form-item",{staticClass:"mb-0",attrs:{label:"File"}},[r("div",{staticClass:"el-input"},[r("input",{staticClass:"uploader el-input__inner",attrs:{type:"file",accept:".csv",id:"inputCsvFile"},on:{change:e.onUploadCsv}})]),r("el-progress",{attrs:{percentage:e.uploadCsvProgress}})],1),e.mandatoryHeader.length>0?r("el-form-item",{staticClass:"tooltip",attrs:{label:""}},[r("p",[e._v(e._s(e.$t("whatsapp.csv_upload_info"))+": "),e._l(e.mandatoryHeader,(function(t,a){return r("ul",{key:a},[r("li",[e._v(e._s(t))])])}))],2)]):e._e()],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary",loading:e.readingCsv,disabled:0!=e.readingCsv},on:{click:e.renderCsvData}},[e._v(e._s(e.$t("submit")))])],1)],1)],1)},i=[],n=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("20d6"),a("4917"),a("ade3")),s=a("3835"),o=(a("28a5"),a("7f7f"),a("96cf"),a("1da1")),l=(a("a481"),a("ac6a"),a("6762"),a("2fdb"),a("7514"),a("271f")),c=a("bc3a"),u=a.n(c),d=a("db49"),p=a("7f45"),m=a.n(p),h=a("2ef0"),f=a.n(h),g=a("c0d6");function v(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=b(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,s=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return s=e.done,e},e:function(e){o=!0,n=e},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw n}}}}function b(e,t){if(e){if("string"===typeof e)return w(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a("df7c");var y=a("cee5"),_=(y.partial({standard:"iec"}),a("3e8f"),{data:function(){return{customer_type:g["a"].getters.customer_type,accessToken:"EAAUgLzR0jD0BAIuWaS2zHlR6tqdzeQWHHHajrRAmCHP5IelBMcGrI0LYzLghivOTOMSRDUFZBpgYI1gIyuUVhKXTKqjgEPYHZAFC1FpuMUPjDczkPZAx12mUn9yYQIqELz9LN7mE1wr6AhUgHKC5p5Ev5rv1PxZBRcIvMruvphlaJl5S67gZBT3RrZALZArtx5LBPw3nEyf0Utw7hJY6a0z",paramHeaderText:!1,documentFileName:"",uploadCsvProgress:0,showFormMessage:!1,showAlertMessage:!1,btnLoading:!1,alternatifEmail:!1,alternatifSms:!1,step:0,sampleParam:[],sampleParamUrl:[],form:{message:"",buttonContents:""},labelName:{text:"Preview Message",hsm:"Preview Message",image:"Caption",document:"Filename"},groupDialog:{visible:!1},csvDialog:{visible:!1},contactDialog:{visible:!1},groups:[],groupSelection:[],contacts:[],contactsTotal:0,contactSelection:[],loadingContact:!1,currentPageContact:1,selectedRecipient:[],waUserDetail:{hsm:[],sender:{},headerTemp:"",templateHeaderType:"",templateHeaderFormat:"",templateHeaderText:"",urlButtonText:"",headerText:"",headerImage:"",headerDocument:"",headerVideo:"",hashtag_csv:"#csv_",headerCSV:"",csv_header:"",mediaExt:"",imageSource:"",footer:"",button:{}},handleListMedia:[],options:[{value:"local",label:"Local Computer"},{value:"url",label:"URL"},{value:"csv",label:"CSV"}],mediaSource:"",fileList:[],sender:"",template:"No Template",choose_template:"",paramCount:0,paramCountUrl:0,headerParamCount:0,param:[],paramButton:[],buttonParam:[],buttonElement:[{text:"",type:"",url:""}],bulkparam:[],mandatoryHeader:["phone"],recipientDataSource:"",dataFile:"",acceptedFile:!1,extensionFile:"",filename:"",csvHaveHeader:!1,csvData:[],sendTime:"now",scheduleDate:"",scheduleTime:"",loadingForm:!0,readingCsv:!1,showAlertError:!1,template_message:"",template_header:"",template_button:"",itHas:!1,itHasBtn:!1,timeout:null,searchContact:"",allowMakerChecker:!0,quotaLoader:!1,quotaCardLoader:!1,totalBill:0,quota:0,whatsappNumber:[],whatsappBilling:[],fillProductNotif:[],billing_product_log:[],dataProduct:[],selectNumber:"",product_type:"",disabledButtonNext:!1}},methods:{handleRemove:function(e,t){this.waUserDetail.headerImage="",this.waUserDetail.headerDocument="",this.waUserDetail.headerVideo=""},handleExceed:function(e,t){},beforeRemove:function(e,t){},handleChangeQuota:function(){var e=this;this.product_type="";var t=f.a.find(this.dataProduct,(function(t){return t.phone_number==e.selectNumber}));t&&t.billing.length>0&&(this.fillProductNotif=t.billing.filter((function(e){return e.product.productName.includes("Whatsapp Notification")})),this.fillProductNotif.length>0&&(this.fillProductNotif.forEach((function(e){e.product.alias=e.product.type.replace(/_/g," ").replace(/(^\w{1})|(\s+\w{1})/g,(function(e){return e.toUpperCase()}))})),""==this.product_type&&(this.product_type=this.fillProductNotif[0].product._id),this.handleChangeProduct()))},handleChangeProduct:function(){var e=this;this.quotaLoader=!0;var t=0,a=f.a.find(this.fillProductNotif,(function(t){return t.product._id==e.product_type})),r=a.product.count||0;r+=a.product.monthly_free_count||0,t=a.detail&&a.detail>0?a.detail.filter((function(e){return"+62"==e.countryCode})).reduce((function(e,t){return e+t.count}),0)||0:a.delivered,this.quota=r-t,this.quota<0&&(this.quota="-"),this.quotaLoader=!1},doSearchContact:function(){var e=this;clearTimeout(this.timeout),this.timeout=setTimeout((function(){e.searchContact.length>=3?(e.currentPageContact=e.currentPageGroupContact=e.currentPage=1,e.doGetSearchContact(e.searchContact)):e.loadContactAll()}),1e3)},doGetSearchContact:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r=this,i=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=i.length>0&&void 0!==i[0]?i[0]:"",a=i.length>1&&void 0!==i[1]?i[1]:1,this.loadingContact=!0,e.next=5,Object(l["a"])({method:"get",url:"phonebook/search",params:{page:a,query:t,group_id:""}}).then((function(e){r.contacts=e.data.data.contact,r.contactsTotal=e.data.rows})).catch((function(e){r.showAlertError=!0}));case 5:this.loadingContact=!1,this.refreshCheckboxContact();case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkParamHasHastag:function(){var e=this;this.itHas=!1,this.itHasBtn=!1;var t=/(^|\s)(#[a-z\d-]+)/gi;f.a.forEach(this.param,(function(a){var r=t.test(a);1!=r||(e.itHas=!0)})),f.a.forEach(this.paramButton,(function(a){var r=t.test(a);1!=r||(e.itHasBtn=!0)}))},checkIfEmailIntegrate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=this.alternatifEmail){e.next=5;break}return this.loadingForm=!0,e.next=4,Object(l["a"])({method:"post",url:"email/detail",data:{number:this.sender}}).then((function(e){200==e.data.ec?0==e.data.data.length?t.$swal(t.$t("error"),t.$t("email.not_subscribe"),"warning"):(t.$swal(t.$t("success"),t.$t("email.confirm_redirect"),"success"),t.mandatoryHeader.push("email")):400==e.data.ec&&"not_subscribe"==e.data.message&&(t.$swal(t.$t("error"),t.$t("email.not_subscribe"),"warning"),t.alternatifEmail=!1)})).catch((function(e){t.alternatifEmail=!1}));case 4:this.loadingForm=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),checkIfSmsIntegrate:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1!=this.alternatifSms){e.next=5;break}return this.loadingForm=!0,e.next=4,Object(l["a"])({method:"post",url:"sms/detail",data:{number:this.sender}}).then((function(e){200==e.data.ec?0==e.data.data.length?t.$swal(t.$t("error"),t.$t("sms.not_subscribe"),"warning"):(t.$swal(t.$t("success"),t.$t("success"),"success"),t.mandatoryHeader.pull("email")):400==e.data.ec&&"not_subscribe"==e.data.message&&(t.$swal(t.$t("error"),t.$t("sms.not_subscribe"),"warning"),t.alternatifEmail=!1)})).catch((function(e){t.alternatifEmail=!1}));case 4:this.loadingForm=!1;case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),throwQuestion:function(e){var t=this;this.$swal({title:"Are you sure?",text:"This action will replace current selected recipients",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, overide it!"}).then((function(a){return a&&(t.resetRecipients(),e()),!1})).catch((function(e){return!1}))},mailto:function(){location.href="mailto: business.solution@damcorp.id"},disabledDate:function(e){return!!m()(e).isBefore(m()(),"date")},resetSendDate:function(){this.scheduleDate="",this.scheduleTime=""},selectAllContact:function(){this.selectedRecipient=[{contact:"*",id:0,name:"All",type:"contact"}],this.contactDialog.visible=!1},resetRecipients:function(){this.bulkparam=[],this.contactSelection=[],this.groupSelection=[],this.csvData=[],this.bulkParam=[],this.selectedRecipient=[],this.$refs.groupTable&&this.$refs.groupTable.clearSelection(),this.updateSelected(),null!=document.getElementById("inputCsvFile")&&(document.getElementById("inputCsvFile").value="")},resetTemplate:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&(this.param=[],this.paramButton=[],this.paramCountUrl=0,this.buttonElement=[{text:"",type:"",url:""}]),this.template_message=f.a.find(this.waUserDetail.hsm,(function(t){return t.name==e.choose_template})).message,this.template_header=f.a.find(this.waUserDetail.hsm,(function(t){return t.name==e.choose_template})).header,this.template_button=f.a.find(this.waUserDetail.hsm,(function(t){return t.name==e.choose_template})).buttons,void 0==this.template_header&&(this.waUserDetail.headerTemp="",this.waUserDetail.templateHeaderFormat=""),this.waUserDetail.headerImage="",this.waUserDetail.headerDocument="",this.waUserDetail.headerVideo="",a&&this.resetRecipients()},stepHandle:function(e){var t=this,a=e-1;switch(a){case 0:var r=f.a.indexOf(["jpg","jpeg","png"],this.extensionFile);y(r),f.a.indexOf(["pdf","doc","docx","ppt","pptx","xls","xlsx"],this.extensionFile),f.a.indexOf(["aac","m4a","amr","mp3","ogg","opus"],this.extensionFile);if(""==this.mediaSource&&-1!==["image","document"].indexOf(this.waUserDetail.templateHeaderFormat))return void this.$swal(this.$t("error"),"Please choose media source","warning");if("local"==this.mediaSource&&"image"==this.waUserDetail.templateHeaderFormat.toLowerCase()){if(""==this.waUserDetail.headerImage)return void this.$swal(this.$t("error"),"Please choose your image","warning")}else if("csv"==this.mediaSource&&"image"==this.waUserDetail.templateHeaderFormat.toLowerCase()){if(""==this.waUserDetail.headerCSV)return void this.$swal(this.$t("error"),"Please input your image header of CSV","warning")}else if("url"==this.mediaSource&&"image"==this.waUserDetail.templateHeaderFormat.toLowerCase()){if(""==this.waUserDetail.headerImage)return void this.$swal(this.$t("error"),"Please input your image url","warning")}else if("local"==this.mediaSource&&"document"==this.waUserDetail.templateHeaderFormat){if(""==this.waUserDetail.headerDocument)return void this.$swal(this.$t("error"),"Please choose your document","warning")}else if("url"==this.mediaSource&&"document"==this.waUserDetail.templateHeaderFormat){if(""==this.waUserDetail.headerDocument)return void this.$swal(this.$t("error"),"Please input your document url","warning")}else if("csv"==this.mediaSource&&"document"==this.waUserDetail.templateHeaderFormat){if(""==this.waUserDetail.headerCSV)return void this.$swal(this.$t("error"),"Please input your document header of CSV","warning")}else if("local"==this.mediaSource&&"video"==this.waUserDetail.templateHeaderFormat){if(""==this.waUserDetail.headerVideo)return void this.$swal(this.$t("error"),"Please choose your video","warning")}else if("url"==this.mediaSource&&"video"==this.waUserDetail.templateHeaderFormat){if(""==this.waUserDetail.headerVideo)return void this.$swal(this.$t("error"),"Please input your video url","warning")}else if("csv"==this.mediaSource&&"video"==this.waUserDetail.templateHeaderFormat&&""==this.waUserDetail.headerCSV)return void this.$swal(this.$t("error"),"Please input your document header of CSV","warning");this.checkParamHasHastag();this.waUserDetail.mediaExt;if(""!=this.choose_template&&this.param.length<this.paramCount)this.$swal(this.$t("error"),this.$t("whatsapp.hsm_param_empty"),"warning");else if(""==this.choose_template)this.$swal(this.$t("error"),this.$t("whatsapp.hsm_not_choose"),"warning");else if(""!=this.choose_template&&this.paramButton.length<this.paramCountUrl)this.$swal(this.$t("error"),this.$t("whatsapp.hsm_param_empty"),"warning");else{this.mandatoryHeader=["phone"];var i=!0,n=!0;f.a.forEach(this.param,(function(e){if(e.length<1||""==e.trim())return n=!1,!1;n=!0;var a=/#(\S+[a-zA-Z0-9])/gi,r=/#(\S+[a-zA-Z0-9])/,o=r.test(e);if(1==o){var l=e.split(" ");f.a.forEach(l,(function(e,r){var n=/#(\S+[a-zA-Z0-9])/,o=n.test(e);if(1==o){e=e.replace(a,"$1");var l=e.split("_").map((function(e){return e.replace(/\*|\#|\`|\-|[^\w+\_+\w]/g,"")})).filter((function(e){return""!=e})),c=Object(s["a"])(l,2),u=(c[0],c[1]);"undefined"==typeof u&&(i=!1),t.mandatoryHeader.push(u)}}))}else t.itHas=!1})),f.a.forEach(this.paramButton,(function(e){var a=/#(\S+[a-zA-Z0-9])/gi,r=/#(\S+[a-zA-Z0-9])/,n=r.test(e);if(1==n){var o=e.split(" ");f.a.forEach(o,(function(e,r){var n=/#(\S+[a-zA-Z0-9])/,o=n.test(e);if(1==o){e=e.replace(a,"$1");var l=e.split("_").map((function(e){return e.replace(/\*|\#|\`|\-|[^\w+\_+\w]/g,"")})).filter((function(e){return""!=e})),c=Object(s["a"])(l,2),u=(c[0],c[1]);"undefined"==typeof u&&(i=!1),t.mandatoryHeader.push(u)}}))}else t.itHasBtn=!1})),this.mandatoryHeader=f.a.uniq(this.mandatoryHeader),this.mandatoryHeader.length>1&&(this.itHas=!0,this.itHasBtn=!0,this.contactSelection=[],this.selectedRecipient=[]),0==i?this.$swal(this.$t("error"),"Custom parameter should start with #csv_","warning"):0==n?this.$swal(this.$t("error"),this.$t("whatsapp.hsm_param_empty"),"warning"):("csv"==this.mediaSource&&(this.itHas=!0,this.mandatoryHeader.push(this.waUserDetail.headerCSV)),this.step=1)}break;case 1:var o=!0;this.to.length<1&&(o=!1,this.$swal(this.$t("error"),this.$t("whatsapp.empty_to"),"warning")),""==this.sender&&(o=!1,this.$swal(this.$t("error"),this.$t("whatsapp.empty_sender"),"warning")),"later"==this.sendTime&&(this.scheduleDate&&this.scheduleTime?m()(this.actualSendTime).isBefore(m()())&&(o=!1,this.$swal(this.$t("error"),this.$t("whatsapp.sendTime_before_now"),"warning")):(o=!1,this.$swal(this.$t("error"),this.$t("whatsapp.empty_sendTime"),"warning"))),o&&(this.step=2);break}},onUpload:function(e){var t=this,a=e.target,r=["pdf","doc","docx","ppt","pptx","xls","xlsx","jpg","jpeg","png","aac","m4a","amr","mp3","ogg","opus"];if(a.files&&a.files[0]){var i=new FileReader;i.onload=function(e){var i=e.target.result,n=a.files[0].name.split(".")[0],s=a.files[0].name.split(".").pop().toLowerCase(),o=-1!=r.indexOf(s);o?(t.dataFile=i,t.filename=n,t.extensionFile=s,t.acceptedFile=o):(document.getElementById("inputFile").value="",t.$swal(t.$t("error"),"File type not allowed","error"))},i.readAsDataURL(a.files[0])}},csvJSON:function(e){var t=this,a=e.split("\n"),r=[],i=a[0].toLowerCase().split(",").map((function(e){return e.trim()})),s=0;return s<0?[]:(a.shift(),a.forEach((function(e){var t=e.split(",")[s];t&&r.push(t)})),this.csvData=r,this.mandatoryHeader.length>1&&(this.bulkparam=new Array,f.a.forEach(this.mandatoryHeader,(function(e,r){0==r||a.forEach((function(a,r){var s=i.indexOf(e),o=a.split(",")[s];o&&("undefined"==typeof t.bulkparam[r]?t.bulkparam[r]=Object(n["a"])({},e,o.trim()):t.bulkparam[r][e]=o.trim())}))}))),r=f.a.uniq(r),r)},onUploadCsv:function(e){var t=this,a=e.target;if(a.files&&a.files[0]){var r=new FileReader;r.onload=function(e){e.target.result;var r=a.files[0].type;-1==f.a.indexOf(["text/csv","application/vnd.ms-excel"],r)&&(t.csvDialog.visible=!1,t.csvData=[],document.getElementById("inputCsvFile").value="",t.$swal(t.$t("error"),"File type not allowed","error"))},r.readAsText(a.files[0])}},renderCsvData:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.readingCsv=!0,t=document.getElementById("inputCsvFile"),a=new FormData,a.append("csv_file",t.files[0]),a.append("param",this.mandatoryHeader.join(",")),r=this,u.a.defaults.timeout=9e5,e.next=9,u.a.post(d["a"].baseApi+"upload/csv_panel",a,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:function(e){var t=parseInt(e.total/e.loaded);t=t>100?100:t,r.uploadCsvProgress=t>1?100-t:100}}).then((function(e){i.readingCsv=!1,200==e.data.ec?(i.csvData[0]=e.data.data,1==i.itHas||1==i.itHasBtn?(i.sampleParam=e.data.data.sampleParam,i.sampleParamUrl=e.data.data.sampleParam):(i.sampleParam=i.param,i.sampleParamUrl=i.paramButton),i.updateSelected()):400==e.data.ec?i.$swal(i.$t("info"),i.$t("whatsapp.missing_parameter")+" Missing header: ".concat(e.data.data.join(",")),"info"):i.$swal(i.$t("error"),i.$t("error_500"),"error")})).catch((function(e){console.log(e),i.readingCsv=!1,"ECONNABORTED"==e.code||"ETIMEDOUT"==e.code?i.$swal(i.$t("error"),i.$t("timeout"),"error"):i.$swal(i.$t("error"),i.$t("error_text"),"error")}));case 9:this.csvDialog.visible=!1;case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),onUploadMedia:function(e){var t=this,a=e.target;if(a.files&&a.files[0]){var r=new FileReader;r.onload=function(e){e.target.result;var r=a.files[0].type;-1==f.a.indexOf(["data/*"],r)&&(document.getElementById("inputMedia").value="",t.$swal(t.$t("error"),"File type not allowed","error"))},r.readAsText(a.files[0])}},beforeUploadMedia:function(e){return"image"==this.waUserDetail.templateHeaderFormat.toLowerCase()&&-1==["image/jpeg","image/png"].indexOf(e.type)||"document"==this.waUserDetail.templateHeaderFormat&&-1==["application/pdf"].indexOf(e.type)?(this.$swal(this.$t("error"),"Media extension not match","warning"),this.handleListMedia=[],!1):void 0},renderMedia:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=new FormData,document.getElementById("inputMedia"),this.documentFileName=t.file.name,"image"!=this.waUserDetail.templateHeaderFormat.toLowerCase()||"local"!=this.mediaSource){e.next=10;break}if(!(t.file.size>=5242880)){e.next=8;break}return this.$swal(this.$t("error"),"Maximum file upload size is 5 MB","warning"),this.handleListMedia=[],e.abrupt("return");case 8:e.next=22;break;case 10:if("document"!=this.waUserDetail.templateHeaderFormat.toLowerCase()||"local"!=this.mediaSource){e.next=17;break}if(!(t.file.size>=104857600)){e.next=15;break}return this.$swal(this.$t("error"),"Maximum file upload size is 100 MB","warning"),this.handleListMedia=[],e.abrupt("return");case 15:e.next=22;break;case 17:if("video"!=this.waUserDetail.templateHeaderFormat.toLowerCase()||"local"!=this.mediaSource){e.next=22;break}if(!(t.file.size>=16777216)){e.next=22;break}return this.$swal(this.$t("error"),"Maximum file upload size is 16 MB","warning"),this.handleListMedia=[],e.abrupt("return");case 22:return a.append("media",t.file),a.append("template_name",this.choose_template),u.a.defaults.timeout=9e5,e.next=27,u.a.post(d["a"].baseApi+"upload/media",a,{maxContentLength:1/0,maxBodyLength:1/0,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){"image"==r.waUserDetail.templateHeaderFormat.toLowerCase()?(r.waUserDetail.headerImage=e.data.data.url,r.waUserDetail.headerDocument="",r.waUserDetail.headerVideo=""):"document"==r.waUserDetail.templateHeaderFormat?(r.waUserDetail.headerDocument=e.data.data.url,r.waUserDetail.headerImage="",r.waUserDetail.headerVideo=""):"video"==r.waUserDetail.templateHeaderFormat&&(r.waUserDetail.headerVideo=e.data.data.url,r.waUserDetail.headerImage="",r.waUserDetail.headerDocument="")})).catch((function(e){console.log(e)}));case 27:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),parsingDataHeader:function(e,t){var a="";if("text"==this.waUserDetail.templateHeaderFormat){var r=this.waUserDetail.templateHeaderText.match(/{{\s*[\w\.]+\s*}}/g);a=this.waUserDetail.templateHeaderText,null!=r?(this.paramHeaderText=!0,r.forEach((function(e,r){t&&(a=a.replace(e,t))}))):this.paramHeaderText=!1}return a},parsingDataButton:function(e,t){var a=this,r="",i=this.waUserDetail.hsm.find((function(t){return t.name==e}));this.waUserDetail.buttons=i.buttons;var n=i.buttons,s=n.buttons;return s.forEach((function(e,i){if("URL"==e.type){var n=e.url.match(/{{\s*[\w\.]+\s*}}/g),s=null!=n?n.length:0;a.paramCountUrl=s,r=e.url,a.form.buttonContents=r,a.buttonElement[i]={text:e.text,type:e.type,url:r},null!=n&&n.forEach((function(e,a){t[a]&&(r=r.replace(e,t))}))}else a.buttonElement[i]={text:e.text,type:e.type}})),r},parsingData:function(e,t){var a=this,r="";return this.waUserDetail.hsm.forEach((function(i){if(i.name==e){var n=i.header,s=i.message.match(/{{\s*[\w\.]+\s*}}/g);a.waUserDetail.headerTemp=n,void 0!=n&&(a.waUserDetail.templateHeaderType=n.type,a.waUserDetail.templateHeaderFormat=n.format,a.waUserDetail.templateHeaderText=n.text),a.paramCount=null!=s?s.length:0,r=i.message,null!=s&&s.forEach((function(e,a){t[a]&&(r=r.replace(e,t[a]))}))}})),r.length>1024?(this.disabledButtonNext=!0,this.$swal(this.$t("error"),"Character number of messages exceeds the limit (max 1024)","error")):this.disabledButtonNext=!1,r},parsingPreview:function(){var e=this,t=this.choose_template,a=this.param,r="",i=this.sampleParam;return this.waUserDetail.hsm.forEach((function(n){if(n.name==t){var o=n.message.match(/{{\s*[\w\.]+\s*}}/g);e.paramCount=null!=o?o.length:0,r=n.message,null!=o&&o.forEach((function(e,t){if(a[t]){var n,o=a[t].split(" "),l=/#(\S+[a-zA-Z0-9])/,c=/#(\S+[a-zA-Z0-9])/gi,u=[],d=v(o);try{for(d.s();!(n=d.n()).done;){var p=n.value,m=l.test(p);if(1==m){var h=p.split("_"),f=Object(s["a"])(h,2),g=(f[0],f[1]);u.push(p.replace(c,i[g]))}else u.push(p)}}catch(b){d.e(b)}finally{d.f()}r=r.replace(e,u.join(" "))}}))}})),r},parsingPreviewButton:function(){var e=this,t=this.choose_template,a=this.paramButton,r="",i=this.sampleParamUrl;return this.waUserDetail.hsm.forEach((function(n){if(n.name==t){e.waUserDetail.buttons=n.buttons;var o=n.buttons,l=o.buttons;l.forEach((function(e){var t=e.url.match(/{{\s*[\w\.]+\s*}}/g);null!=t&&t.length;r=e.url,null!=t&&t.forEach((function(e,t){if(a[t]){var n,o=a[t].split(" "),l=/#(\S+[a-zA-Z0-9])/,c=/#(\S+[a-zA-Z0-9])/gi,u=[],d=v(o);try{for(d.s();!(n=d.n()).done;){var p=n.value,m=l.test(p);if(1==m){var h=p.split("_"),f=Object(s["a"])(h,2),g=(f[0],f[1]);u.push(p.replace(c,i[g]))}else u.push(p)}}catch(b){d.e(b)}finally{d.f()}r=r.replace(e,u.join(" "))}}))}))}})),r},handleParam:function(e){this.form.message=this.form.message+e},handleCloseRecipient:function(e){if("group"==e.type)for(var t in this.groupSelection)this.groupSelection.hasOwnProperty(t)&&this.groupSelection[t].group_id==e.id&&this.$refs.groupTable.toggleRowSelection(this.groupSelection[t]);else if("contact"==e.type){var a=f.a.findIndex(this.selectedRecipient,{id:e.id});-1!=a&&this.selectedRecipient.splice(a,1);var r=f.a.findIndex(this.contactSelection,{phonebook_id:e.id});-1!=r&&this.contactSelection.splice(r,1)}else"csv"==e.type&&(delete this.csvData[f.a.findIndex(this.csvData,{csv:e.id})],this.updateSelected())},refreshCheckboxContact:function(){if(this.$refs.contactTable)for(var e in this.$refs.contactTable.clearSelection(),this.contactSelection)if(this.contactSelection.hasOwnProperty(e)){var t=f.a.findIndex(this.contacts,{phonebook_id:this.contactSelection[e].phonebook_id});-1!=t&&this.$refs.contactTable.toggleRowSelection(this.contacts[t],!0)}},handleGroupSelectionChange:function(e){this.groupSelection=e,this.updateSelected()},handleContactSelectSingle:function(e,t){this.handleContactSelect(e)},handleContactSelect:function(e){var t=this;f.a.forEach(this.contacts,(function(a){var r=f.a.findIndex(t.contactSelection,{phonebook_id:a.phonebook_id}),i=f.a.findIndex(e,{phonebook_id:a.phonebook_id});-1==i?-1!=r&&t.contactSelection.splice(r,1):-1==r&&t.contactSelection.push(a)})),this.updateSelected()},handleContactSelectionChange:function(e){var t=this;f.a.forEach(this.contacts,(function(a){var r=f.a.findIndex(t.contactSelection,{phonebook_id:a.phonebook_id}),i=f.a.findIndex(e,{phonebook_id:a.phonebook_id});-1==i?-1!=r&&t.contactSelection.splice(i,1):-1==r&&t.contactSelection.push(a)})),this.updateSelected()},openGroupDialog:function(){var e=this;this.selectedRecipient.length&&!this.groupSelection.length?this.throwQuestion((function(){e.groupDialog.visible=!0,0==e.groups.length&&e.loadGroup()})):(this.groupDialog.visible=!0,0==this.groups.length&&this.loadGroup())},openContactDialog:function(){var e=this;this.selectedRecipient.length&&!this.contactSelection.length?this.throwQuestion((function(){e.contactDialog.visible=!0,0==e.contacts.length?e.loadContactAll():e.refreshCheckboxContact()})):(this.contactDialog.visible=!0,0==this.contacts.length?this.loadContactAll():this.refreshCheckboxContact())},openCsvDialog:function(){var e=this;this.selectedRecipient.length&&!this.csvData.length?this.throwQuestion((function(){e.csvDialog.visible=!0})):this.csvDialog.visible=!0},updateSelected:function(){var e=[];this.groupSelection.forEach((function(t){e.push({id:t.group_id,name:t.group_name+" ("+t.member+")",contact:null,type:"group",member:t.member})})),this.contactSelection.forEach((function(t){e.push({id:t.phonebook_id,name:t.name,contact:t.phone_number,type:"contact"})})),this.csvData.forEach((function(t,a){e.push({id:t.csv,name:t.filename+" ("+t.total+")",contact:null,type:"csv",member:t.total})})),this.selectedRecipient=e},sendHSM:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return{header:{type:this.waUserDetail.templateHeaderFormat.toLowerCase(),media:this.waUserDetail.headerImage}},t={to:this.to,name:this.choose_template,param:this.param,sender:this.sender,type:"hsm",message:this.template_message},""!=this.waUserDetail.button&&(t.buttons={paramButton:this.paramButton,type:this.buttonElement.type,text:this.buttonElement.text,url:this.form.buttonContents}),"image"==this.waUserDetail.templateHeaderFormat.toLowerCase()&&(t.header={type:this.waUserDetail.templateHeaderFormat.toLowerCase(),media:"csv"==this.mediaSource?this.waUserDetail.hashtag_csv+this.waUserDetail.headerCSV:this.waUserDetail.headerImage}),"document"==this.waUserDetail.templateHeaderFormat.toLowerCase()&&(t.header={type:this.waUserDetail.templateHeaderFormat.toLowerCase(),media:"csv"==this.mediaSource?this.waUserDetail.hashtag_csv+this.waUserDetail.headerCSV:this.waUserDetail.headerDocument,filename:"local"==this.mediaSource?this.documentFileName:""}),"video"==this.waUserDetail.templateHeaderFormat.toLowerCase()&&(t.header={type:this.waUserDetail.templateHeaderFormat.toLowerCase(),media:"csv"==this.mediaSource?this.waUserDetail.hashtag_csv+this.waUserDetail.headerCSV:this.waUserDetail.headerVideo}),"text"==this.waUserDetail.templateHeaderFormat.toLowerCase()&&(t.header={type:this.waUserDetail.templateHeaderFormat.toLowerCase(),media:""==this.waUserDetail.headerText?"":this.waUserDetail.headerText}),"later"==this.sendTime&&(t["schedule"]=this.actualSendTime),this.mandatoryHeader.length>1&&(t["bulkparam"]=this.bulkparam),1==this.alternatifEmail&&(t["redirect_with"]="email"),1==this.alternatifSms&&(t["redirect_with"]="sms"),this.btnLoading=!0,e.next=14,Object(l["a"])({method:"post",url:"wa/send_hsm",timeout:3e5,data:t}).then((function(e){200==e.data.ec?a.$swal({title:a.$t("success"),text:"",type:"success"}).then((function(e){a.$router.push("/whatsapp#"+Date.now())})):400==e.data.ec&&"credit_limit"==e.data.message?a.$swal(a.$t("error"),a.$t("whatsapp.credit_limit"),"error"):a.$swal(a.$t("error"),a.$t("error_text"),"error"),a.btnLoading=!1})).catch((function(e){a.btnLoading=!1,a.$swal(a.$t("error"),a.$t("error_text"),"error")}));case 14:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),nextContact:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.currentPageContact=t,this.loadContactAll(t);case 2:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),loadContactAll:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:1,this.loadingContact=!0,e.next=4,Object(l["a"])({method:"get",url:"phonebook",params:{page:t}}).then((function(e){a.contacts=e.data.data.contact,a.contactsTotal=e.data.data.rows})).catch((function(e){a.showAlertError=!0}));case 4:this.loadingContact=!1,this.refreshCheckboxContact();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadGroup:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(l["a"])({method:"get",url:"group/all"}).then((function(e){t.groups=e.data.data})).catch((function(e){t.showAlertError=!0}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loadWA:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a=this,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]&&r[0],e.next=3,Object(l["a"])({method:"post",url:"user/detail",params:{view:1==t||null}}).then((function(e){if(a.loadingForm=!1,200==e.data.ec){a.showFormMessage=!0;var t=[],r=[];f.a.forEach(e.data.data,(function(e){f.a.forEach(e.hsm,(function(e){f.a.isEmpty(e)||t.push(e)})),r.push(e.phoneNumber)})),a.waUserDetail.hsm=f.a.uniqBy(t,"name"),a.waUserDetail.sender=f.a.uniq(r)}else 400==e.data.ec&&"not_subscribe"==e.data.message?a.showAlertMessage=!0:a.showAlertError=!0})).catch((function(e){a.loadingForm=!1,a.showAlertError=!0}));case 3:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),loadPreferences:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.loadingPage=!0,e.next=3,Object(l["a"])({method:"get",url:d["a"].baseApi+"auth/settings/"}).then((function(e){t.allowMakerChecker=f.a.find(e.data.data,(function(e){return"makerChecker"==e.options_key})),"true"==t.allowMakerChecker.options_value||1==t.allowMakerChecker.options_value?t.sendTime="later":t.sendTime="now"})).catch((function(e){}));case 3:this.loadingPage=!1;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},computed:{scheduleTimeStart:function(){return m()(this.scheduleDate).isSame(m()(),"date")?m()().add(1,"h").format("HH")+":00":"00:00"},countTo:function(){return this.to.reduce((function(e,t){return t.member?e+t.member:e+1}),0)},to:function(){var e=[];for(var t in this.selectedRecipient)if(this.selectedRecipient.hasOwnProperty(t)){var a=this.selectedRecipient[t];"group"==a.type?e.push({group_id:a.id,member:a.member}):"csv"==a.type?e.push({csv:a.id,member:a.member}):e.push(a.contact)}return f.a.uniq(e)},sendCategory:function(){return this.extensionFile?["pdf","doc","docx","ppt","pptx","xls","xlsx"].indexOf(this.extensionFile)>-1?"document":["jpg","jpeg","png"].indexOf(this.extensionFile)>-1?"image":["aac","m4a","amr","mp3","ogg","opus"].indexOf(this.extensionFile)>-1?"audio":void 0:"text"},actualSendTime:function(){return this.scheduleDate+" "+this.scheduleTime}},watch:{},mounted:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.customer_type,e.next=3,this.loadContactAll();case 3:this.loadGroup(),this.loadWA(!0),this.loadPreferences();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),components:{}}),x=_,C=(a("66df"),a("e2c5"),a("2877")),D=Object(C["a"])(x,r,i,!1,null,"210f133b",null);t["default"]=D.exports},"37c8":function(e,t,a){t.f=a("2b4c")},3846:function(e,t,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"3a72":function(e,t,a){var r=a("7726"),i=a("8378"),n=a("2d00"),s=a("37c8"),o=a("86cc").f;e.exports=function(e){var t=i.Symbol||(i.Symbol=n?{}:r.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},"3e8f":function(e,t){},5672:function(e,t,a){},"5df3":function(e,t,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=r(t,a),this._i+=e.length,{value:e,done:!1})}))},"66df":function(e,t,a){"use strict";a("5672")},"67ab":function(e,t,a){var r=a("ca5a")("meta"),i=a("d3f4"),n=a("69a8"),s=a("86cc").f,o=0,l=Object.isExtensible||function(){return!0},c=!a("79e5")((function(){return l(Object.preventExtensions({}))})),u=function(e){s(e,r,{value:{i:"O"+ ++o,w:{}}})},d=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,r)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[r].i},p=function(e,t){if(!n(e,r)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[r].w},m=function(e){return c&&h.NEED&&l(e)&&!n(e,r)&&u(e),e},h=e.exports={KEY:r,NEED:!1,fastKey:d,getWeak:p,onFreeze:m}},"6b54":function(e,t,a){"use strict";a("3846");var r=a("cb7c"),i=a("0bfb"),n=a("9e1e"),s="toString",o=/./[s],l=function(e){a("2aba")(RegExp.prototype,s,e,!0)};a("79e5")((function(){return"/a/b"!=o.call({source:"a",flags:"b"})}))?l((function(){var e=r(this);return"/".concat(e.source,"/","flags"in e?e.flags:!n&&e instanceof RegExp?i.call(e):void 0)})):o.name!=s&&l((function(){return o.call(this)}))},7514:function(e,t,a){"use strict";var r=a("5ca1"),i=a("0a49")(5),n="find",s=!0;n in[]&&Array(1)[n]((function(){s=!1})),r(r.P+r.F*s,"Array",{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(n)},"7a81":function(e,t,a){},"7bbc":function(e,t,a){var r=a("6821"),i=a("9093").f,n={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return i(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==n.call(e)?o(e):i(r(e))}},"8a81":function(e,t,a){"use strict";var r=a("7726"),i=a("69a8"),n=a("9e1e"),s=a("5ca1"),o=a("2aba"),l=a("67ab").KEY,c=a("79e5"),u=a("5537"),d=a("7f20"),p=a("ca5a"),m=a("2b4c"),h=a("37c8"),f=a("3a72"),g=a("d4c0"),v=a("1169"),b=a("cb7c"),w=a("d3f4"),y=a("4bf8"),_=a("6821"),x=a("6a99"),C=a("4630"),D=a("2aeb"),S=a("7bbc"),k=a("11e9"),U=a("2621"),$=a("86cc"),F=a("0d58"),H=k.f,T=$.f,E=S.f,P=r.Symbol,R=r.JSON,A=R&&R.stringify,B="prototype",O=m("_hidden"),M=m("toPrimitive"),L={}.propertyIsEnumerable,I=u("symbol-registry"),j=u("symbols"),N=u("op-symbols"),V=Object[B],z="function"==typeof P&&!!U.f,q=r.QObject,Z=!q||!q[B]||!q[B].findChild,G=n&&c((function(){return 7!=D(T({},"a",{get:function(){return T(this,"a",{value:7}).a}})).a}))?function(e,t,a){var r=H(V,t);r&&delete V[t],T(e,t,a),r&&e!==V&&T(V,t,r)}:T,K=function(e){var t=j[e]=D(P[B]);return t._k=e,t},W=z&&"symbol"==typeof P.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof P},Y=function(e,t,a){return e===V&&Y(N,t,a),b(e),t=x(t,!0),b(a),i(j,t)?(a.enumerable?(i(e,O)&&e[O][t]&&(e[O][t]=!1),a=D(a,{enumerable:C(0,!1)})):(i(e,O)||T(e,O,C(1,{})),e[O][t]=!0),G(e,t,a)):T(e,t,a)},J=function(e,t){b(e);var a,r=g(t=_(t)),i=0,n=r.length;while(n>i)Y(e,a=r[i++],t[a]);return e},Q=function(e,t){return void 0===t?D(e):J(D(e),t)},X=function(e){var t=L.call(this,e=x(e,!0));return!(this===V&&i(j,e)&&!i(N,e))&&(!(t||!i(this,e)||!i(j,e)||i(this,O)&&this[O][e])||t)},ee=function(e,t){if(e=_(e),t=x(t,!0),e!==V||!i(j,t)||i(N,t)){var a=H(e,t);return!a||!i(j,t)||i(e,O)&&e[O][t]||(a.enumerable=!0),a}},te=function(e){var t,a=E(_(e)),r=[],n=0;while(a.length>n)i(j,t=a[n++])||t==O||t==l||r.push(t);return r},ae=function(e){var t,a=e===V,r=E(a?N:_(e)),n=[],s=0;while(r.length>s)!i(j,t=r[s++])||a&&!i(V,t)||n.push(j[t]);return n};z||(P=function(){if(this instanceof P)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(a){this===V&&t.call(N,a),i(this,O)&&i(this[O],e)&&(this[O][e]=!1),G(this,e,C(1,a))};return n&&Z&&G(V,e,{configurable:!0,set:t}),K(e)},o(P[B],"toString",(function(){return this._k})),k.f=ee,$.f=Y,a("9093").f=S.f=te,a("52a7").f=X,U.f=ae,n&&!a("2d00")&&o(V,"propertyIsEnumerable",X,!0),h.f=function(e){return K(m(e))}),s(s.G+s.W+s.F*!z,{Symbol:P});for(var re="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;re.length>ie;)m(re[ie++]);for(var ne=F(m.store),se=0;ne.length>se;)f(ne[se++]);s(s.S+s.F*!z,"Symbol",{for:function(e){return i(I,e+="")?I[e]:I[e]=P(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in I)if(I[t]===e)return t},useSetter:function(){Z=!0},useSimple:function(){Z=!1}}),s(s.S+s.F*!z,"Object",{create:Q,defineProperty:Y,defineProperties:J,getOwnPropertyDescriptor:ee,getOwnPropertyNames:te,getOwnPropertySymbols:ae});var oe=c((function(){U.f(1)}));s(s.S+s.F*oe,"Object",{getOwnPropertySymbols:function(e){return U.f(y(e))}}),R&&s(s.S+s.F*(!z||c((function(){var e=P();return"[null]"!=A([e])||"{}"!=A({a:e})||"{}"!=A(Object(e))}))),"JSON",{stringify:function(e){var t,a,r=[e],i=1;while(arguments.length>i)r.push(arguments[i++]);if(a=t=r[1],(w(t)||void 0!==e)&&!W(e))return v(t)||(t=function(e,t){if("function"==typeof a&&(t=a.call(this,e,t)),!W(t))return t}),r[1]=t,A.apply(R,r)}}),P[B][M]||a("32e9")(P[B],M,P[B].valueOf),d(P,"Symbol"),d(Math,"Math",!0),d(r.JSON,"JSON",!0)},aa14:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticClass:"scrollable only-y"},[a("div",{staticClass:"page-header"},[a("h1",[e._v(e._s(e.$t("whatsapp.inquiry")))])]),e.showAlertMessage?a("el-card",{staticStyle:{"margin-bottom":"1em"},attrs:{align:"center"}},[a("h2",[e._v("Start messaging your customers today")]),a("span",{domProps:{innerHTML:e._s(e.$t("promote.desc.whatsapp"))}}),a("br"),a("br"),a("span",[a("el-button",{on:{click:function(t){return e.mailto()}}},[e._v("Send us e-mail")])],1),2==e.customer_type&&void 0==e.businessId&&""==e.businessId?a("div",{staticStyle:{margin:"0 0 20px"}},[a("button",{staticStyle:{"background-color":"#1877f2",border:"0","border-radius":"23px",color:"#fff",cursor:"pointer","font-family":"Helvetica, Arial, sans-serif","font-size":"14px","font-weight":"bold",height:"40px",padding:"0 24px"},attrs:{onclick:"launchWhatsAppSignup()"}},[e._v("Connect to Facebook")])]):e._e()]):a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:e.loadingPage,expression:"loadingPage"}],staticStyle:{"margin-bottom":"1em"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"Single",name:"single"}},[a("el-form",{ref:"checkContactForm",attrs:{model:e.contactForm,"label-width":"120px","status-icon":"",rules:e.rulesForm},nativeOn:{submit:function(t){return t.preventDefault(),e.checkContactForm("single")}}},[a("el-form-item",{attrs:{label:"Input Number",prop:"phoneNumber"}},[a("el-input",{attrs:{type:"text",value:"",placeholder:"Input phone number"},nativeOn:{keypress:function(t){return e.numberOnly.apply(null,arguments)},paste:function(t){return e.paste.apply(null,arguments)}},model:{value:e.contactForm.phoneNumber,callback:function(t){e.$set(e.contactForm,"phoneNumber",t)},expression:"contactForm.phoneNumber"}})],1),a("el-button",{attrs:{type:"primary",loading:e.loadingBtn},on:{click:function(t){return e.checkContactForm("single")}}},[a("i",{staticClass:"mdi mdi-check-circle"}),e._v(" "+e._s(e.$t("submit")))])],1),e.showResult?a("div",[a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Phone Number")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-tag",{attrs:{type:"primary"}},[e._v(e._s(e.checkResult.contact))])],1)],1),a("el-row",{attrs:{gutter:30}},[a("el-col",{attrs:{xs:4,sm:4,md:4,lg:4,xl:4}},[a("h5",[e._v("Status")])]),a("el-col",{staticClass:"mt-10",attrs:{xs:20,sm:20,md:20,lg:20,xl:20}},[a("el-tag",{attrs:{type:"valid"==e.checkResult.status.toLowerCase()?"success":"danger"}},[e._v(e._s(e.checkResult.status))])],1)],1)],1):e._e()],1)],1)],1),e.showAlertError?a("el-card",{staticStyle:{"margin-bottom":"1em"}},[a("error-gope-siji")],1):e._e()],1)},i=[],n=(a("7f7f"),a("96cf"),a("1da1")),s=a("271f"),o=a("bc3a"),l=a.n(o),c=a("2ef0"),u=a.n(c),d=a("db49"),p=a("c0d6"),m={name:"WhatsappProfile",data:function(){var e=this,t=function(t,a,r){if(!a)return r(new Error(e.$t("contact.warning.phone_number")));r()};return{businessId:"",customer_type:p["a"].getters.customer_type,loadingPage:!1,loadingBtn:!1,showAlertError:!1,showAlertMessage:!1,showFormMessage:!0,showAlertErrorLoadCredential:!1,showResult:!1,whatsapp_number:[],selectedPhoneNumber:"",activeName:"single",contactForm:{phoneNumber:""},checkResult:{contact:"",status:""},uploadUrl:d["a"].baseApi+"wa/check_contact",uploadHeaders:{"api-key":this.$store.getters.accessToken},uploadedFileList:[],rulesForm:{phoneNumber:[{validator:t,trigger:"blur"}]}}},methods:{checkBusinessId:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({method:"get",url:"bussiness/checkBusinessId"}).then((function(e){200!=e.data.ec&&"not_subscribe"==e.data.message?t.showAlertMessage=!0:(t.businessId=e.data.dataString,console.log("bus id",t.businessId))})).catch((function(e){}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),numberOnly:function(e){window.event?e.keyCode:e.which;var t=u.a.indexOf([8,9,27,13,190,43],e.keyCode);-1!==t||86===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||65===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||82===e.keyCode&&(!0===e.ctrlKey||!0===e.metaKey)||e.keyCode>42&&e.keyCode<=49&&-1==u.a.indexOf([44,45,46,47],e.keyCode)||(e.shiftKey||e.keyCode<48||e.keyCode>57)&&(e.keyCode>96||e.keyCode<200)&&e.preventDefault()},paste:function(e){e.preventDefault();for(var t,a=window.event.clipboardData.getData("Text"),r="+0123456789",i="",n=0;n<a.length;n++)t=a.charAt(n),-1!=r.indexOf(t)&&(i+=t);this.contactForm.phoneNumber=i},uploadFile:function(e){var t=5e5;e.file.size>t?this.$swal(this.$t("warning"),this.$t("upload_max_size"),"warning"):-1==["text/csv","application/vnd.ms-excel"].indexOf(e.file.type)?this.$swal(this.$t("warning"),this.$t("file_not_allowed")+" csv","warning"):this.checkContact("csv",e.file)},loadWa:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])({method:"post",url:"user/detail/number",data:{channels:"whatsapp"}}).then((function(e){200==e.data.ec?(t.whatsapp_number=e.data.data,t.selectedPhoneNumber=t.whatsapp_number[0],t.showFormMessage=!0):400==e.data.ec&&"not_subscribe"==e.data.message?t.showAlertMessage=!0:500==e.data.ec&&(t.showAlertError=!0),t.loadingPage=!1})).catch((function(e){t.showAlertError=!0,t.loadingPage=!1}));case 2:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),checkContactForm:function(e){var t=this;this.$refs["checkContactForm"].validate(function(){var a=Object(n["a"])(regeneratorRuntime.mark((function a(r){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!r){a.next=4;break}t.checkContact(e),a.next=5;break;case 4:return a.abrupt("return");case 5:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}())},checkContact:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){var t,a,r,i,n=this,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",a=s.length>1&&void 0!==s[1]?s[1]:null,this.loadingBtn=!0,this.showResult=!1,r=new FormData,i={timeout:3e5,headers:{"Content-Type":"multipart/form-data"}},"csv"==t?(r.append("csv_file",a),i.responseType="arraybuffer"):r.append("phone",this.contactForm.phoneNumber),r.append("type",t),e.next=10,l.a.post(d["a"].baseApi+"wa/check_contact",r,i).then((function(e){if("single"==t)n.showResult=!0,n.checkResult.contact=e.data.data.contact,n.checkResult.status=e.data.data.status.toUpperCase();else{n.uploadedFileList.push({status:"success",name:a.name,size:a.size,percentage:100,uid:a.uid});var r=window.URL.createObjectURL(new Blob([e.data])),i=document.createElement("a");i.href=r,i.setAttribute("download","Whatsapp Inquiry Check Contact.xlsx"),i.click()}})).catch((function(e){"single"==t?(n.showResult=!0,n.checkResult.contact=n.contactForm.phoneNumber,n.checkResult.status="FAILED_CHECK"):n.$swal(n.$t("error"),n.$t("error_text"),"error")}));case 10:this.loadingBtn=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},mounted:function(){var e=Object(n["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.customer_type,this.checkBusinessId(),e.next=4,this.loadWa();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},h=m,f=a("2877"),g=Object(f["a"])(h,r,i,!1,null,null,null);t["default"]=g.exports},ac4d:function(e,t,a){a("3a72")("asyncIterator")},cd1c:function(e,t,a){var r=a("e853");e.exports=function(e,t){return new(r(e))(t)}},cee5:function(e,t,a){
/*!
 2020 Jason Mulligan <jason.mulligan@avoidwork.com>
 @version 6.3.0
*/
!function(t,a){e.exports=a()}(0,(function(){"use strict";var e=/^(b|B)$/,t={iec:{bits:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"],bytes:["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"]},jedec:{bits:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"],bytes:["B","KB","MB","GB","TB","PB","EB","ZB","YB"]}},a={iec:["","kibi","mebi","gibi","tebi","pebi","exbi","zebi","yobi"],jedec:["","kilo","mega","giga","tera","peta","exa","zetta","yotta"]},r={floor:Math.floor,ceil:Math.ceil};function i(i){var n,s,o,l,c,u,d,p,m,h,f,g,v,b,w,y,_,x,C,D,S=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},k=[],U=0;if(isNaN(i))throw new TypeError("Invalid number");if(o=!0===S.bits,w=!0===S.unix,g=!0===S.pad,s=S.base||2,v=void 0!==S.round?S.round:w?1:2,d=void 0!==S.locale?S.locale:"",p=S.localeOptions||{},y=void 0!==S.separator?S.separator:"",_=void 0!==S.spacer?S.spacer:w?"":" ",C=S.symbols||{},x=2===s&&S.standard||"jedec",f=S.output||"string",c=!0===S.fullform,u=S.fullforms instanceof Array?S.fullforms:[],n=void 0!==S.exponent?S.exponent:-1,D=r[S.roundingMethod]||Math.round,l=s>2?1e3:1024,(m=(h=Number(i))<0)&&(h=-h),(-1===n||isNaN(n))&&(n=Math.floor(Math.log(h)/Math.log(l)))<0&&(n=0),n>8&&(n=8),"exponent"===f)return n;if(0===h)k[0]=0,b=k[1]=w?"":t[x][o?"bits":"bytes"][n];else{U=h/(2===s?Math.pow(2,10*n):Math.pow(1e3,n)),o&&(U*=8)>=l&&n<8&&(U/=l,n++);var $=Math.pow(10,n>0?v:0);k[0]=D(U*$)/$,k[0]===l&&n<8&&void 0===S.exponent&&(k[0]=1,n++),b=k[1]=10===s&&1===n?o?"kb":"kB":t[x][o?"bits":"bytes"][n],w&&(k[1]="jedec"===x?k[1].charAt(0):n>0?k[1].replace(/B$/,""):k[1],e.test(k[1])&&(k[0]=Math.floor(k[0]),k[1]=""))}if(m&&(k[0]=-k[0]),k[1]=C[k[1]]||k[1],!0===d?k[0]=k[0].toLocaleString():d.length>0?k[0]=k[0].toLocaleString(d,p):y.length>0&&(k[0]=k[0].toString().replace(".",y)),g&&!1===Number.isInteger(k[0])&&v>0){var F=y||".",H=k[0].toString().split(F),T=H[1]||"",E=T.length,P=v-E;k[0]="".concat(H[0]).concat(F).concat(T.padEnd(E+P,"0"))}return c&&(k[1]=u[n]?u[n]:a[x][n]+(o?"bit":"byte")+(1===k[0]?"":"s")),"array"===f?k:"object"===f?{value:k[0],symbol:k[1],exponent:n,unit:b}:k.join(_)}return i.partial=function(e){return function(t){return i(t,e)}},i}))},d4c0:function(e,t,a){var r=a("0d58"),i=a("2621"),n=a("52a7");e.exports=function(e){var t=r(e),a=i.f;if(a){var s,o=a(e),l=n.f,c=0;while(o.length>c)l.call(e,s=o[c++])&&t.push(s)}return t}},e2c5:function(e,t,a){"use strict";a("7a81")},e853:function(e,t,a){var r=a("d3f4"),i=a("1169"),n=a("2b4c")("species");e.exports=function(e){var t;return i(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!i(t.prototype)||(t=void 0),r(t)&&(t=t[n],null===t&&(t=void 0))),void 0===t?Array:t}}}]);